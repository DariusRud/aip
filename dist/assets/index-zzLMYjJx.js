function Fp(o,n){for(var i=0;i<n.length;i++){const l=n[i];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in o)){const f=Object.getOwnPropertyDescriptor(l,d);f&&Object.defineProperty(o,d,f.get?f:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function i(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(d){if(d.ep)return;d.ep=!0;const f=i(d);fetch(d.href,f)}})();function qm(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function ev(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var n=o.default;if(typeof n=="function"){var i=function l(){var d=!1;try{d=this instanceof l}catch{}return d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(o).forEach(function(l){var d=Object.getOwnPropertyDescriptor(o,l);Object.defineProperty(i,l,d.get?d:{enumerable:!0,get:function(){return o[l]}})}),i}var fo={exports:{}},si={};var Fh;function tv(){if(Fh)return si;Fh=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(l,d,f){var h=null;if(f!==void 0&&(h=""+f),d.key!==void 0&&(h=""+d.key),"key"in d){f={};for(var v in d)v!=="key"&&(f[v]=d[v])}else f=d;return d=f.ref,{$$typeof:o,type:l,key:h,ref:d!==void 0?d:null,props:f}}return si.Fragment=n,si.jsx=i,si.jsxs=i,si}var em;function av(){return em||(em=1,fo.exports=tv()),fo.exports}var r=av(),ho={exports:{}},fe={};var tm;function sv(){if(tm)return fe;tm=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.iterator;function _(N){return N===null||typeof N!="object"?null:(N=O&&N[O]||N["@@iterator"],typeof N=="function"?N:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,D={};function Y(N,K,W){this.props=N,this.context=K,this.refs=D,this.updater=W||A}Y.prototype.isReactComponent={},Y.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},Y.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function q(){}q.prototype=Y.prototype;function z(N,K,W){this.props=N,this.context=K,this.refs=D,this.updater=W||A}var Q=z.prototype=new q;Q.constructor=z,L(Q,Y.prototype),Q.isPureReactComponent=!0;var F=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function Z(N,K,W){var se=W.ref;return{$$typeof:o,type:N,key:K,ref:se!==void 0?se:null,props:W}}function J(N,K){return Z(N.type,K,N.props)}function ae(N){return typeof N=="object"&&N!==null&&N.$$typeof===o}function V(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(W){return K[W]})}var M=/\/+/g;function I(N,K){return typeof N=="object"&&N!==null&&N.key!=null?V(""+N.key):K.toString(36)}function pe(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(te,te):(N.status="pending",N.then(function(K){N.status==="pending"&&(N.status="fulfilled",N.value=K)},function(K){N.status==="pending"&&(N.status="rejected",N.reason=K)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function B(N,K,W,se,he){var ve=typeof N;(ve==="undefined"||ve==="boolean")&&(N=null);var Oe=!1;if(N===null)Oe=!0;else switch(ve){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(N.$$typeof){case o:case n:Oe=!0;break;case y:return Oe=N._init,B(Oe(N._payload),K,W,se,he)}}if(Oe)return he=he(N),Oe=se===""?"."+I(N,0):se,F(he)?(W="",Oe!=null&&(W=Oe.replace(M,"$&/")+"/"),B(he,K,W,"",function(cn){return cn})):he!=null&&(ae(he)&&(he=J(he,W+(he.key==null||N&&N.key===he.key?"":(""+he.key).replace(M,"$&/")+"/")+Oe)),K.push(he)),1;Oe=0;var ut=se===""?".":se+":";if(F(N))for(var Ve=0;Ve<N.length;Ve++)se=N[Ve],ve=ut+I(se,Ve),Oe+=B(se,K,W,ve,he);else if(Ve=_(N),typeof Ve=="function")for(N=Ve.call(N),Ve=0;!(se=N.next()).done;)se=se.value,ve=ut+I(se,Ve++),Oe+=B(se,K,W,ve,he);else if(ve==="object"){if(typeof N.then=="function")return B(pe(N),K,W,se,he);throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function P(N,K,W){if(N==null)return N;var se=[],he=0;return B(N,se,"","",function(ve){return K.call(W,ve,he++)}),se}function ce(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(W){(N._status===0||N._status===-1)&&(N._status=1,N._result=W)},function(W){(N._status===0||N._status===-1)&&(N._status=2,N._result=W)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var Ne=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Te={map:P,forEach:function(N,K,W){P(N,function(){K.apply(this,arguments)},W)},count:function(N){var K=0;return P(N,function(){K++}),K},toArray:function(N){return P(N,function(K){return K})||[]},only:function(N){if(!ae(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return fe.Activity=w,fe.Children=Te,fe.Component=Y,fe.Fragment=i,fe.Profiler=d,fe.PureComponent=z,fe.StrictMode=l,fe.Suspense=p,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,fe.__COMPILER_RUNTIME={__proto__:null,c:function(N){return S.H.useMemoCache(N)}},fe.cache=function(N){return function(){return N.apply(null,arguments)}},fe.cacheSignal=function(){return null},fe.cloneElement=function(N,K,W){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=L({},N.props),he=N.key;if(K!=null)for(ve in K.key!==void 0&&(he=""+K.key),K)!x.call(K,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&K.ref===void 0||(se[ve]=K[ve]);var ve=arguments.length-2;if(ve===1)se.children=W;else if(1<ve){for(var Oe=Array(ve),ut=0;ut<ve;ut++)Oe[ut]=arguments[ut+2];se.children=Oe}return Z(N.type,he,se)},fe.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:f,_context:N},N},fe.createElement=function(N,K,W){var se,he={},ve=null;if(K!=null)for(se in K.key!==void 0&&(ve=""+K.key),K)x.call(K,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(he[se]=K[se]);var Oe=arguments.length-2;if(Oe===1)he.children=W;else if(1<Oe){for(var ut=Array(Oe),Ve=0;Ve<Oe;Ve++)ut[Ve]=arguments[Ve+2];he.children=ut}if(N&&N.defaultProps)for(se in Oe=N.defaultProps,Oe)he[se]===void 0&&(he[se]=Oe[se]);return Z(N,ve,he)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(N){return{$$typeof:v,render:N}},fe.isValidElement=ae,fe.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:ce}},fe.memo=function(N,K){return{$$typeof:g,type:N,compare:K===void 0?null:K}},fe.startTransition=function(N){var K=S.T,W={};S.T=W;try{var se=N(),he=S.S;he!==null&&he(W,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(te,Ne)}catch(ve){Ne(ve)}finally{K!==null&&W.types!==null&&(K.types=W.types),S.T=K}},fe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},fe.use=function(N){return S.H.use(N)},fe.useActionState=function(N,K,W){return S.H.useActionState(N,K,W)},fe.useCallback=function(N,K){return S.H.useCallback(N,K)},fe.useContext=function(N){return S.H.useContext(N)},fe.useDebugValue=function(){},fe.useDeferredValue=function(N,K){return S.H.useDeferredValue(N,K)},fe.useEffect=function(N,K){return S.H.useEffect(N,K)},fe.useEffectEvent=function(N){return S.H.useEffectEvent(N)},fe.useId=function(){return S.H.useId()},fe.useImperativeHandle=function(N,K,W){return S.H.useImperativeHandle(N,K,W)},fe.useInsertionEffect=function(N,K){return S.H.useInsertionEffect(N,K)},fe.useLayoutEffect=function(N,K){return S.H.useLayoutEffect(N,K)},fe.useMemo=function(N,K){return S.H.useMemo(N,K)},fe.useOptimistic=function(N,K){return S.H.useOptimistic(N,K)},fe.useReducer=function(N,K,W){return S.H.useReducer(N,K,W)},fe.useRef=function(N){return S.H.useRef(N)},fe.useState=function(N){return S.H.useState(N)},fe.useSyncExternalStore=function(N,K,W){return S.H.useSyncExternalStore(N,K,W)},fe.useTransition=function(){return S.H.useTransition()},fe.version="19.2.0",fe}var am;function $o(){return am||(am=1,ho.exports=sv()),ho.exports}var X=$o();const mo=qm(X);var go={exports:{}},ni={},po={exports:{}},vo={};var sm;function nv(){return sm||(sm=1,(function(o){function n(B,P){var ce=B.length;B.push(P);e:for(;0<ce;){var Ne=ce-1>>>1,Te=B[Ne];if(0<d(Te,P))B[Ne]=P,B[ce]=Te,ce=Ne;else break e}}function i(B){return B.length===0?null:B[0]}function l(B){if(B.length===0)return null;var P=B[0],ce=B.pop();if(ce!==P){B[0]=ce;e:for(var Ne=0,Te=B.length,N=Te>>>1;Ne<N;){var K=2*(Ne+1)-1,W=B[K],se=K+1,he=B[se];if(0>d(W,ce))se<Te&&0>d(he,W)?(B[Ne]=he,B[se]=ce,Ne=se):(B[Ne]=W,B[K]=ce,Ne=K);else if(se<Te&&0>d(he,ce))B[Ne]=he,B[se]=ce,Ne=se;else break e}}return P}function d(B,P){var ce=B.sortIndex-P.sortIndex;return ce!==0?ce:B.id-P.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;o.unstable_now=function(){return f.now()}}else{var h=Date,v=h.now();o.unstable_now=function(){return h.now()-v}}var p=[],g=[],y=1,w=null,O=3,_=!1,A=!1,L=!1,D=!1,Y=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function Q(B){for(var P=i(g);P!==null;){if(P.callback===null)l(g);else if(P.startTime<=B)l(g),P.sortIndex=P.expirationTime,n(p,P);else break;P=i(g)}}function F(B){if(L=!1,Q(B),!A)if(i(p)!==null)A=!0,te||(te=!0,V());else{var P=i(g);P!==null&&pe(F,P.startTime-B)}}var te=!1,S=-1,x=5,Z=-1;function J(){return D?!0:!(o.unstable_now()-Z<x)}function ae(){if(D=!1,te){var B=o.unstable_now();Z=B;var P=!0;try{e:{A=!1,L&&(L=!1,q(S),S=-1),_=!0;var ce=O;try{t:{for(Q(B),w=i(p);w!==null&&!(w.expirationTime>B&&J());){var Ne=w.callback;if(typeof Ne=="function"){w.callback=null,O=w.priorityLevel;var Te=Ne(w.expirationTime<=B);if(B=o.unstable_now(),typeof Te=="function"){w.callback=Te,Q(B),P=!0;break t}w===i(p)&&l(p),Q(B)}else l(p);w=i(p)}if(w!==null)P=!0;else{var N=i(g);N!==null&&pe(F,N.startTime-B),P=!1}}break e}finally{w=null,O=ce,_=!1}P=void 0}}finally{P?V():te=!1}}}var V;if(typeof z=="function")V=function(){z(ae)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,I=M.port2;M.port1.onmessage=ae,V=function(){I.postMessage(null)}}else V=function(){Y(ae,0)};function pe(B,P){S=Y(function(){B(o.unstable_now())},P)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(B){B.callback=null},o.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},o.unstable_getCurrentPriorityLevel=function(){return O},o.unstable_next=function(B){switch(O){case 1:case 2:case 3:var P=3;break;default:P=O}var ce=O;O=P;try{return B()}finally{O=ce}},o.unstable_requestPaint=function(){D=!0},o.unstable_runWithPriority=function(B,P){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ce=O;O=B;try{return P()}finally{O=ce}},o.unstable_scheduleCallback=function(B,P,ce){var Ne=o.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ne+ce:Ne):ce=Ne,B){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ce+Te,B={id:y++,callback:P,priorityLevel:B,startTime:ce,expirationTime:Te,sortIndex:-1},ce>Ne?(B.sortIndex=ce,n(g,B),i(p)===null&&B===i(g)&&(L?(q(S),S=-1):L=!0,pe(F,ce-Ne))):(B.sortIndex=Te,n(p,B),A||_||(A=!0,te||(te=!0,V()))),B},o.unstable_shouldYield=J,o.unstable_wrapCallback=function(B){var P=O;return function(){var ce=O;O=P;try{return B.apply(this,arguments)}finally{O=ce}}}})(vo)),vo}var nm;function iv(){return nm||(nm=1,po.exports=nv()),po.exports}var bo={exports:{}},it={};var im;function lv(){if(im)return it;im=1;var o=$o();function n(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(p,g,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:p,containerInfo:g,implementation:y}}var h=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return it.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,it.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return f(p,g,null,y)},it.flushSync=function(p){var g=h.T,y=l.p;try{if(h.T=null,l.p=2,p)return p()}finally{h.T=g,l.p=y,l.d.f()}},it.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(p,g))},it.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},it.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,w=v(y,g.crossOrigin),O=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?l.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:O,fetchPriority:_}):y==="script"&&l.d.X(p,{crossOrigin:w,integrity:O,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},it.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=v(g.as,g.crossOrigin);l.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(p)},it.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,w=v(y,g.crossOrigin);l.d.L(p,y,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},it.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=v(g.as,g.crossOrigin);l.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(p)},it.requestFormReset=function(p){l.d.r(p)},it.unstable_batchedUpdates=function(p,g){return p(g)},it.useFormState=function(p,g,y){return h.H.useFormState(p,g,y)},it.useFormStatus=function(){return h.H.useHostTransitionStatus()},it.version="19.2.0",it}var lm;function rv(){if(lm)return bo.exports;lm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),bo.exports=lv(),bo.exports}var rm;function uv(){if(rm)return ni;rm=1;var o=iv(),n=$o(),i=rv();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(l(188))}function g(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,s=t;;){var u=a.return;if(u===null)break;var c=u.alternate;if(c===null){if(s=u.return,s!==null){a=s;continue}break}if(u.child===c.child){for(c=u.child;c;){if(c===a)return p(u),e;if(c===s)return p(u),t;c=c.sibling}throw Error(l(188))}if(a.return!==s.return)a=u,s=c;else{for(var m=!1,b=u.child;b;){if(b===a){m=!0,a=u,s=c;break}if(b===s){m=!0,s=u,a=c;break}b=b.sibling}if(!m){for(b=c.child;b;){if(b===a){m=!0,a=c,s=u;break}if(b===s){m=!0,s=c,a=u;break}b=b.sibling}if(!m)throw Error(l(189))}}if(a.alternate!==s)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,O=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),z=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=ae&&e[ae]||e["@@iterator"],typeof e=="function"?e:null)}var M=Symbol.for("react.client.reference");function I(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===M?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case Y:return"Profiler";case D:return"StrictMode";case F:return"Suspense";case te:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case z:return e.displayName||"Context";case q:return(e._context.displayName||"Context")+".Consumer";case Q:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case S:return t=e.displayName||null,t!==null?t:I(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return I(e(t))}catch{}}return null}var pe=Array.isArray,B=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Ne=[],Te=-1;function N(e){return{current:e}}function K(e){0>Te||(e.current=Ne[Te],Ne[Te]=null,Te--)}function W(e,t){Te++,Ne[Te]=e.current,e.current=t}var se=N(null),he=N(null),ve=N(null),Oe=N(null);function ut(e,t){switch(W(ve,t),W(he,e),W(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?wh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=wh(t),e=jh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(se),W(se,e)}function Ve(){K(se),K(he),K(ve)}function cn(e){e.memoizedState!==null&&W(Oe,e);var t=se.current,a=jh(t,e.type);t!==a&&(W(he,e),W(se,a))}function hi(e){he.current===e&&(K(se),K(he)),Oe.current===e&&(K(Oe),Fn._currentValue=ce)}var Xl,Io;function Ga(e){if(Xl===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Xl=t&&t[1]||"",Io=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xl+e+Io}var Jl=!1;function Zl(e,t){if(!e||Jl)return"";Jl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(U){var C=U}Reflect.construct(e,[],G)}else{try{G.call()}catch(U){C=U}e.call(G.prototype)}}else{try{throw Error()}catch(U){C=U}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(U){if(U&&C&&typeof U.stack=="string")return[U.stack,C.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=s.DetermineComponentFrameRoot(),m=c[0],b=c[1];if(m&&b){var j=m.split(`
`),R=b.split(`
`);for(u=s=0;s<j.length&&!j[s].includes("DetermineComponentFrameRoot");)s++;for(;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;if(s===j.length||u===R.length)for(s=j.length-1,u=R.length-1;1<=s&&0<=u&&j[s]!==R[u];)u--;for(;1<=s&&0<=u;s--,u--)if(j[s]!==R[u]){if(s!==1||u!==1)do if(s--,u--,0>u||j[s]!==R[u]){var H=`
`+j[s].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=s&&0<=u);break}}}finally{Jl=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ga(a):""}function k0(e,t){switch(e.tag){case 26:case 27:case 5:return Ga(e.type);case 16:return Ga("Lazy");case 13:return e.child!==t&&t!==null?Ga("Suspense Fallback"):Ga("Suspense");case 19:return Ga("SuspenseList");case 0:case 15:return Zl(e.type,!1);case 11:return Zl(e.type.render,!1);case 1:return Zl(e.type,!0);case 31:return Ga("Activity");default:return""}}function Wo(e){try{var t="",a=null;do t+=k0(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Pl=Object.prototype.hasOwnProperty,Il=o.unstable_scheduleCallback,Wl=o.unstable_cancelCallback,R0=o.unstable_shouldYield,C0=o.unstable_requestPaint,vt=o.unstable_now,D0=o.unstable_getCurrentPriorityLevel,Fo=o.unstable_ImmediatePriority,ec=o.unstable_UserBlockingPriority,mi=o.unstable_NormalPriority,U0=o.unstable_LowPriority,tc=o.unstable_IdlePriority,z0=o.log,M0=o.unstable_setDisableYieldValue,dn=null,bt=null;function ga(e){if(typeof z0=="function"&&M0(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(dn,e)}catch{}}var yt=Math.clz32?Math.clz32:L0,q0=Math.log,B0=Math.LN2;function L0(e){return e>>>=0,e===0?32:31-(q0(e)/B0|0)|0}var gi=256,pi=262144,vi=4194304;function Ka(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bi(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var u=0,c=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var b=s&134217727;return b!==0?(s=b&~c,s!==0?u=Ka(s):(m&=b,m!==0?u=Ka(m):a||(a=b&~e,a!==0&&(u=Ka(a))))):(b=s&~c,b!==0?u=Ka(b):m!==0?u=Ka(m):a||(a=s&~e,a!==0&&(u=Ka(a)))),u===0?0:t!==0&&t!==u&&(t&c)===0&&(c=u&-u,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:u}function fn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function H0(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ac(){var e=vi;return vi<<=1,(vi&62914560)===0&&(vi=4194304),e}function Fl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function hn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function $0(e,t,a,s,u,c){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,j=e.expirationTimes,R=e.hiddenUpdates;for(a=m&~a;0<a;){var H=31-yt(a),G=1<<H;b[H]=0,j[H]=-1;var C=R[H];if(C!==null)for(R[H]=null,H=0;H<C.length;H++){var U=C[H];U!==null&&(U.lane&=-536870913)}a&=~G}s!==0&&sc(e,s,0),c!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=c&~(m&~t))}function sc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-yt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function nc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-yt(a),u=1<<s;u&t|e[s]&t&&(e[s]|=t),a&=~u}}function ic(e,t){var a=t&-t;return a=(a&42)!==0?1:er(a),(a&(e.suspendedLanes|t))!==0?0:a}function er(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function tr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function lc(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:Qh(e.type))}function rc(e,t){var a=P.p;try{return P.p=e,t()}finally{P.p=a}}var pa=Math.random().toString(36).slice(2),et="__reactFiber$"+pa,ct="__reactProps$"+pa,ms="__reactContainer$"+pa,ar="__reactEvents$"+pa,V0="__reactListeners$"+pa,G0="__reactHandles$"+pa,uc="__reactResources$"+pa,mn="__reactMarker$"+pa;function sr(e){delete e[et],delete e[ct],delete e[ar],delete e[V0],delete e[G0]}function gs(e){var t=e[et];if(t)return t;for(var a=e.parentNode;a;){if(t=a[ms]||a[et]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=kh(e);e!==null;){if(a=e[et])return a;e=kh(e)}return t}e=a,a=e.parentNode}return null}function ps(e){if(e=e[et]||e[ms]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function gn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function vs(e){var t=e[uc];return t||(t=e[uc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[mn]=!0}var oc=new Set,cc={};function Ya(e,t){bs(e,t),bs(e+"Capture",t)}function bs(e,t){for(cc[e]=t,e=0;e<t.length;e++)oc.add(t[e])}var K0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dc={},fc={};function Y0(e){return Pl.call(fc,e)?!0:Pl.call(dc,e)?!1:K0.test(e)?fc[e]=!0:(dc[e]=!0,!1)}function yi(e,t,a){if(Y0(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function xi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Pt(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Q0(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,c=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(m){a=""+m,c.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nr(e){if(!e._valueTracker){var t=hc(e)?"checked":"value";e._valueTracker=Q0(e,t,""+e[t])}}function mc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=hc(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function _i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var X0=/[\n"\\]/g;function kt(e){return e.replace(X0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ir(e,t,a,s,u,c,m,b){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?lr(e,m,At(t)):a!=null?lr(e,m,At(a)):s!=null&&e.removeAttribute("value"),u==null&&c!=null&&(e.defaultChecked=!!c),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+At(b):e.removeAttribute("name")}function gc(e,t,a,s,u,c,m,b){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){nr(e);return}a=a!=null?""+At(a):"",t=t!=null?""+At(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}s=s??u,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=b?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),nr(e)}function lr(e,t,a){t==="number"&&_i(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ys(e,t,a,s){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&s&&(e[a].defaultSelected=!0)}else{for(a=""+At(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function pc(e,t,a){if(t!=null&&(t=""+At(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+At(a):""}function vc(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(l(92));if(pe(s)){if(1<s.length)throw Error(l(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=At(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),nr(e)}function xs(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var J0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bc(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||J0.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function yc(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var u in t)s=t[u],t.hasOwnProperty(u)&&a[u]!==s&&bc(e,u,s)}else for(var c in t)t.hasOwnProperty(c)&&bc(e,c,t[c])}function rr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),P0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wi(e){return P0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function It(){}var ur=null;function or(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _s=null,ws=null;function xc(e){var t=ps(e);if(t&&(e=t.stateNode)){var a=e[ct]||null;e:switch(e=t.stateNode,t.type){case"input":if(ir(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+kt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var u=s[ct]||null;if(!u)throw Error(l(90));ir(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&mc(s)}break e;case"textarea":pc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ys(e,!!a.multiple,t,!1)}}}var cr=!1;function _c(e,t,a){if(cr)return e(t,a);cr=!0;try{var s=e(t);return s}finally{if(cr=!1,(_s!==null||ws!==null)&&(ol(),_s&&(t=_s,e=ws,ws=_s=null,xc(t),e)))for(t=0;t<e.length;t++)xc(e[t])}}function pn(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ct]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dr=!1;if(Wt)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){dr=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{dr=!1}var va=null,fr=null,ji=null;function wc(){if(ji)return ji;var e,t=fr,a=t.length,s,u="value"in va?va.value:va.textContent,c=u.length;for(e=0;e<a&&t[e]===u[e];e++);var m=a-e;for(s=1;s<=m&&t[a-s]===u[c-s];s++);return ji=u.slice(e,1<s?1-s:void 0)}function Si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ni(){return!0}function jc(){return!1}function dt(e){function t(a,s,u,c,m){this._reactName=a,this._targetInst=u,this.type=s,this.nativeEvent=c,this.target=m,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(c):c[b]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Ni:jc,this.isPropagationStopped=jc,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),t}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=dt(Qa),bn=w({},Qa,{view:0,detail:0}),I0=dt(bn),hr,mr,yn,Ti=w({},bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&e.type==="mousemove"?(hr=e.screenX-yn.screenX,mr=e.screenY-yn.screenY):mr=hr=0,yn=e),hr)},movementY:function(e){return"movementY"in e?e.movementY:mr}}),Sc=dt(Ti),W0=w({},Ti,{dataTransfer:0}),F0=dt(W0),eg=w({},bn,{relatedTarget:0}),gr=dt(eg),tg=w({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),ag=dt(tg),sg=w({},Qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ng=dt(sg),ig=w({},Qa,{data:0}),Nc=dt(ig),lg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ug={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function og(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ug[e])?!!t[e]:!1}function pr(){return og}var cg=w({},bn,{key:function(e){if(e.key){var t=lg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(e){return e.type==="keypress"?Si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dg=dt(cg),fg=w({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=dt(fg),hg=w({},bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),mg=dt(hg),gg=w({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),pg=dt(gg),vg=w({},Ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bg=dt(vg),yg=w({},Qa,{newState:0,oldState:0}),xg=dt(yg),_g=[9,13,27,32],vr=Wt&&"CompositionEvent"in window,xn=null;Wt&&"documentMode"in document&&(xn=document.documentMode);var wg=Wt&&"TextEvent"in window&&!xn,Tc=Wt&&(!vr||xn&&8<xn&&11>=xn),Oc=" ",Ac=!1;function kc(e,t){switch(e){case"keyup":return _g.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var js=!1;function jg(e,t){switch(e){case"compositionend":return Rc(t);case"keypress":return t.which!==32?null:(Ac=!0,Oc);case"textInput":return e=t.data,e===Oc&&Ac?null:e;default:return null}}function Sg(e,t){if(js)return e==="compositionend"||!vr&&kc(e,t)?(e=wc(),ji=fr=va=null,js=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tc&&t.locale!=="ko"?null:t.data;default:return null}}var Ng={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ng[e.type]:t==="textarea"}function Dc(e,t,a,s){_s?ws?ws.push(s):ws=[s]:_s=s,t=pl(t,"onChange"),0<t.length&&(a=new Ei("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var _n=null,wn=null;function Eg(e){ph(e,0)}function Oi(e){var t=gn(e);if(mc(t))return e}function Uc(e,t){if(e==="change")return t}var zc=!1;if(Wt){var br;if(Wt){var yr="oninput"in document;if(!yr){var Mc=document.createElement("div");Mc.setAttribute("oninput","return;"),yr=typeof Mc.oninput=="function"}br=yr}else br=!1;zc=br&&(!document.documentMode||9<document.documentMode)}function qc(){_n&&(_n.detachEvent("onpropertychange",Bc),wn=_n=null)}function Bc(e){if(e.propertyName==="value"&&Oi(wn)){var t=[];Dc(t,wn,e,or(e)),_c(Eg,t)}}function Tg(e,t,a){e==="focusin"?(qc(),_n=t,wn=a,_n.attachEvent("onpropertychange",Bc)):e==="focusout"&&qc()}function Og(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oi(wn)}function Ag(e,t){if(e==="click")return Oi(t)}function kg(e,t){if(e==="input"||e==="change")return Oi(t)}function Rg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xt=typeof Object.is=="function"?Object.is:Rg;function jn(e,t){if(xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var u=a[s];if(!Pl.call(t,u)||!xt(e[u],t[u]))return!1}return!0}function Lc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hc(e,t){var a=Lc(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lc(a)}}function $c(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$c(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_i(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=_i(e.document)}return t}function xr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Cg=Wt&&"documentMode"in document&&11>=document.documentMode,Ss=null,_r=null,Sn=null,wr=!1;function Gc(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wr||Ss==null||Ss!==_i(s)||(s=Ss,"selectionStart"in s&&xr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Sn&&jn(Sn,s)||(Sn=s,s=pl(_r,"onSelect"),0<s.length&&(t=new Ei("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Ss)))}function Xa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ns={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},jr={},Kc={};Wt&&(Kc=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Ja(e){if(jr[e])return jr[e];if(!Ns[e])return e;var t=Ns[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Kc)return jr[e]=t[a];return e}var Yc=Ja("animationend"),Qc=Ja("animationiteration"),Xc=Ja("animationstart"),Dg=Ja("transitionrun"),Ug=Ja("transitionstart"),zg=Ja("transitioncancel"),Jc=Ja("transitionend"),Zc=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sr.push("scrollEnd");function Lt(e,t){Zc.set(e,t),Ya(t,[e])}var Ai=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rt=[],Es=0,Nr=0;function ki(){for(var e=Es,t=Nr=Es=0;t<e;){var a=Rt[t];Rt[t++]=null;var s=Rt[t];Rt[t++]=null;var u=Rt[t];Rt[t++]=null;var c=Rt[t];if(Rt[t++]=null,s!==null&&u!==null){var m=s.pending;m===null?u.next=u:(u.next=m.next,m.next=u),s.pending=u}c!==0&&Pc(a,u,c)}}function Ri(e,t,a,s){Rt[Es++]=e,Rt[Es++]=t,Rt[Es++]=a,Rt[Es++]=s,Nr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Er(e,t,a,s){return Ri(e,t,a,s),Ci(e)}function Za(e,t){return Ri(e,null,null,t),Ci(e)}function Pc(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var u=!1,c=e.return;c!==null;)c.childLanes|=a,s=c.alternate,s!==null&&(s.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(u=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,u&&t!==null&&(u=31-yt(a),e=c.hiddenUpdates,s=e[u],s===null?e[u]=[t]:s.push(t),t.lane=a|536870912),c):null}function Ci(e){if(50<Qn)throw Qn=0,zu=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ts={};function Mg(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,a,s){return new Mg(e,t,a,s)}function Tr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ft(e,t){var a=e.alternate;return a===null?(a=_t(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ic(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Di(e,t,a,s,u,c){var m=0;if(s=e,typeof e=="function")Tr(e)&&(m=1);else if(typeof e=="string")m=$p(e,a,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Z:return e=_t(31,a,t,u),e.elementType=Z,e.lanes=c,e;case L:return Pa(a.children,u,c,t);case D:m=8,u|=24;break;case Y:return e=_t(12,a,t,u|2),e.elementType=Y,e.lanes=c,e;case F:return e=_t(13,a,t,u),e.elementType=F,e.lanes=c,e;case te:return e=_t(19,a,t,u),e.elementType=te,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:m=10;break e;case q:m=9;break e;case Q:m=11;break e;case S:m=14;break e;case x:m=16,s=null;break e}m=29,a=Error(l(130,e===null?"null":typeof e,"")),s=null}return t=_t(m,a,t,u),t.elementType=e,t.type=s,t.lanes=c,t}function Pa(e,t,a,s){return e=_t(7,e,s,t),e.lanes=a,e}function Or(e,t,a){return e=_t(6,e,null,t),e.lanes=a,e}function Wc(e){var t=_t(18,null,null,0);return t.stateNode=e,t}function Ar(e,t,a){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Fc=new WeakMap;function Ct(e,t){if(typeof e=="object"&&e!==null){var a=Fc.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Wo(t)},Fc.set(e,t),t)}return{value:e,source:t,stack:Wo(t)}}var Os=[],As=0,Ui=null,Nn=0,Dt=[],Ut=0,ba=null,Qt=1,Xt="";function ea(e,t){Os[As++]=Nn,Os[As++]=Ui,Ui=e,Nn=t}function ed(e,t,a){Dt[Ut++]=Qt,Dt[Ut++]=Xt,Dt[Ut++]=ba,ba=e;var s=Qt;e=Xt;var u=32-yt(s)-1;s&=~(1<<u),a+=1;var c=32-yt(t)+u;if(30<c){var m=u-u%5;c=(s&(1<<m)-1).toString(32),s>>=m,u-=m,Qt=1<<32-yt(t)+u|a<<u|s,Xt=c+e}else Qt=1<<c|a<<u|s,Xt=e}function kr(e){e.return!==null&&(ea(e,1),ed(e,1,0))}function Rr(e){for(;e===Ui;)Ui=Os[--As],Os[As]=null,Nn=Os[--As],Os[As]=null;for(;e===ba;)ba=Dt[--Ut],Dt[Ut]=null,Xt=Dt[--Ut],Dt[Ut]=null,Qt=Dt[--Ut],Dt[Ut]=null}function td(e,t){Dt[Ut++]=Qt,Dt[Ut++]=Xt,Dt[Ut++]=ba,Qt=t.id,Xt=t.overflow,ba=e}var tt=null,Me=null,we=!1,ya=null,zt=!1,Cr=Error(l(519));function xa(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw En(Ct(t,e)),Cr}function ad(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[et]=e,t[ct]=s,a){case"dialog":ye("cancel",t),ye("close",t);break;case"iframe":case"object":case"embed":ye("load",t);break;case"video":case"audio":for(a=0;a<Jn.length;a++)ye(Jn[a],t);break;case"source":ye("error",t);break;case"img":case"image":case"link":ye("error",t),ye("load",t);break;case"details":ye("toggle",t);break;case"input":ye("invalid",t),gc(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ye("invalid",t);break;case"textarea":ye("invalid",t),vc(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||xh(t.textContent,a)?(s.popover!=null&&(ye("beforetoggle",t),ye("toggle",t)),s.onScroll!=null&&ye("scroll",t),s.onScrollEnd!=null&&ye("scrollend",t),s.onClick!=null&&(t.onclick=It),t=!0):t=!1,t||xa(e,!0)}function sd(e){for(tt=e.return;tt;)switch(tt.tag){case 5:case 31:case 13:zt=!1;return;case 27:case 3:zt=!0;return;default:tt=tt.return}}function ks(e){if(e!==tt)return!1;if(!we)return sd(e),we=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Pu(e.type,e.memoizedProps)),a=!a),a&&Me&&xa(e),sd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Me=Ah(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Me=Ah(e)}else t===27?(t=Me,Ua(e.type)?(e=to,to=null,Me=e):Me=t):Me=tt?qt(e.stateNode.nextSibling):null;return!0}function Ia(){Me=tt=null,we=!1}function Dr(){var e=ya;return e!==null&&(gt===null?gt=e:gt.push.apply(gt,e),ya=null),e}function En(e){ya===null?ya=[e]:ya.push(e)}var Ur=N(null),Wa=null,ta=null;function _a(e,t,a){W(Ur,t._currentValue),t._currentValue=a}function aa(e){e._currentValue=Ur.current,K(Ur)}function zr(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Mr(e,t,a,s){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var c=u.dependencies;if(c!==null){var m=u.child;c=c.firstContext;e:for(;c!==null;){var b=c;c=u;for(var j=0;j<t.length;j++)if(b.context===t[j]){c.lanes|=a,b=c.alternate,b!==null&&(b.lanes|=a),zr(c.return,a,e),s||(m=null);break e}c=b.next}}else if(u.tag===18){if(m=u.return,m===null)throw Error(l(341));m.lanes|=a,c=m.alternate,c!==null&&(c.lanes|=a),zr(m,a,e),m=null}else m=u.child;if(m!==null)m.return=u;else for(m=u;m!==null;){if(m===e){m=null;break}if(u=m.sibling,u!==null){u.return=m.return,m=u;break}m=m.return}u=m}}function Rs(e,t,a,s){e=null;for(var u=t,c=!1;u!==null;){if(!c){if((u.flags&524288)!==0)c=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var m=u.alternate;if(m===null)throw Error(l(387));if(m=m.memoizedProps,m!==null){var b=u.type;xt(u.pendingProps.value,m.value)||(e!==null?e.push(b):e=[b])}}else if(u===Oe.current){if(m=u.alternate,m===null)throw Error(l(387));m.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(Fn):e=[Fn])}u=u.return}e!==null&&Mr(t,e,a,s),t.flags|=262144}function zi(e){for(e=e.firstContext;e!==null;){if(!xt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fa(e){Wa=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function at(e){return nd(Wa,e)}function Mi(e,t){return Wa===null&&Fa(e),nd(e,t)}function nd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ta===null){if(e===null)throw Error(l(308));ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ta=ta.next=t;return a}var qg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Bg=o.unstable_scheduleCallback,Lg=o.unstable_NormalPriority,Ye={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qr(){return{controller:new qg,data:new Map,refCount:0}}function Tn(e){e.refCount--,e.refCount===0&&Bg(Lg,function(){e.controller.abort()})}var On=null,Br=0,Cs=0,Ds=null;function Hg(e,t){if(On===null){var a=On=[];Br=0,Cs=$u(),Ds={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Br++,t.then(id,id),t}function id(){if(--Br===0&&On!==null){Ds!==null&&(Ds.status="fulfilled");var e=On;On=null,Cs=0,Ds=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function $g(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var u=0;u<a.length;u++)(0,a[u])(t)},function(u){for(s.status="rejected",s.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),s}var ld=B.S;B.S=function(e,t){Kf=vt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Hg(e,t),ld!==null&&ld(e,t)};var es=N(null);function Lr(){var e=es.current;return e!==null?e:Ue.pooledCache}function qi(e,t){t===null?W(es,es.current):W(es,t.pool)}function rd(){var e=Lr();return e===null?null:{parent:Ye._currentValue,pool:e}}var Us=Error(l(460)),Hr=Error(l(474)),Bi=Error(l(542)),Li={then:function(){}};function ud(e){return e=e.status,e==="fulfilled"||e==="rejected"}function od(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(It,It),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dd(e),e;default:if(typeof t.status=="string")t.then(It,It);else{if(e=Ue,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=s}},function(s){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dd(e),e}throw as=t,Us}}function ts(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(as=a,Us):a}}var as=null;function cd(){if(as===null)throw Error(l(459));var e=as;return as=null,e}function dd(e){if(e===Us||e===Bi)throw Error(l(483))}var zs=null,An=0;function Hi(e){var t=An;return An+=1,zs===null&&(zs=[]),od(zs,e,t)}function kn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function $i(e,t){throw t.$$typeof===O?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function fd(e){function t(T,E){if(e){var k=T.deletions;k===null?(T.deletions=[E],T.flags|=16):k.push(E)}}function a(T,E){if(!e)return null;for(;E!==null;)t(T,E),E=E.sibling;return null}function s(T){for(var E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function u(T,E){return T=Ft(T,E),T.index=0,T.sibling=null,T}function c(T,E,k){return T.index=k,e?(k=T.alternate,k!==null?(k=k.index,k<E?(T.flags|=67108866,E):k):(T.flags|=67108866,E)):(T.flags|=1048576,E)}function m(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function b(T,E,k,$){return E===null||E.tag!==6?(E=Or(k,T.mode,$),E.return=T,E):(E=u(E,k),E.return=T,E)}function j(T,E,k,$){var ue=k.type;return ue===L?H(T,E,k.props.children,$,k.key):E!==null&&(E.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===x&&ts(ue)===E.type)?(E=u(E,k.props),kn(E,k),E.return=T,E):(E=Di(k.type,k.key,k.props,null,T.mode,$),kn(E,k),E.return=T,E)}function R(T,E,k,$){return E===null||E.tag!==4||E.stateNode.containerInfo!==k.containerInfo||E.stateNode.implementation!==k.implementation?(E=Ar(k,T.mode,$),E.return=T,E):(E=u(E,k.children||[]),E.return=T,E)}function H(T,E,k,$,ue){return E===null||E.tag!==7?(E=Pa(k,T.mode,$,ue),E.return=T,E):(E=u(E,k),E.return=T,E)}function G(T,E,k){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Or(""+E,T.mode,k),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case _:return k=Di(E.type,E.key,E.props,null,T.mode,k),kn(k,E),k.return=T,k;case A:return E=Ar(E,T.mode,k),E.return=T,E;case x:return E=ts(E),G(T,E,k)}if(pe(E)||V(E))return E=Pa(E,T.mode,k,null),E.return=T,E;if(typeof E.then=="function")return G(T,Hi(E),k);if(E.$$typeof===z)return G(T,Mi(T,E),k);$i(T,E)}return null}function C(T,E,k,$){var ue=E!==null?E.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ue!==null?null:b(T,E,""+k,$);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return k.key===ue?j(T,E,k,$):null;case A:return k.key===ue?R(T,E,k,$):null;case x:return k=ts(k),C(T,E,k,$)}if(pe(k)||V(k))return ue!==null?null:H(T,E,k,$,null);if(typeof k.then=="function")return C(T,E,Hi(k),$);if(k.$$typeof===z)return C(T,E,Mi(T,k),$);$i(T,k)}return null}function U(T,E,k,$,ue){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return T=T.get(k)||null,b(E,T,""+$,ue);if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return T=T.get($.key===null?k:$.key)||null,j(E,T,$,ue);case A:return T=T.get($.key===null?k:$.key)||null,R(E,T,$,ue);case x:return $=ts($),U(T,E,k,$,ue)}if(pe($)||V($))return T=T.get(k)||null,H(E,T,$,ue,null);if(typeof $.then=="function")return U(T,E,k,Hi($),ue);if($.$$typeof===z)return U(T,E,k,Mi(E,$),ue);$i(E,$)}return null}function ee(T,E,k,$){for(var ue=null,je=null,ie=E,ge=E=0,_e=null;ie!==null&&ge<k.length;ge++){ie.index>ge?(_e=ie,ie=null):_e=ie.sibling;var Se=C(T,ie,k[ge],$);if(Se===null){ie===null&&(ie=_e);break}e&&ie&&Se.alternate===null&&t(T,ie),E=c(Se,E,ge),je===null?ue=Se:je.sibling=Se,je=Se,ie=_e}if(ge===k.length)return a(T,ie),we&&ea(T,ge),ue;if(ie===null){for(;ge<k.length;ge++)ie=G(T,k[ge],$),ie!==null&&(E=c(ie,E,ge),je===null?ue=ie:je.sibling=ie,je=ie);return we&&ea(T,ge),ue}for(ie=s(ie);ge<k.length;ge++)_e=U(ie,T,ge,k[ge],$),_e!==null&&(e&&_e.alternate!==null&&ie.delete(_e.key===null?ge:_e.key),E=c(_e,E,ge),je===null?ue=_e:je.sibling=_e,je=_e);return e&&ie.forEach(function(La){return t(T,La)}),we&&ea(T,ge),ue}function oe(T,E,k,$){if(k==null)throw Error(l(151));for(var ue=null,je=null,ie=E,ge=E=0,_e=null,Se=k.next();ie!==null&&!Se.done;ge++,Se=k.next()){ie.index>ge?(_e=ie,ie=null):_e=ie.sibling;var La=C(T,ie,Se.value,$);if(La===null){ie===null&&(ie=_e);break}e&&ie&&La.alternate===null&&t(T,ie),E=c(La,E,ge),je===null?ue=La:je.sibling=La,je=La,ie=_e}if(Se.done)return a(T,ie),we&&ea(T,ge),ue;if(ie===null){for(;!Se.done;ge++,Se=k.next())Se=G(T,Se.value,$),Se!==null&&(E=c(Se,E,ge),je===null?ue=Se:je.sibling=Se,je=Se);return we&&ea(T,ge),ue}for(ie=s(ie);!Se.done;ge++,Se=k.next())Se=U(ie,T,ge,Se.value,$),Se!==null&&(e&&Se.alternate!==null&&ie.delete(Se.key===null?ge:Se.key),E=c(Se,E,ge),je===null?ue=Se:je.sibling=Se,je=Se);return e&&ie.forEach(function(Wp){return t(T,Wp)}),we&&ea(T,ge),ue}function De(T,E,k,$){if(typeof k=="object"&&k!==null&&k.type===L&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _:e:{for(var ue=k.key;E!==null;){if(E.key===ue){if(ue=k.type,ue===L){if(E.tag===7){a(T,E.sibling),$=u(E,k.props.children),$.return=T,T=$;break e}}else if(E.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===x&&ts(ue)===E.type){a(T,E.sibling),$=u(E,k.props),kn($,k),$.return=T,T=$;break e}a(T,E);break}else t(T,E);E=E.sibling}k.type===L?($=Pa(k.props.children,T.mode,$,k.key),$.return=T,T=$):($=Di(k.type,k.key,k.props,null,T.mode,$),kn($,k),$.return=T,T=$)}return m(T);case A:e:{for(ue=k.key;E!==null;){if(E.key===ue)if(E.tag===4&&E.stateNode.containerInfo===k.containerInfo&&E.stateNode.implementation===k.implementation){a(T,E.sibling),$=u(E,k.children||[]),$.return=T,T=$;break e}else{a(T,E);break}else t(T,E);E=E.sibling}$=Ar(k,T.mode,$),$.return=T,T=$}return m(T);case x:return k=ts(k),De(T,E,k,$)}if(pe(k))return ee(T,E,k,$);if(V(k)){if(ue=V(k),typeof ue!="function")throw Error(l(150));return k=ue.call(k),oe(T,E,k,$)}if(typeof k.then=="function")return De(T,E,Hi(k),$);if(k.$$typeof===z)return De(T,E,Mi(T,k),$);$i(T,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,E!==null&&E.tag===6?(a(T,E.sibling),$=u(E,k),$.return=T,T=$):(a(T,E),$=Or(k,T.mode,$),$.return=T,T=$),m(T)):a(T,E)}return function(T,E,k,$){try{An=0;var ue=De(T,E,k,$);return zs=null,ue}catch(ie){if(ie===Us||ie===Bi)throw ie;var je=_t(29,ie,null,T.mode);return je.lanes=$,je.return=T,je}finally{}}}var ss=fd(!0),hd=fd(!1),wa=!1;function $r(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ja(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Sa(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ee&2)!==0){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,t=Ci(e),Pc(e,null,a),t}return Ri(e,s,t,a),Ci(e)}function Rn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,nc(e,a)}}function Gr(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var u=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?u=c=m:c=c.next=m,a=a.next}while(a!==null);c===null?u=c=t:c=c.next=t}else u=c=t;a={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:c,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Kr=!1;function Cn(){if(Kr){var e=Ds;if(e!==null)throw e}}function Dn(e,t,a,s){Kr=!1;var u=e.updateQueue;wa=!1;var c=u.firstBaseUpdate,m=u.lastBaseUpdate,b=u.shared.pending;if(b!==null){u.shared.pending=null;var j=b,R=j.next;j.next=null,m===null?c=R:m.next=R,m=j;var H=e.alternate;H!==null&&(H=H.updateQueue,b=H.lastBaseUpdate,b!==m&&(b===null?H.firstBaseUpdate=R:b.next=R,H.lastBaseUpdate=j))}if(c!==null){var G=u.baseState;m=0,H=R=j=null,b=c;do{var C=b.lane&-536870913,U=C!==b.lane;if(U?(xe&C)===C:(s&C)===C){C!==0&&C===Cs&&(Kr=!0),H!==null&&(H=H.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ee=e,oe=b;C=t;var De=a;switch(oe.tag){case 1:if(ee=oe.payload,typeof ee=="function"){G=ee.call(De,G,C);break e}G=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=oe.payload,C=typeof ee=="function"?ee.call(De,G,C):ee,C==null)break e;G=w({},G,C);break e;case 2:wa=!0}}C=b.callback,C!==null&&(e.flags|=64,U&&(e.flags|=8192),U=u.callbacks,U===null?u.callbacks=[C]:U.push(C))}else U={lane:C,tag:b.tag,payload:b.payload,callback:b.callback,next:null},H===null?(R=H=U,j=G):H=H.next=U,m|=C;if(b=b.next,b===null){if(b=u.shared.pending,b===null)break;U=b,b=U.next,U.next=null,u.lastBaseUpdate=U,u.shared.pending=null}}while(!0);H===null&&(j=G),u.baseState=j,u.firstBaseUpdate=R,u.lastBaseUpdate=H,c===null&&(u.shared.lanes=0),Aa|=m,e.lanes=m,e.memoizedState=G}}function md(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function gd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)md(a[e],t)}var Ms=N(null),Vi=N(0);function pd(e,t){e=da,W(Vi,e),W(Ms,t),da=e|t.baseLanes}function Yr(){W(Vi,da),W(Ms,Ms.current)}function Qr(){da=Vi.current,K(Ms),K(Vi)}var wt=N(null),Mt=null;function Na(e){var t=e.alternate;W(Ge,Ge.current&1),W(wt,e),Mt===null&&(t===null||Ms.current!==null||t.memoizedState!==null)&&(Mt=e)}function Xr(e){W(Ge,Ge.current),W(wt,e),Mt===null&&(Mt=e)}function vd(e){e.tag===22?(W(Ge,Ge.current),W(wt,e),Mt===null&&(Mt=e)):Ea()}function Ea(){W(Ge,Ge.current),W(wt,wt.current)}function jt(e){K(wt),Mt===e&&(Mt=null),K(Ge)}var Ge=N(0);function Gi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Fu(a)||eo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sa=0,me=null,Re=null,Qe=null,Ki=!1,qs=!1,ns=!1,Yi=0,Un=0,Bs=null,Vg=0;function He(){throw Error(l(321))}function Jr(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!xt(e[a],t[a]))return!1;return!0}function Zr(e,t,a,s,u,c){return sa=c,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,B.H=e===null||e.memoizedState===null?ef:cu,ns=!1,c=a(s,u),ns=!1,qs&&(c=yd(t,a,s,u)),bd(e),c}function bd(e){B.H=qn;var t=Re!==null&&Re.next!==null;if(sa=0,Qe=Re=me=null,Ki=!1,Un=0,Bs=null,t)throw Error(l(300));e===null||Xe||(e=e.dependencies,e!==null&&zi(e)&&(Xe=!0))}function yd(e,t,a,s){me=e;var u=0;do{if(qs&&(Bs=null),Un=0,qs=!1,25<=u)throw Error(l(301));if(u+=1,Qe=Re=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}B.H=tf,c=t(a,s)}while(qs);return c}function Gg(){var e=B.H,t=e.useState()[0];return t=typeof t.then=="function"?zn(t):t,e=e.useState()[0],(Re!==null?Re.memoizedState:null)!==e&&(me.flags|=1024),t}function Pr(){var e=Yi!==0;return Yi=0,e}function Ir(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Wr(e){if(Ki){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ki=!1}sa=0,Qe=Re=me=null,qs=!1,Un=Yi=0,Bs=null}function ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?me.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Ke(){if(Re===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Qe===null?me.memoizedState:Qe.next;if(t!==null)Qe=t,Re=e;else{if(e===null)throw me.alternate===null?Error(l(467)):Error(l(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Qe===null?me.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Qi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zn(e){var t=Un;return Un+=1,Bs===null&&(Bs=[]),e=od(Bs,e,t),t=me,(Qe===null?t.memoizedState:Qe.next)===null&&(t=t.alternate,B.H=t===null||t.memoizedState===null?ef:cu),e}function Xi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zn(e);if(e.$$typeof===z)return at(e)}throw Error(l(438,String(e)))}function Fr(e){var t=null,a=me.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=me.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Qi(),me.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=J;return t.index++,a}function na(e,t){return typeof t=="function"?t(e):t}function Ji(e){var t=Ke();return eu(t,Re,e)}function eu(e,t,a){var s=e.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=a;var u=e.baseQueue,c=s.pending;if(c!==null){if(u!==null){var m=u.next;u.next=c.next,c.next=m}t.baseQueue=u=c,s.pending=null}if(c=e.baseState,u===null)e.memoizedState=c;else{t=u.next;var b=m=null,j=null,R=t,H=!1;do{var G=R.lane&-536870913;if(G!==R.lane?(xe&G)===G:(sa&G)===G){var C=R.revertLane;if(C===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),G===Cs&&(H=!0);else if((sa&C)===C){R=R.next,C===Cs&&(H=!0);continue}else G={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},j===null?(b=j=G,m=c):j=j.next=G,me.lanes|=C,Aa|=C;G=R.action,ns&&a(c,G),c=R.hasEagerState?R.eagerState:a(c,G)}else C={lane:G,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},j===null?(b=j=C,m=c):j=j.next=C,me.lanes|=G,Aa|=G;R=R.next}while(R!==null&&R!==t);if(j===null?m=c:j.next=b,!xt(c,e.memoizedState)&&(Xe=!0,H&&(a=Ds,a!==null)))throw a;e.memoizedState=c,e.baseState=m,e.baseQueue=j,s.lastRenderedState=c}return u===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function tu(e){var t=Ke(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var s=a.dispatch,u=a.pending,c=t.memoizedState;if(u!==null){a.pending=null;var m=u=u.next;do c=e(c,m.action),m=m.next;while(m!==u);xt(c,t.memoizedState)||(Xe=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,s]}function xd(e,t,a){var s=me,u=Ke(),c=we;if(c){if(a===void 0)throw Error(l(407));a=a()}else a=t();var m=!xt((Re||u).memoizedState,a);if(m&&(u.memoizedState=a,Xe=!0),u=u.queue,nu(jd.bind(null,s,u,e),[e]),u.getSnapshot!==t||m||Qe!==null&&Qe.memoizedState.tag&1){if(s.flags|=2048,Ls(9,{destroy:void 0},wd.bind(null,s,u,a,t),null),Ue===null)throw Error(l(349));c||(sa&127)!==0||_d(s,t,a)}return a}function _d(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=me.updateQueue,t===null?(t=Qi(),me.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function wd(e,t,a,s){t.value=a,t.getSnapshot=s,Sd(t)&&Nd(e)}function jd(e,t,a){return a(function(){Sd(t)&&Nd(e)})}function Sd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!xt(e,a)}catch{return!0}}function Nd(e){var t=Za(e,2);t!==null&&pt(t,e,2)}function au(e){var t=ot();if(typeof e=="function"){var a=e;if(e=a(),ns){ga(!0);try{a()}finally{ga(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:e},t}function Ed(e,t,a,s){return e.baseState=a,eu(e,Re,typeof s=="function"?s:na)}function Kg(e,t,a,s,u){if(Ii(e))throw Error(l(485));if(e=t.action,e!==null){var c={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){c.listeners.push(m)}};B.T!==null?a(!0):c.isTransition=!1,s(c),a=t.pending,a===null?(c.next=t.pending=c,Td(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Td(e,t){var a=t.action,s=t.payload,u=e.state;if(t.isTransition){var c=B.T,m={};B.T=m;try{var b=a(u,s),j=B.S;j!==null&&j(m,b),Od(e,t,b)}catch(R){su(e,t,R)}finally{c!==null&&m.types!==null&&(c.types=m.types),B.T=c}}else try{c=a(u,s),Od(e,t,c)}catch(R){su(e,t,R)}}function Od(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Ad(e,t,s)},function(s){return su(e,t,s)}):Ad(e,t,a)}function Ad(e,t,a){t.status="fulfilled",t.value=a,kd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Td(e,a)))}function su(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,kd(t),t=t.next;while(t!==s)}e.action=null}function kd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Rd(e,t){return t}function Cd(e,t){if(we){var a=Ue.formState;if(a!==null){e:{var s=me;if(we){if(Me){t:{for(var u=Me,c=zt;u.nodeType!==8;){if(!c){u=null;break t}if(u=qt(u.nextSibling),u===null){u=null;break t}}c=u.data,u=c==="F!"||c==="F"?u:null}if(u){Me=qt(u.nextSibling),s=u.data==="F!";break e}}xa(s)}s=!1}s&&(t=a[0])}}return a=ot(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rd,lastRenderedState:t},a.queue=s,a=Id.bind(null,me,s),s.dispatch=a,s=au(!1),c=ou.bind(null,me,!1,s.queue),s=ot(),u={state:t,dispatch:null,action:e,pending:null},s.queue=u,a=Kg.bind(null,me,u,c,a),u.dispatch=a,s.memoizedState=e,[t,a,!1]}function Dd(e){var t=Ke();return Ud(t,Re,e)}function Ud(e,t,a){if(t=eu(e,t,Rd)[0],e=Ji(na)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=zn(t)}catch(m){throw m===Us?Bi:m}else s=t;t=Ke();var u=t.queue,c=u.dispatch;return a!==t.memoizedState&&(me.flags|=2048,Ls(9,{destroy:void 0},Yg.bind(null,u,a),null)),[s,c,e]}function Yg(e,t){e.action=t}function zd(e){var t=Ke(),a=Re;if(a!==null)return Ud(t,a,e);Ke(),t=t.memoizedState,a=Ke();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Ls(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=me.updateQueue,t===null&&(t=Qi(),me.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Md(){return Ke().memoizedState}function Zi(e,t,a,s){var u=ot();me.flags|=e,u.memoizedState=Ls(1|t,{destroy:void 0},a,s===void 0?null:s)}function Pi(e,t,a,s){var u=Ke();s=s===void 0?null:s;var c=u.memoizedState.inst;Re!==null&&s!==null&&Jr(s,Re.memoizedState.deps)?u.memoizedState=Ls(t,c,a,s):(me.flags|=e,u.memoizedState=Ls(1|t,c,a,s))}function qd(e,t){Zi(8390656,8,e,t)}function nu(e,t){Pi(2048,8,e,t)}function Qg(e){me.flags|=4;var t=me.updateQueue;if(t===null)t=Qi(),me.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Bd(e){var t=Ke().memoizedState;return Qg({ref:t,nextImpl:e}),function(){if((Ee&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Ld(e,t){return Pi(4,2,e,t)}function Hd(e,t){return Pi(4,4,e,t)}function $d(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vd(e,t,a){a=a!=null?a.concat([e]):null,Pi(4,4,$d.bind(null,t,e),a)}function iu(){}function Gd(e,t){var a=Ke();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&Jr(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Kd(e,t){var a=Ke();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&Jr(t,s[1]))return s[0];if(s=e(),ns){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[s,t],s}function lu(e,t,a){return a===void 0||(sa&1073741824)!==0&&(xe&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Qf(),me.lanes|=e,Aa|=e,a)}function Yd(e,t,a,s){return xt(a,t)?a:Ms.current!==null?(e=lu(e,a,s),xt(e,t)||(Xe=!0),e):(sa&42)===0||(sa&1073741824)!==0&&(xe&261930)===0?(Xe=!0,e.memoizedState=a):(e=Qf(),me.lanes|=e,Aa|=e,t)}function Qd(e,t,a,s,u){var c=P.p;P.p=c!==0&&8>c?c:8;var m=B.T,b={};B.T=b,ou(e,!1,t,a);try{var j=u(),R=B.S;if(R!==null&&R(b,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var H=$g(j,s);Mn(e,t,H,Et(e))}else Mn(e,t,s,Et(e))}catch(G){Mn(e,t,{then:function(){},status:"rejected",reason:G},Et())}finally{P.p=c,m!==null&&b.types!==null&&(m.types=b.types),B.T=m}}function Xg(){}function ru(e,t,a,s){if(e.tag!==5)throw Error(l(476));var u=Xd(e).queue;Qd(e,u,t,ce,a===null?Xg:function(){return Jd(e),a(s)})}function Xd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:ce},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Jd(e){var t=Xd(e);t.next===null&&(t=e.alternate.memoizedState),Mn(e,t.next.queue,{},Et())}function uu(){return at(Fn)}function Zd(){return Ke().memoizedState}function Pd(){return Ke().memoizedState}function Jg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Et();e=ja(a);var s=Sa(t,e,a);s!==null&&(pt(s,t,a),Rn(s,t,a)),t={cache:qr()},e.payload=t;return}t=t.return}}function Zg(e,t,a){var s=Et();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ii(e)?Wd(t,a):(a=Er(e,t,a,s),a!==null&&(pt(a,e,s),Fd(a,t,s)))}function Id(e,t,a){var s=Et();Mn(e,t,a,s)}function Mn(e,t,a,s){var u={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ii(e))Wd(t,u);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var m=t.lastRenderedState,b=c(m,a);if(u.hasEagerState=!0,u.eagerState=b,xt(b,m))return Ri(e,t,u,0),Ue===null&&ki(),!1}catch{}finally{}if(a=Er(e,t,u,s),a!==null)return pt(a,e,s),Fd(a,t,s),!0}return!1}function ou(e,t,a,s){if(s={lane:2,revertLane:$u(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ii(e)){if(t)throw Error(l(479))}else t=Er(e,a,s,2),t!==null&&pt(t,e,2)}function Ii(e){var t=e.alternate;return e===me||t!==null&&t===me}function Wd(e,t){qs=Ki=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Fd(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,nc(e,a)}}var qn={readContext:at,use:Xi,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};qn.useEffectEvent=He;var ef={readContext:at,use:Xi,useCallback:function(e,t){return ot().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:qd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Zi(4194308,4,$d.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Zi(4194308,4,e,t)},useInsertionEffect:function(e,t){Zi(4,2,e,t)},useMemo:function(e,t){var a=ot();t=t===void 0?null:t;var s=e();if(ns){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=ot();if(a!==void 0){var u=a(t);if(ns){ga(!0);try{a(t)}finally{ga(!1)}}}else u=t;return s.memoizedState=s.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},s.queue=e,e=e.dispatch=Zg.bind(null,me,e),[s.memoizedState,e]},useRef:function(e){var t=ot();return e={current:e},t.memoizedState=e},useState:function(e){e=au(e);var t=e.queue,a=Id.bind(null,me,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:iu,useDeferredValue:function(e,t){var a=ot();return lu(a,e,t)},useTransition:function(){var e=au(!1);return e=Qd.bind(null,me,e.queue,!0,!1),ot().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=me,u=ot();if(we){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),Ue===null)throw Error(l(349));(xe&127)!==0||_d(s,t,a)}u.memoizedState=a;var c={value:a,getSnapshot:t};return u.queue=c,qd(jd.bind(null,s,c,e),[e]),s.flags|=2048,Ls(9,{destroy:void 0},wd.bind(null,s,c,a,t),null),a},useId:function(){var e=ot(),t=Ue.identifierPrefix;if(we){var a=Xt,s=Qt;a=(s&~(1<<32-yt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Yi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Vg++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:uu,useFormState:Cd,useActionState:Cd,useOptimistic:function(e){var t=ot();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=ou.bind(null,me,!0,a),a.dispatch=t,[e,t]},useMemoCache:Fr,useCacheRefresh:function(){return ot().memoizedState=Jg.bind(null,me)},useEffectEvent:function(e){var t=ot(),a={impl:e};return t.memoizedState=a,function(){if((Ee&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},cu={readContext:at,use:Xi,useCallback:Gd,useContext:at,useEffect:nu,useImperativeHandle:Vd,useInsertionEffect:Ld,useLayoutEffect:Hd,useMemo:Kd,useReducer:Ji,useRef:Md,useState:function(){return Ji(na)},useDebugValue:iu,useDeferredValue:function(e,t){var a=Ke();return Yd(a,Re.memoizedState,e,t)},useTransition:function(){var e=Ji(na)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:zn(e),t]},useSyncExternalStore:xd,useId:Zd,useHostTransitionStatus:uu,useFormState:Dd,useActionState:Dd,useOptimistic:function(e,t){var a=Ke();return Ed(a,Re,e,t)},useMemoCache:Fr,useCacheRefresh:Pd};cu.useEffectEvent=Bd;var tf={readContext:at,use:Xi,useCallback:Gd,useContext:at,useEffect:nu,useImperativeHandle:Vd,useInsertionEffect:Ld,useLayoutEffect:Hd,useMemo:Kd,useReducer:tu,useRef:Md,useState:function(){return tu(na)},useDebugValue:iu,useDeferredValue:function(e,t){var a=Ke();return Re===null?lu(a,e,t):Yd(a,Re.memoizedState,e,t)},useTransition:function(){var e=tu(na)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:zn(e),t]},useSyncExternalStore:xd,useId:Zd,useHostTransitionStatus:uu,useFormState:zd,useActionState:zd,useOptimistic:function(e,t){var a=Ke();return Re!==null?Ed(a,Re,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Fr,useCacheRefresh:Pd};tf.useEffectEvent=Bd;function du(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var fu={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Et(),u=ja(s);u.payload=t,a!=null&&(u.callback=a),t=Sa(e,u,s),t!==null&&(pt(t,e,s),Rn(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Et(),u=ja(s);u.tag=1,u.payload=t,a!=null&&(u.callback=a),t=Sa(e,u,s),t!==null&&(pt(t,e,s),Rn(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Et(),s=ja(a);s.tag=2,t!=null&&(s.callback=t),t=Sa(e,s,a),t!==null&&(pt(t,e,a),Rn(t,e,a))}};function af(e,t,a,s,u,c,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,m):t.prototype&&t.prototype.isPureReactComponent?!jn(a,s)||!jn(u,c):!0}function sf(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&fu.enqueueReplaceState(t,t.state,null)}function is(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function nf(e){Ai(e)}function lf(e){console.error(e)}function rf(e){Ai(e)}function Wi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function uf(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function hu(e,t,a){return a=ja(a),a.tag=3,a.payload={element:null},a.callback=function(){Wi(e,t)},a}function of(e){return e=ja(e),e.tag=3,e}function cf(e,t,a,s){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var c=s.value;e.payload=function(){return u(c)},e.callback=function(){uf(t,a,s)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){uf(t,a,s),typeof u!="function"&&(ka===null?ka=new Set([this]):ka.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function Pg(e,t,a,s,u){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Rs(t,a,u,!0),a=wt.current,a!==null){switch(a.tag){case 31:case 13:return Mt===null?cl():a.alternate===null&&$e===0&&($e=3),a.flags&=-257,a.flags|=65536,a.lanes=u,s===Li?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Bu(e,s,u)),!1;case 22:return a.flags|=65536,s===Li?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Bu(e,s,u)),!1}throw Error(l(435,a.tag))}return Bu(e,s,u),cl(),!1}if(we)return t=wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,s!==Cr&&(e=Error(l(422),{cause:s}),En(Ct(e,a)))):(s!==Cr&&(t=Error(l(423),{cause:s}),En(Ct(t,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,s=Ct(s,a),u=hu(e.stateNode,s,u),Gr(e,u),$e!==4&&($e=2)),!1;var c=Error(l(520),{cause:s});if(c=Ct(c,a),Yn===null?Yn=[c]:Yn.push(c),$e!==4&&($e=2),t===null)return!0;s=Ct(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=hu(a.stateNode,s,e),Gr(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(ka===null||!ka.has(c))))return a.flags|=65536,u&=-u,a.lanes|=u,u=of(u),cf(u,e,a,s),Gr(a,u),!1}a=a.return}while(a!==null);return!1}var mu=Error(l(461)),Xe=!1;function st(e,t,a,s){t.child=e===null?hd(t,null,a,s):ss(t,e.child,a,s)}function df(e,t,a,s,u){a=a.render;var c=t.ref;if("ref"in s){var m={};for(var b in s)b!=="ref"&&(m[b]=s[b])}else m=s;return Fa(t),s=Zr(e,t,a,m,c,u),b=Pr(),e!==null&&!Xe?(Ir(e,t,u),ia(e,t,u)):(we&&b&&kr(t),t.flags|=1,st(e,t,s,u),t.child)}function ff(e,t,a,s,u){if(e===null){var c=a.type;return typeof c=="function"&&!Tr(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,hf(e,t,c,s,u)):(e=Di(a.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!wu(e,u)){var m=c.memoizedProps;if(a=a.compare,a=a!==null?a:jn,a(m,s)&&e.ref===t.ref)return ia(e,t,u)}return t.flags|=1,e=Ft(c,s),e.ref=t.ref,e.return=t,t.child=e}function hf(e,t,a,s,u){if(e!==null){var c=e.memoizedProps;if(jn(c,s)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=s=c,wu(e,u))(e.flags&131072)!==0&&(Xe=!0);else return t.lanes=e.lanes,ia(e,t,u)}return gu(e,t,a,s,u)}function mf(e,t,a,s){var u=s.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(s=t.child=e.child,u=0;s!==null;)u=u|s.lanes|s.childLanes,s=s.sibling;s=u&~c}else s=0,t.child=null;return gf(e,t,c,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&qi(t,c!==null?c.cachePool:null),c!==null?pd(t,c):Yr(),vd(t);else return s=t.lanes=536870912,gf(e,t,c!==null?c.baseLanes|a:a,a,s)}else c!==null?(qi(t,c.cachePool),pd(t,c),Ea(),t.memoizedState=null):(e!==null&&qi(t,null),Yr(),Ea());return st(e,t,u,a),t.child}function Bn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gf(e,t,a,s,u){var c=Lr();return c=c===null?null:{parent:Ye._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&qi(t,null),Yr(),vd(t),e!==null&&Rs(e,t,s,!0),t.childLanes=u,null}function Fi(e,t){return t=tl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function pf(e,t,a){return ss(t,e.child,null,a),e=Fi(t,t.pendingProps),e.flags|=2,jt(t),t.memoizedState=null,e}function Ig(e,t,a){var s=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(we){if(s.mode==="hidden")return e=Fi(t,s),t.lanes=536870912,Bn(null,e);if(Xr(t),(e=Me)?(e=Oh(e,zt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Qt,overflow:Xt}:null,retryLane:536870912,hydrationErrors:null},a=Wc(e),a.return=t,t.child=a,tt=t,Me=null)):e=null,e===null)throw xa(t);return t.lanes=536870912,null}return Fi(t,s)}var c=e.memoizedState;if(c!==null){var m=c.dehydrated;if(Xr(t),u)if(t.flags&256)t.flags&=-257,t=pf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Xe||Rs(e,t,a,!1),u=(a&e.childLanes)!==0,Xe||u){if(s=Ue,s!==null&&(m=ic(s,a),m!==0&&m!==c.retryLane))throw c.retryLane=m,Za(e,m),pt(s,e,m),mu;cl(),t=pf(e,t,a)}else e=c.treeContext,Me=qt(m.nextSibling),tt=t,we=!0,ya=null,zt=!1,e!==null&&td(t,e),t=Fi(t,s),t.flags|=4096;return t}return e=Ft(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function el(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function gu(e,t,a,s,u){return Fa(t),a=Zr(e,t,a,s,void 0,u),s=Pr(),e!==null&&!Xe?(Ir(e,t,u),ia(e,t,u)):(we&&s&&kr(t),t.flags|=1,st(e,t,a,u),t.child)}function vf(e,t,a,s,u,c){return Fa(t),t.updateQueue=null,a=yd(t,s,a,u),bd(e),s=Pr(),e!==null&&!Xe?(Ir(e,t,c),ia(e,t,c)):(we&&s&&kr(t),t.flags|=1,st(e,t,a,c),t.child)}function bf(e,t,a,s,u){if(Fa(t),t.stateNode===null){var c=Ts,m=a.contextType;typeof m=="object"&&m!==null&&(c=at(m)),c=new a(s,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=fu,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=s,c.state=t.memoizedState,c.refs={},$r(t),m=a.contextType,c.context=typeof m=="object"&&m!==null?at(m):Ts,c.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(du(t,a,m,s),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(m=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),m!==c.state&&fu.enqueueReplaceState(c,c.state,null),Dn(t,s,c,u),Cn(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){c=t.stateNode;var b=t.memoizedProps,j=is(a,b);c.props=j;var R=c.context,H=a.contextType;m=Ts,typeof H=="object"&&H!==null&&(m=at(H));var G=a.getDerivedStateFromProps;H=typeof G=="function"||typeof c.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,H||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(b||R!==m)&&sf(t,c,s,m),wa=!1;var C=t.memoizedState;c.state=C,Dn(t,s,c,u),Cn(),R=t.memoizedState,b||C!==R||wa?(typeof G=="function"&&(du(t,a,G,s),R=t.memoizedState),(j=wa||af(t,a,j,s,C,R,m))?(H||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=R),c.props=s,c.state=R,c.context=m,s=j):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,Vr(e,t),m=t.memoizedProps,H=is(a,m),c.props=H,G=t.pendingProps,C=c.context,R=a.contextType,j=Ts,typeof R=="object"&&R!==null&&(j=at(R)),b=a.getDerivedStateFromProps,(R=typeof b=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(m!==G||C!==j)&&sf(t,c,s,j),wa=!1,C=t.memoizedState,c.state=C,Dn(t,s,c,u),Cn();var U=t.memoizedState;m!==G||C!==U||wa||e!==null&&e.dependencies!==null&&zi(e.dependencies)?(typeof b=="function"&&(du(t,a,b,s),U=t.memoizedState),(H=wa||af(t,a,H,s,C,U,j)||e!==null&&e.dependencies!==null&&zi(e.dependencies))?(R||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,U,j),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,U,j)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=U),c.props=s,c.state=U,c.context=j,s=H):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),s=!1)}return c=s,el(e,t),s=(t.flags&128)!==0,c||s?(c=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&s?(t.child=ss(t,e.child,null,u),t.child=ss(t,null,a,u)):st(e,t,a,u),t.memoizedState=c.state,e=t.child):e=ia(e,t,u),e}function yf(e,t,a,s){return Ia(),t.flags|=256,st(e,t,a,s),t.child}var pu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vu(e){return{baseLanes:e,cachePool:rd()}}function bu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Nt),e}function xf(e,t,a){var s=t.pendingProps,u=!1,c=(t.flags&128)!==0,m;if((m=c)||(m=e!==null&&e.memoizedState===null?!1:(Ge.current&2)!==0),m&&(u=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(we){if(u?Na(t):Ea(),(e=Me)?(e=Oh(e,zt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Qt,overflow:Xt}:null,retryLane:536870912,hydrationErrors:null},a=Wc(e),a.return=t,t.child=a,tt=t,Me=null)):e=null,e===null)throw xa(t);return eo(e)?t.lanes=32:t.lanes=536870912,null}var b=s.children;return s=s.fallback,u?(Ea(),u=t.mode,b=tl({mode:"hidden",children:b},u),s=Pa(s,u,a,null),b.return=t,s.return=t,b.sibling=s,t.child=b,s=t.child,s.memoizedState=vu(a),s.childLanes=bu(e,m,a),t.memoizedState=pu,Bn(null,s)):(Na(t),yu(t,b))}var j=e.memoizedState;if(j!==null&&(b=j.dehydrated,b!==null)){if(c)t.flags&256?(Na(t),t.flags&=-257,t=xu(e,t,a)):t.memoizedState!==null?(Ea(),t.child=e.child,t.flags|=128,t=null):(Ea(),b=s.fallback,u=t.mode,s=tl({mode:"visible",children:s.children},u),b=Pa(b,u,a,null),b.flags|=2,s.return=t,b.return=t,s.sibling=b,t.child=s,ss(t,e.child,null,a),s=t.child,s.memoizedState=vu(a),s.childLanes=bu(e,m,a),t.memoizedState=pu,t=Bn(null,s));else if(Na(t),eo(b)){if(m=b.nextSibling&&b.nextSibling.dataset,m)var R=m.dgst;m=R,s=Error(l(419)),s.stack="",s.digest=m,En({value:s,source:null,stack:null}),t=xu(e,t,a)}else if(Xe||Rs(e,t,a,!1),m=(a&e.childLanes)!==0,Xe||m){if(m=Ue,m!==null&&(s=ic(m,a),s!==0&&s!==j.retryLane))throw j.retryLane=s,Za(e,s),pt(m,e,s),mu;Fu(b)||cl(),t=xu(e,t,a)}else Fu(b)?(t.flags|=192,t.child=e.child,t=null):(e=j.treeContext,Me=qt(b.nextSibling),tt=t,we=!0,ya=null,zt=!1,e!==null&&td(t,e),t=yu(t,s.children),t.flags|=4096);return t}return u?(Ea(),b=s.fallback,u=t.mode,j=e.child,R=j.sibling,s=Ft(j,{mode:"hidden",children:s.children}),s.subtreeFlags=j.subtreeFlags&65011712,R!==null?b=Ft(R,b):(b=Pa(b,u,a,null),b.flags|=2),b.return=t,s.return=t,s.sibling=b,t.child=s,Bn(null,s),s=t.child,b=e.child.memoizedState,b===null?b=vu(a):(u=b.cachePool,u!==null?(j=Ye._currentValue,u=u.parent!==j?{parent:j,pool:j}:u):u=rd(),b={baseLanes:b.baseLanes|a,cachePool:u}),s.memoizedState=b,s.childLanes=bu(e,m,a),t.memoizedState=pu,Bn(e.child,s)):(Na(t),a=e.child,e=a.sibling,a=Ft(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function yu(e,t){return t=tl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function tl(e,t){return e=_t(22,e,null,t),e.lanes=0,e}function xu(e,t,a){return ss(t,e.child,null,a),e=yu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _f(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),zr(e.return,t,a)}function _u(e,t,a,s,u,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:u,treeForkCount:c}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=a,m.tailMode=u,m.treeForkCount=c)}function wf(e,t,a){var s=t.pendingProps,u=s.revealOrder,c=s.tail;s=s.children;var m=Ge.current,b=(m&2)!==0;if(b?(m=m&1|2,t.flags|=128):m&=1,W(Ge,m),st(e,t,s,a),s=we?Nn:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_f(e,a,t);else if(e.tag===19)_f(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&Gi(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),_u(t,!1,u,a,c,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Gi(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}_u(t,!0,a,null,c,s);break;case"together":_u(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function ia(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Aa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Rs(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=Ft(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Ft(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function wu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&zi(e)))}function Wg(e,t,a){switch(t.tag){case 3:ut(t,t.stateNode.containerInfo),_a(t,Ye,e.memoizedState.cache),Ia();break;case 27:case 5:cn(t);break;case 4:ut(t,t.stateNode.containerInfo);break;case 10:_a(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Xr(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Na(t),t.flags|=128,null):(a&t.child.childLanes)!==0?xf(e,t,a):(Na(t),e=ia(e,t,a),e!==null?e.sibling:null);Na(t);break;case 19:var u=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Rs(e,t,a,!1),s=(a&t.childLanes)!==0),u){if(s)return wf(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),W(Ge,Ge.current),s)break;return null;case 22:return t.lanes=0,mf(e,t,a,t.pendingProps);case 24:_a(t,Ye,e.memoizedState.cache)}return ia(e,t,a)}function jf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Xe=!0;else{if(!wu(e,a)&&(t.flags&128)===0)return Xe=!1,Wg(e,t,a);Xe=(e.flags&131072)!==0}else Xe=!1,we&&(t.flags&1048576)!==0&&ed(t,Nn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=ts(t.elementType),t.type=e,typeof e=="function")Tr(e)?(s=is(e,s),t.tag=1,t=bf(null,t,e,s,a)):(t.tag=0,t=gu(null,t,e,s,a));else{if(e!=null){var u=e.$$typeof;if(u===Q){t.tag=11,t=df(null,t,e,s,a);break e}else if(u===S){t.tag=14,t=ff(null,t,e,s,a);break e}}throw t=I(e)||e,Error(l(306,t,""))}}return t;case 0:return gu(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,u=is(s,t.pendingProps),bf(e,t,s,u,a);case 3:e:{if(ut(t,t.stateNode.containerInfo),e===null)throw Error(l(387));s=t.pendingProps;var c=t.memoizedState;u=c.element,Vr(e,t),Dn(t,s,null,a);var m=t.memoizedState;if(s=m.cache,_a(t,Ye,s),s!==c.cache&&Mr(t,[Ye],a,!0),Cn(),s=m.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=yf(e,t,s,a);break e}else if(s!==u){u=Ct(Error(l(424)),t),En(u),t=yf(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Me=qt(e.firstChild),tt=t,we=!0,ya=null,zt=!0,a=hd(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ia(),s===u){t=ia(e,t,a);break e}st(e,t,s,a)}t=t.child}return t;case 26:return el(e,t),e===null?(a=Uh(t.type,null,t.pendingProps,null))?t.memoizedState=a:we||(a=t.type,e=t.pendingProps,s=vl(ve.current).createElement(a),s[et]=t,s[ct]=e,nt(s,a,e),We(s),t.stateNode=s):t.memoizedState=Uh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return cn(t),e===null&&we&&(s=t.stateNode=Rh(t.type,t.pendingProps,ve.current),tt=t,zt=!0,u=Me,Ua(t.type)?(to=u,Me=qt(s.firstChild)):Me=u),st(e,t,t.pendingProps.children,a),el(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&we&&((u=s=Me)&&(s=Op(s,t.type,t.pendingProps,zt),s!==null?(t.stateNode=s,tt=t,Me=qt(s.firstChild),zt=!1,u=!0):u=!1),u||xa(t)),cn(t),u=t.type,c=t.pendingProps,m=e!==null?e.memoizedProps:null,s=c.children,Pu(u,c)?s=null:m!==null&&Pu(u,m)&&(t.flags|=32),t.memoizedState!==null&&(u=Zr(e,t,Gg,null,null,a),Fn._currentValue=u),el(e,t),st(e,t,s,a),t.child;case 6:return e===null&&we&&((e=a=Me)&&(a=Ap(a,t.pendingProps,zt),a!==null?(t.stateNode=a,tt=t,Me=null,e=!0):e=!1),e||xa(t)),null;case 13:return xf(e,t,a);case 4:return ut(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ss(t,null,s,a):st(e,t,s,a),t.child;case 11:return df(e,t,t.type,t.pendingProps,a);case 7:return st(e,t,t.pendingProps,a),t.child;case 8:return st(e,t,t.pendingProps.children,a),t.child;case 12:return st(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,_a(t,t.type,s.value),st(e,t,s.children,a),t.child;case 9:return u=t.type._context,s=t.pendingProps.children,Fa(t),u=at(u),s=s(u),t.flags|=1,st(e,t,s,a),t.child;case 14:return ff(e,t,t.type,t.pendingProps,a);case 15:return hf(e,t,t.type,t.pendingProps,a);case 19:return wf(e,t,a);case 31:return Ig(e,t,a);case 22:return mf(e,t,a,t.pendingProps);case 24:return Fa(t),s=at(Ye),e===null?(u=Lr(),u===null&&(u=Ue,c=qr(),u.pooledCache=c,c.refCount++,c!==null&&(u.pooledCacheLanes|=a),u=c),t.memoizedState={parent:s,cache:u},$r(t),_a(t,Ye,u)):((e.lanes&a)!==0&&(Vr(e,t),Dn(t,null,null,a),Cn()),u=e.memoizedState,c=t.memoizedState,u.parent!==s?(u={parent:s,cache:s},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),_a(t,Ye,s)):(s=c.cache,_a(t,Ye,s),s!==u.cache&&Mr(t,[Ye],a,!0))),st(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function la(e){e.flags|=4}function ju(e,t,a,s,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Pf())e.flags|=8192;else throw as=Li,Hr}else e.flags&=-16777217}function Sf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lh(t))if(Pf())e.flags|=8192;else throw as=Li,Hr}function al(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ac():536870912,e.lanes|=t,Gs|=t)}function Ln(e,t){if(!we)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,s|=u.subtreeFlags&65011712,s|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function Fg(e,t,a){var s=t.pendingProps;switch(Rr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),aa(Ye),Ve(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ks(t)?la(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dr())),qe(t),null;case 26:var u=t.type,c=t.memoizedState;return e===null?(la(t),c!==null?(qe(t),Sf(t,c)):(qe(t),ju(t,u,null,s,a))):c?c!==e.memoizedState?(la(t),qe(t),Sf(t,c)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&la(t),qe(t),ju(t,u,e,s,a)),null;case 27:if(hi(t),a=ve.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&la(t);else{if(!s){if(t.stateNode===null)throw Error(l(166));return qe(t),null}e=se.current,ks(t)?ad(t):(e=Rh(u,s,a),t.stateNode=e,la(t))}return qe(t),null;case 5:if(hi(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&la(t);else{if(!s){if(t.stateNode===null)throw Error(l(166));return qe(t),null}if(c=se.current,ks(t))ad(t);else{var m=vl(ve.current);switch(c){case 1:c=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:c=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":c=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":c=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":c=m.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?c.multiple=!0:s.size&&(c.size=s.size);break;default:c=typeof s.is=="string"?m.createElement(u,{is:s.is}):m.createElement(u)}}c[et]=t,c[ct]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=c;e:switch(nt(c,u,s),u){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&la(t)}}return qe(t),ju(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&la(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(l(166));if(e=ve.current,ks(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,u=tt,u!==null)switch(u.tag){case 27:case 5:s=u.memoizedProps}e[et]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||xh(e.nodeValue,a)),e||xa(t,!0)}else e=vl(e).createTextNode(s),e[et]=t,t.stateNode=e}return qe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=ks(t),a!==null){if(e===null){if(!s)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[et]=t}else Ia(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else a=Dr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(jt(t),t):(jt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return qe(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=ks(t),s!==null&&s.dehydrated!==null){if(e===null){if(!u)throw Error(l(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[et]=t}else Ia(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),u=!1}else u=Dr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(jt(t),t):(jt(t),null)}return jt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,u=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(u=s.alternate.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==u&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),al(t,t.updateQueue),qe(t),null);case 4:return Ve(),e===null&&Yu(t.stateNode.containerInfo),qe(t),null;case 10:return aa(t.type),qe(t),null;case 19:if(K(Ge),s=t.memoizedState,s===null)return qe(t),null;if(u=(t.flags&128)!==0,c=s.rendering,c===null)if(u)Ln(s,!1);else{if($e!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=Gi(e),c!==null){for(t.flags|=128,Ln(s,!1),e=c.updateQueue,t.updateQueue=e,al(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Ic(a,e),a=a.sibling;return W(Ge,Ge.current&1|2),we&&ea(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&vt()>rl&&(t.flags|=128,u=!0,Ln(s,!1),t.lanes=4194304)}else{if(!u)if(e=Gi(c),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,al(t,e),Ln(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!we)return qe(t),null}else 2*vt()-s.renderingStartTime>rl&&a!==536870912&&(t.flags|=128,u=!0,Ln(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(e=s.last,e!==null?e.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,a=Ge.current,W(Ge,u?a&1|2:a&1),we&&ea(t,s.treeForkCount),e):(qe(t),null);case 22:case 23:return jt(t),Qr(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),a=t.updateQueue,a!==null&&al(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&K(es),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),aa(Ye),qe(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function ep(e,t){switch(Rr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aa(Ye),Ve(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return hi(t),null;case 31:if(t.memoizedState!==null){if(jt(t),t.alternate===null)throw Error(l(340));Ia()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(jt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Ia()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(Ge),null;case 4:return Ve(),null;case 10:return aa(t.type),null;case 22:case 23:return jt(t),Qr(),e!==null&&K(es),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return aa(Ye),null;case 25:return null;default:return null}}function Nf(e,t){switch(Rr(t),t.tag){case 3:aa(Ye),Ve();break;case 26:case 27:case 5:hi(t);break;case 4:Ve();break;case 31:t.memoizedState!==null&&jt(t);break;case 13:jt(t);break;case 19:K(Ge);break;case 10:aa(t.type);break;case 22:case 23:jt(t),Qr(),e!==null&&K(es);break;case 24:aa(Ye)}}function Hn(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var u=s.next;a=u;do{if((a.tag&e)===e){s=void 0;var c=a.create,m=a.inst;s=c(),m.destroy=s}a=a.next}while(a!==u)}}catch(b){ke(t,t.return,b)}}function Ta(e,t,a){try{var s=t.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var c=u.next;s=c;do{if((s.tag&e)===e){var m=s.inst,b=m.destroy;if(b!==void 0){m.destroy=void 0,u=t;var j=a,R=b;try{R()}catch(H){ke(u,j,H)}}}s=s.next}while(s!==c)}}catch(H){ke(t,t.return,H)}}function Ef(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{gd(t,a)}catch(s){ke(e,e.return,s)}}}function Tf(e,t,a){a.props=is(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){ke(e,t,s)}}function $n(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(u){ke(e,t,u)}}function Jt(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(u){ke(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){ke(e,t,u)}else a.current=null}function Of(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(u){ke(e,e.return,u)}}function Su(e,t,a){try{var s=e.stateNode;wp(s,e.type,a,t),s[ct]=t}catch(u){ke(e,e.return,u)}}function Af(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ua(e.type)||e.tag===4}function Nu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Af(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ua(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eu(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=It));else if(s!==4&&(s===27&&Ua(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Eu(e,t,a),e=e.sibling;e!==null;)Eu(e,t,a),e=e.sibling}function sl(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Ua(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(sl(e,t,a),e=e.sibling;e!==null;)sl(e,t,a),e=e.sibling}function kf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);nt(t,s,a),t[et]=e,t[ct]=a}catch(c){ke(e,e.return,c)}}var ra=!1,Je=!1,Tu=!1,Rf=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function tp(e,t){if(e=e.containerInfo,Ju=Sl,e=Vc(e),xr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var u=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var m=0,b=-1,j=-1,R=0,H=0,G=e,C=null;t:for(;;){for(var U;G!==a||u!==0&&G.nodeType!==3||(b=m+u),G!==c||s!==0&&G.nodeType!==3||(j=m+s),G.nodeType===3&&(m+=G.nodeValue.length),(U=G.firstChild)!==null;)C=G,G=U;for(;;){if(G===e)break t;if(C===a&&++R===u&&(b=m),C===c&&++H===s&&(j=m),(U=G.nextSibling)!==null)break;G=C,C=G.parentNode}G=U}a=b===-1||j===-1?null:{start:b,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zu={focusedElem:e,selectionRange:a},Sl=!1,Fe=t;Fe!==null;)if(t=Fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Fe=e;else for(;Fe!==null;){switch(t=Fe,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,u=c.memoizedProps,c=c.memoizedState,s=a.stateNode;try{var ee=is(a.type,u);e=s.getSnapshotBeforeUpdate(ee,c),s.__reactInternalSnapshotBeforeUpdate=e}catch(oe){ke(a,a.return,oe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Wu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Wu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,Fe=e;break}Fe=t.return}}function Cf(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:oa(e,a),s&4&&Hn(5,a);break;case 1:if(oa(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){ke(a,a.return,m)}else{var u=is(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){ke(a,a.return,m)}}s&64&&Ef(a),s&512&&$n(a,a.return);break;case 3:if(oa(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{gd(e,t)}catch(m){ke(a,a.return,m)}}break;case 27:t===null&&s&4&&kf(a);case 26:case 5:oa(e,a),t===null&&s&4&&Of(a),s&512&&$n(a,a.return);break;case 12:oa(e,a);break;case 31:oa(e,a),s&4&&zf(e,a);break;case 13:oa(e,a),s&4&&Mf(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=cp.bind(null,a),kp(e,a))));break;case 22:if(s=a.memoizedState!==null||ra,!s){t=t!==null&&t.memoizedState!==null||Je,u=ra;var c=Je;ra=s,(Je=t)&&!c?ca(e,a,(a.subtreeFlags&8772)!==0):oa(e,a),ra=u,Je=c}break;case 30:break;default:oa(e,a)}}function Df(e){var t=e.alternate;t!==null&&(e.alternate=null,Df(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&sr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Be=null,ft=!1;function ua(e,t,a){for(a=a.child;a!==null;)Uf(e,t,a),a=a.sibling}function Uf(e,t,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(dn,a)}catch{}switch(a.tag){case 26:Je||Jt(a,t),ua(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Je||Jt(a,t);var s=Be,u=ft;Ua(a.type)&&(Be=a.stateNode,ft=!1),ua(e,t,a),Pn(a.stateNode),Be=s,ft=u;break;case 5:Je||Jt(a,t);case 6:if(s=Be,u=ft,Be=null,ua(e,t,a),Be=s,ft=u,Be!==null)if(ft)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(a.stateNode)}catch(c){ke(a,t,c)}else try{Be.removeChild(a.stateNode)}catch(c){ke(a,t,c)}break;case 18:Be!==null&&(ft?(e=Be,Eh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Is(e)):Eh(Be,a.stateNode));break;case 4:s=Be,u=ft,Be=a.stateNode.containerInfo,ft=!0,ua(e,t,a),Be=s,ft=u;break;case 0:case 11:case 14:case 15:Ta(2,a,t),Je||Ta(4,a,t),ua(e,t,a);break;case 1:Je||(Jt(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Tf(a,t,s)),ua(e,t,a);break;case 21:ua(e,t,a);break;case 22:Je=(s=Je)||a.memoizedState!==null,ua(e,t,a),Je=s;break;default:ua(e,t,a)}}function zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Is(e)}catch(a){ke(t,t.return,a)}}}function Mf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Is(e)}catch(a){ke(t,t.return,a)}}function ap(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Rf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Rf),t;default:throw Error(l(435,e.tag))}}function nl(e,t){var a=ap(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var u=dp.bind(null,e,s);s.then(u,u)}})}function ht(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var u=a[s],c=e,m=t,b=m;e:for(;b!==null;){switch(b.tag){case 27:if(Ua(b.type)){Be=b.stateNode,ft=!1;break e}break;case 5:Be=b.stateNode,ft=!1;break e;case 3:case 4:Be=b.stateNode.containerInfo,ft=!0;break e}b=b.return}if(Be===null)throw Error(l(160));Uf(c,m,u),Be=null,ft=!1,c=u.alternate,c!==null&&(c.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)qf(t,e),t=t.sibling}var Ht=null;function qf(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ht(t,e),mt(e),s&4&&(Ta(3,e,e.return),Hn(3,e),Ta(5,e,e.return));break;case 1:ht(t,e),mt(e),s&512&&(Je||a===null||Jt(a,a.return)),s&64&&ra&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var u=Ht;if(ht(t,e),mt(e),s&512&&(Je||a===null||Jt(a,a.return)),s&4){var c=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(s){case"title":c=u.getElementsByTagName("title")[0],(!c||c[mn]||c[et]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=u.createElement(s),u.head.insertBefore(c,u.querySelector("head > title"))),nt(c,s,a),c[et]=e,We(c),s=c;break e;case"link":var m=qh("link","href",u).get(s+(a.href||""));if(m){for(var b=0;b<m.length;b++)if(c=m[b],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(b,1);break t}}c=u.createElement(s),nt(c,s,a),u.head.appendChild(c);break;case"meta":if(m=qh("meta","content",u).get(s+(a.content||""))){for(b=0;b<m.length;b++)if(c=m[b],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(b,1);break t}}c=u.createElement(s),nt(c,s,a),u.head.appendChild(c);break;default:throw Error(l(468,s))}c[et]=e,We(c),s=c}e.stateNode=s}else Bh(u,e.type,e.stateNode);else e.stateNode=Mh(u,s,e.memoizedProps);else c!==s?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,s===null?Bh(u,e.type,e.stateNode):Mh(u,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Su(e,e.memoizedProps,a.memoizedProps)}break;case 27:ht(t,e),mt(e),s&512&&(Je||a===null||Jt(a,a.return)),a!==null&&s&4&&Su(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ht(t,e),mt(e),s&512&&(Je||a===null||Jt(a,a.return)),e.flags&32){u=e.stateNode;try{xs(u,"")}catch(ee){ke(e,e.return,ee)}}s&4&&e.stateNode!=null&&(u=e.memoizedProps,Su(e,u,a!==null?a.memoizedProps:u)),s&1024&&(Tu=!0);break;case 6:if(ht(t,e),mt(e),s&4){if(e.stateNode===null)throw Error(l(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(ee){ke(e,e.return,ee)}}break;case 3:if(xl=null,u=Ht,Ht=bl(t.containerInfo),ht(t,e),Ht=u,mt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Is(t.containerInfo)}catch(ee){ke(e,e.return,ee)}Tu&&(Tu=!1,Bf(e));break;case 4:s=Ht,Ht=bl(e.stateNode.containerInfo),ht(t,e),mt(e),Ht=s;break;case 12:ht(t,e),mt(e);break;case 31:ht(t,e),mt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,nl(e,s)));break;case 13:ht(t,e),mt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ll=vt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,nl(e,s)));break;case 22:u=e.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,R=ra,H=Je;if(ra=R||u,Je=H||j,ht(t,e),Je=H,ra=R,mt(e),s&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(a===null||j||ra||Je||ls(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){j=a=t;try{if(c=j.stateNode,u)m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{b=j.stateNode;var G=j.memoizedProps.style,C=G!=null&&G.hasOwnProperty("display")?G.display:null;b.style.display=C==null||typeof C=="boolean"?"":(""+C).trim()}}catch(ee){ke(j,j.return,ee)}}}else if(t.tag===6){if(a===null){j=t;try{j.stateNode.nodeValue=u?"":j.memoizedProps}catch(ee){ke(j,j.return,ee)}}}else if(t.tag===18){if(a===null){j=t;try{var U=j.stateNode;u?Th(U,!0):Th(j.stateNode,!1)}catch(ee){ke(j,j.return,ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,nl(e,a))));break;case 19:ht(t,e),mt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,nl(e,s)));break;case 30:break;case 21:break;default:ht(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Af(s)){a=s;break}s=s.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var u=a.stateNode,c=Nu(e);sl(e,c,u);break;case 5:var m=a.stateNode;a.flags&32&&(xs(m,""),a.flags&=-33);var b=Nu(e);sl(e,b,m);break;case 3:case 4:var j=a.stateNode.containerInfo,R=Nu(e);Eu(e,R,j);break;default:throw Error(l(161))}}catch(H){ke(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Bf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function oa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Cf(e,t.alternate,t),t=t.sibling}function ls(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ta(4,t,t.return),ls(t);break;case 1:Jt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Tf(t,t.return,a),ls(t);break;case 27:Pn(t.stateNode);case 26:case 5:Jt(t,t.return),ls(t);break;case 22:t.memoizedState===null&&ls(t);break;case 30:ls(t);break;default:ls(t)}e=e.sibling}}function ca(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,u=e,c=t,m=c.flags;switch(c.tag){case 0:case 11:case 15:ca(u,c,a),Hn(4,c);break;case 1:if(ca(u,c,a),s=c,u=s.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(R){ke(s,s.return,R)}if(s=c,u=s.updateQueue,u!==null){var b=s.stateNode;try{var j=u.shared.hiddenCallbacks;if(j!==null)for(u.shared.hiddenCallbacks=null,u=0;u<j.length;u++)md(j[u],b)}catch(R){ke(s,s.return,R)}}a&&m&64&&Ef(c),$n(c,c.return);break;case 27:kf(c);case 26:case 5:ca(u,c,a),a&&s===null&&m&4&&Of(c),$n(c,c.return);break;case 12:ca(u,c,a);break;case 31:ca(u,c,a),a&&m&4&&zf(u,c);break;case 13:ca(u,c,a),a&&m&4&&Mf(u,c);break;case 22:c.memoizedState===null&&ca(u,c,a),$n(c,c.return);break;case 30:break;default:ca(u,c,a)}t=t.sibling}}function Ou(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Tn(a))}function Au(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tn(e))}function $t(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Lf(e,t,a,s),t=t.sibling}function Lf(e,t,a,s){var u=t.flags;switch(t.tag){case 0:case 11:case 15:$t(e,t,a,s),u&2048&&Hn(9,t);break;case 1:$t(e,t,a,s);break;case 3:$t(e,t,a,s),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tn(e)));break;case 12:if(u&2048){$t(e,t,a,s),e=t.stateNode;try{var c=t.memoizedProps,m=c.id,b=c.onPostCommit;typeof b=="function"&&b(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){ke(t,t.return,j)}}else $t(e,t,a,s);break;case 31:$t(e,t,a,s);break;case 13:$t(e,t,a,s);break;case 23:break;case 22:c=t.stateNode,m=t.alternate,t.memoizedState!==null?c._visibility&2?$t(e,t,a,s):Vn(e,t):c._visibility&2?$t(e,t,a,s):(c._visibility|=2,Hs(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),u&2048&&Ou(m,t);break;case 24:$t(e,t,a,s),u&2048&&Au(t.alternate,t);break;default:$t(e,t,a,s)}}function Hs(e,t,a,s,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,m=t,b=a,j=s,R=m.flags;switch(m.tag){case 0:case 11:case 15:Hs(c,m,b,j,u),Hn(8,m);break;case 23:break;case 22:var H=m.stateNode;m.memoizedState!==null?H._visibility&2?Hs(c,m,b,j,u):Vn(c,m):(H._visibility|=2,Hs(c,m,b,j,u)),u&&R&2048&&Ou(m.alternate,m);break;case 24:Hs(c,m,b,j,u),u&&R&2048&&Au(m.alternate,m);break;default:Hs(c,m,b,j,u)}t=t.sibling}}function Vn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,u=s.flags;switch(s.tag){case 22:Vn(a,s),u&2048&&Ou(s.alternate,s);break;case 24:Vn(a,s),u&2048&&Au(s.alternate,s);break;default:Vn(a,s)}t=t.sibling}}var Gn=8192;function $s(e,t,a){if(e.subtreeFlags&Gn)for(e=e.child;e!==null;)Hf(e,t,a),e=e.sibling}function Hf(e,t,a){switch(e.tag){case 26:$s(e,t,a),e.flags&Gn&&e.memoizedState!==null&&Vp(a,Ht,e.memoizedState,e.memoizedProps);break;case 5:$s(e,t,a);break;case 3:case 4:var s=Ht;Ht=bl(e.stateNode.containerInfo),$s(e,t,a),Ht=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Gn,Gn=16777216,$s(e,t,a),Gn=s):$s(e,t,a));break;default:$s(e,t,a)}}function $f(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Kn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Fe=s,Gf(s,e)}$f(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vf(e),e=e.sibling}function Vf(e){switch(e.tag){case 0:case 11:case 15:Kn(e),e.flags&2048&&Ta(9,e,e.return);break;case 3:Kn(e);break;case 12:Kn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,il(e)):Kn(e);break;default:Kn(e)}}function il(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Fe=s,Gf(s,e)}$f(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ta(8,t,t.return),il(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,il(t));break;default:il(t)}e=e.sibling}}function Gf(e,t){for(;Fe!==null;){var a=Fe;switch(a.tag){case 0:case 11:case 15:Ta(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Tn(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Fe=s;else e:for(a=e;Fe!==null;){s=Fe;var u=s.sibling,c=s.return;if(Df(s),s===a){Fe=null;break e}if(u!==null){u.return=c,Fe=u;break e}Fe=c}}}var sp={getCacheForType:function(e){var t=at(Ye),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return at(Ye).controller.signal}},np=typeof WeakMap=="function"?WeakMap:Map,Ee=0,Ue=null,be=null,xe=0,Ae=0,St=null,Oa=!1,Vs=!1,ku=!1,da=0,$e=0,Aa=0,rs=0,Ru=0,Nt=0,Gs=0,Yn=null,gt=null,Cu=!1,ll=0,Kf=0,rl=1/0,ul=null,ka=null,Pe=0,Ra=null,Ks=null,fa=0,Du=0,Uu=null,Yf=null,Qn=0,zu=null;function Et(){return(Ee&2)!==0&&xe!==0?xe&-xe:B.T!==null?$u():lc()}function Qf(){if(Nt===0)if((xe&536870912)===0||we){var e=pi;pi<<=1,(pi&3932160)===0&&(pi=262144),Nt=e}else Nt=536870912;return e=wt.current,e!==null&&(e.flags|=32),Nt}function pt(e,t,a){(e===Ue&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(Ys(e,0),Ca(e,xe,Nt,!1)),hn(e,a),((Ee&2)===0||e!==Ue)&&(e===Ue&&((Ee&2)===0&&(rs|=a),$e===4&&Ca(e,xe,Nt,!1)),Zt(e))}function Xf(e,t,a){if((Ee&6)!==0)throw Error(l(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||fn(e,t),u=s?rp(e,t):qu(e,t,!0),c=s;do{if(u===0){Vs&&!s&&Ca(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!ip(a)){u=qu(e,t,!1),c=!1;continue}if(u===2){if(c=t,e.errorRecoveryDisabledLanes&c)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var b=e;u=Yn;var j=b.current.memoizedState.isDehydrated;if(j&&(Ys(b,m).flags|=256),m=qu(b,m,!1),m!==2){if(ku&&!j){b.errorRecoveryDisabledLanes|=c,rs|=c,u=4;break e}c=gt,gt=u,c!==null&&(gt===null?gt=c:gt.push.apply(gt,c))}u=m}if(c=!1,u!==2)continue}}if(u===1){Ys(e,0),Ca(e,t,0,!0);break}e:{switch(s=e,c=u,c){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:Ca(s,t,Nt,!Oa);break e;case 2:gt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(u=ll+300-vt(),10<u)){if(Ca(s,t,Nt,!Oa),bi(s,0,!0)!==0)break e;fa=t,s.timeoutHandle=Sh(Jf.bind(null,s,a,gt,ul,Cu,t,Nt,rs,Gs,Oa,c,"Throttled",-0,0),u);break e}Jf(s,a,gt,ul,Cu,t,Nt,rs,Gs,Oa,c,null,-0,0)}}break}while(!0);Zt(e)}function Jf(e,t,a,s,u,c,m,b,j,R,H,G,C,U){if(e.timeoutHandle=-1,G=t.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:It},Hf(t,c,G);var ee=(c&62914560)===c?ll-vt():(c&4194048)===c?Kf-vt():0;if(ee=Gp(G,ee),ee!==null){fa=c,e.cancelPendingCommit=ee(ah.bind(null,e,t,c,a,s,u,m,b,j,H,G,null,C,U)),Ca(e,c,m,!R);return}}ah(e,t,c,a,s,u,m,b,j)}function ip(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var u=a[s],c=u.getSnapshot;u=u.value;try{if(!xt(c(),u))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ca(e,t,a,s){t&=~Ru,t&=~rs,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var u=t;0<u;){var c=31-yt(u),m=1<<c;s[c]=-1,u&=~m}a!==0&&sc(e,a,t)}function ol(){return(Ee&6)===0?(Xn(0),!1):!0}function Mu(){if(be!==null){if(Ae===0)var e=be.return;else e=be,ta=Wa=null,Wr(e),zs=null,An=0,e=be;for(;e!==null;)Nf(e.alternate,e),e=e.return;be=null}}function Ys(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Np(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),fa=0,Mu(),Ue=e,be=a=Ft(e.current,null),xe=t,Ae=0,St=null,Oa=!1,Vs=fn(e,t),ku=!1,Gs=Nt=Ru=rs=Aa=$e=0,gt=Yn=null,Cu=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var u=31-yt(s),c=1<<u;t|=e[u],s&=~c}return da=t,ki(),a}function Zf(e,t){me=null,B.H=qn,t===Us||t===Bi?(t=cd(),Ae=3):t===Hr?(t=cd(),Ae=4):Ae=t===mu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,St=t,be===null&&($e=1,Wi(e,Ct(t,e.current)))}function Pf(){var e=wt.current;return e===null?!0:(xe&4194048)===xe?Mt===null:(xe&62914560)===xe||(xe&536870912)!==0?e===Mt:!1}function If(){var e=B.H;return B.H=qn,e===null?qn:e}function Wf(){var e=B.A;return B.A=sp,e}function cl(){$e=4,Oa||(xe&4194048)!==xe&&wt.current!==null||(Vs=!0),(Aa&134217727)===0&&(rs&134217727)===0||Ue===null||Ca(Ue,xe,Nt,!1)}function qu(e,t,a){var s=Ee;Ee|=2;var u=If(),c=Wf();(Ue!==e||xe!==t)&&(ul=null,Ys(e,t)),t=!1;var m=$e;e:do try{if(Ae!==0&&be!==null){var b=be,j=St;switch(Ae){case 8:Mu(),m=6;break e;case 3:case 2:case 9:case 6:wt.current===null&&(t=!0);var R=Ae;if(Ae=0,St=null,Qs(e,b,j,R),a&&Vs){m=0;break e}break;default:R=Ae,Ae=0,St=null,Qs(e,b,j,R)}}lp(),m=$e;break}catch(H){Zf(e,H)}while(!0);return t&&e.shellSuspendCounter++,ta=Wa=null,Ee=s,B.H=u,B.A=c,be===null&&(Ue=null,xe=0,ki()),m}function lp(){for(;be!==null;)Ff(be)}function rp(e,t){var a=Ee;Ee|=2;var s=If(),u=Wf();Ue!==e||xe!==t?(ul=null,rl=vt()+500,Ys(e,t)):Vs=fn(e,t);e:do try{if(Ae!==0&&be!==null){t=be;var c=St;t:switch(Ae){case 1:Ae=0,St=null,Qs(e,t,c,1);break;case 2:case 9:if(ud(c)){Ae=0,St=null,eh(t);break}t=function(){Ae!==2&&Ae!==9||Ue!==e||(Ae=7),Zt(e)},c.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:ud(c)?(Ae=0,St=null,eh(t)):(Ae=0,St=null,Qs(e,t,c,7));break;case 5:var m=null;switch(be.tag){case 26:m=be.memoizedState;case 5:case 27:var b=be;if(m?Lh(m):b.stateNode.complete){Ae=0,St=null;var j=b.sibling;if(j!==null)be=j;else{var R=b.return;R!==null?(be=R,dl(R)):be=null}break t}}Ae=0,St=null,Qs(e,t,c,5);break;case 6:Ae=0,St=null,Qs(e,t,c,6);break;case 8:Mu(),$e=6;break e;default:throw Error(l(462))}}up();break}catch(H){Zf(e,H)}while(!0);return ta=Wa=null,B.H=s,B.A=u,Ee=a,be!==null?0:(Ue=null,xe=0,ki(),$e)}function up(){for(;be!==null&&!R0();)Ff(be)}function Ff(e){var t=jf(e.alternate,e,da);e.memoizedProps=e.pendingProps,t===null?dl(e):be=t}function eh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=vf(a,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=vf(a,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:Wr(t);default:Nf(a,t),t=be=Ic(t,da),t=jf(a,t,da)}e.memoizedProps=e.pendingProps,t===null?dl(e):be=t}function Qs(e,t,a,s){ta=Wa=null,Wr(t),zs=null,An=0;var u=t.return;try{if(Pg(e,u,t,a,xe)){$e=1,Wi(e,Ct(a,e.current)),be=null;return}}catch(c){if(u!==null)throw be=u,c;$e=1,Wi(e,Ct(a,e.current)),be=null;return}t.flags&32768?(we||s===1?e=!0:Vs||(xe&536870912)!==0?e=!1:(Oa=e=!0,(s===2||s===9||s===3||s===6)&&(s=wt.current,s!==null&&s.tag===13&&(s.flags|=16384))),th(t,e)):dl(t)}function dl(e){var t=e;do{if((t.flags&32768)!==0){th(t,Oa);return}e=t.return;var a=Fg(t.alternate,t,da);if(a!==null){be=a;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);$e===0&&($e=5)}function th(e,t){do{var a=ep(e.alternate,e);if(a!==null){a.flags&=32767,be=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){be=e;return}be=e=a}while(e!==null);$e=6,be=null}function ah(e,t,a,s,u,c,m,b,j){e.cancelPendingCommit=null;do fl();while(Pe!==0);if((Ee&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(c=t.lanes|t.childLanes,c|=Nr,$0(e,a,c,m,b,j),e===Ue&&(be=Ue=null,xe=0),Ks=t,Ra=e,fa=a,Du=c,Uu=u,Yf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fp(mi,function(){return rh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=B.T,B.T=null,u=P.p,P.p=2,m=Ee,Ee|=4;try{tp(e,t,a)}finally{Ee=m,P.p=u,B.T=s}}Pe=1,sh(),nh(),ih()}}function sh(){if(Pe===1){Pe=0;var e=Ra,t=Ks,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var s=P.p;P.p=2;var u=Ee;Ee|=4;try{qf(t,e);var c=Zu,m=Vc(e.containerInfo),b=c.focusedElem,j=c.selectionRange;if(m!==b&&b&&b.ownerDocument&&$c(b.ownerDocument.documentElement,b)){if(j!==null&&xr(b)){var R=j.start,H=j.end;if(H===void 0&&(H=R),"selectionStart"in b)b.selectionStart=R,b.selectionEnd=Math.min(H,b.value.length);else{var G=b.ownerDocument||document,C=G&&G.defaultView||window;if(C.getSelection){var U=C.getSelection(),ee=b.textContent.length,oe=Math.min(j.start,ee),De=j.end===void 0?oe:Math.min(j.end,ee);!U.extend&&oe>De&&(m=De,De=oe,oe=m);var T=Hc(b,oe),E=Hc(b,De);if(T&&E&&(U.rangeCount!==1||U.anchorNode!==T.node||U.anchorOffset!==T.offset||U.focusNode!==E.node||U.focusOffset!==E.offset)){var k=G.createRange();k.setStart(T.node,T.offset),U.removeAllRanges(),oe>De?(U.addRange(k),U.extend(E.node,E.offset)):(k.setEnd(E.node,E.offset),U.addRange(k))}}}}for(G=[],U=b;U=U.parentNode;)U.nodeType===1&&G.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<G.length;b++){var $=G[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Sl=!!Ju,Zu=Ju=null}finally{Ee=u,P.p=s,B.T=a}}e.current=t,Pe=2}}function nh(){if(Pe===2){Pe=0;var e=Ra,t=Ks,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var s=P.p;P.p=2;var u=Ee;Ee|=4;try{Cf(e,t.alternate,t)}finally{Ee=u,P.p=s,B.T=a}}Pe=3}}function ih(){if(Pe===4||Pe===3){Pe=0,C0();var e=Ra,t=Ks,a=fa,s=Yf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Pe=5:(Pe=0,Ks=Ra=null,lh(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(ka=null),tr(a),t=t.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(dn,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=B.T,u=P.p,P.p=2,B.T=null;try{for(var c=e.onRecoverableError,m=0;m<s.length;m++){var b=s[m];c(b.value,{componentStack:b.stack})}}finally{B.T=t,P.p=u}}(fa&3)!==0&&fl(),Zt(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===zu?Qn++:(Qn=0,zu=e):Qn=0,Xn(0)}}function lh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tn(t)))}function fl(){return sh(),nh(),ih(),rh()}function rh(){if(Pe!==5)return!1;var e=Ra,t=Du;Du=0;var a=tr(fa),s=B.T,u=P.p;try{P.p=32>a?32:a,B.T=null,a=Uu,Uu=null;var c=Ra,m=fa;if(Pe=0,Ks=Ra=null,fa=0,(Ee&6)!==0)throw Error(l(331));var b=Ee;if(Ee|=4,Vf(c.current),Lf(c,c.current,m,a),Ee=b,Xn(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(dn,c)}catch{}return!0}finally{P.p=u,B.T=s,lh(e,t)}}function uh(e,t,a){t=Ct(a,t),t=hu(e.stateNode,t,2),e=Sa(e,t,2),e!==null&&(hn(e,2),Zt(e))}function ke(e,t,a){if(e.tag===3)uh(e,e,a);else for(;t!==null;){if(t.tag===3){uh(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ka===null||!ka.has(s))){e=Ct(a,e),a=of(2),s=Sa(t,a,2),s!==null&&(cf(a,s,t,e),hn(s,2),Zt(s));break}}t=t.return}}function Bu(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new np;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(a)||(ku=!0,u.add(a),e=op.bind(null,e,t,a),t.then(e,e))}function op(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ue===e&&(xe&a)===a&&($e===4||$e===3&&(xe&62914560)===xe&&300>vt()-ll?(Ee&2)===0&&Ys(e,0):Ru|=a,Gs===xe&&(Gs=0)),Zt(e)}function oh(e,t){t===0&&(t=ac()),e=Za(e,t),e!==null&&(hn(e,t),Zt(e))}function cp(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),oh(e,a)}function dp(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(l(314))}s!==null&&s.delete(t),oh(e,a)}function fp(e,t){return Il(e,t)}var hl=null,Xs=null,Lu=!1,ml=!1,Hu=!1,Da=0;function Zt(e){e!==Xs&&e.next===null&&(Xs===null?hl=Xs=e:Xs=Xs.next=e),ml=!0,Lu||(Lu=!0,mp())}function Xn(e,t){if(!Hu&&ml){Hu=!0;do for(var a=!1,s=hl;s!==null;){if(e!==0){var u=s.pendingLanes;if(u===0)var c=0;else{var m=s.suspendedLanes,b=s.pingedLanes;c=(1<<31-yt(42|e)+1)-1,c&=u&~(m&~b),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,hh(s,c))}else c=xe,c=bi(s,s===Ue?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(c&3)===0||fn(s,c)||(a=!0,hh(s,c));s=s.next}while(a);Hu=!1}}function hp(){ch()}function ch(){ml=Lu=!1;var e=0;Da!==0&&Sp()&&(e=Da);for(var t=vt(),a=null,s=hl;s!==null;){var u=s.next,c=dh(s,t);c===0?(s.next=null,a===null?hl=u:a.next=u,u===null&&(Xs=a)):(a=s,(e!==0||(c&3)!==0)&&(ml=!0)),s=u}Pe!==0&&Pe!==5||Xn(e),Da!==0&&(Da=0)}function dh(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var m=31-yt(c),b=1<<m,j=u[m];j===-1?((b&a)===0||(b&s)!==0)&&(u[m]=H0(b,t)):j<=t&&(e.expiredLanes|=b),c&=~b}if(t=Ue,a=xe,a=bi(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Wl(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||fn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Wl(s),tr(a)){case 2:case 8:a=ec;break;case 32:a=mi;break;case 268435456:a=tc;break;default:a=mi}return s=fh.bind(null,e),a=Il(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Wl(s),e.callbackPriority=2,e.callbackNode=null,2}function fh(e,t){if(Pe!==0&&Pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(fl()&&e.callbackNode!==a)return null;var s=xe;return s=bi(e,e===Ue?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Xf(e,s,t),dh(e,vt()),e.callbackNode!=null&&e.callbackNode===a?fh.bind(null,e):null)}function hh(e,t){if(fl())return null;Xf(e,t,!0)}function mp(){Ep(function(){(Ee&6)!==0?Il(Fo,hp):ch()})}function $u(){if(Da===0){var e=Cs;e===0&&(e=gi,gi<<=1,(gi&261888)===0&&(gi=256)),Da=e}return Da}function mh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:wi(""+e)}function gh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function gp(e,t,a,s,u){if(t==="submit"&&a&&a.stateNode===u){var c=mh((u[ct]||null).action),m=s.submitter;m&&(t=(t=m[ct]||null)?mh(t.formAction):m.getAttribute("formAction"),t!==null&&(c=t,m=null));var b=new Ei("action","action",null,s,u);e.push({event:b,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Da!==0){var j=m?gh(u,m):new FormData(u);ru(a,{pending:!0,data:j,method:u.method,action:c},null,j)}}else typeof c=="function"&&(b.preventDefault(),j=m?gh(u,m):new FormData(u),ru(a,{pending:!0,data:j,method:u.method,action:c},c,j))},currentTarget:u}]})}}for(var Vu=0;Vu<Sr.length;Vu++){var Gu=Sr[Vu],pp=Gu.toLowerCase(),vp=Gu[0].toUpperCase()+Gu.slice(1);Lt(pp,"on"+vp)}Lt(Yc,"onAnimationEnd"),Lt(Qc,"onAnimationIteration"),Lt(Xc,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(Dg,"onTransitionRun"),Lt(Ug,"onTransitionStart"),Lt(zg,"onTransitionCancel"),Lt(Jc,"onTransitionEnd"),bs("onMouseEnter",["mouseout","mouseover"]),bs("onMouseLeave",["mouseout","mouseover"]),bs("onPointerEnter",["pointerout","pointerover"]),bs("onPointerLeave",["pointerout","pointerover"]),Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jn));function ph(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],u=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var m=s.length-1;0<=m;m--){var b=s[m],j=b.instance,R=b.currentTarget;if(b=b.listener,j!==c&&u.isPropagationStopped())break e;c=b,u.currentTarget=R;try{c(u)}catch(H){Ai(H)}u.currentTarget=null,c=j}else for(m=0;m<s.length;m++){if(b=s[m],j=b.instance,R=b.currentTarget,b=b.listener,j!==c&&u.isPropagationStopped())break e;c=b,u.currentTarget=R;try{c(u)}catch(H){Ai(H)}u.currentTarget=null,c=j}}}}function ye(e,t){var a=t[ar];a===void 0&&(a=t[ar]=new Set);var s=e+"__bubble";a.has(s)||(vh(t,e,2,!1),a.add(s))}function Ku(e,t,a){var s=0;t&&(s|=4),vh(a,e,s,t)}var gl="_reactListening"+Math.random().toString(36).slice(2);function Yu(e){if(!e[gl]){e[gl]=!0,oc.forEach(function(a){a!=="selectionchange"&&(bp.has(a)||Ku(a,!1,e),Ku(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gl]||(t[gl]=!0,Ku("selectionchange",!1,t))}}function vh(e,t,a,s){switch(Qh(t)){case 2:var u=Qp;break;case 8:u=Xp;break;default:u=lo}a=u.bind(null,t,a,e),u=void 0,!dr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function Qu(e,t,a,s,u){var c=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var b=s.stateNode.containerInfo;if(b===u)break;if(m===4)for(m=s.return;m!==null;){var j=m.tag;if((j===3||j===4)&&m.stateNode.containerInfo===u)return;m=m.return}for(;b!==null;){if(m=gs(b),m===null)return;if(j=m.tag,j===5||j===6||j===26||j===27){s=c=m;continue e}b=b.parentNode}}s=s.return}_c(function(){var R=c,H=or(a),G=[];e:{var C=Zc.get(e);if(C!==void 0){var U=Ei,ee=e;switch(e){case"keypress":if(Si(a)===0)break e;case"keydown":case"keyup":U=dg;break;case"focusin":ee="focus",U=gr;break;case"focusout":ee="blur",U=gr;break;case"beforeblur":case"afterblur":U=gr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=F0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=mg;break;case Yc:case Qc:case Xc:U=ag;break;case Jc:U=pg;break;case"scroll":case"scrollend":U=I0;break;case"wheel":U=bg;break;case"copy":case"cut":case"paste":U=ng;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Ec;break;case"toggle":case"beforetoggle":U=xg}var oe=(t&4)!==0,De=!oe&&(e==="scroll"||e==="scrollend"),T=oe?C!==null?C+"Capture":null:C;oe=[];for(var E=R,k;E!==null;){var $=E;if(k=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||k===null||T===null||($=pn(E,T),$!=null&&oe.push(Zn(E,$,k))),De)break;E=E.return}0<oe.length&&(C=new U(C,ee,null,a,H),G.push({event:C,listeners:oe}))}}if((t&7)===0){e:{if(C=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",C&&a!==ur&&(ee=a.relatedTarget||a.fromElement)&&(gs(ee)||ee[ms]))break e;if((U||C)&&(C=H.window===H?H:(C=H.ownerDocument)?C.defaultView||C.parentWindow:window,U?(ee=a.relatedTarget||a.toElement,U=R,ee=ee?gs(ee):null,ee!==null&&(De=f(ee),oe=ee.tag,ee!==De||oe!==5&&oe!==27&&oe!==6)&&(ee=null)):(U=null,ee=R),U!==ee)){if(oe=Sc,$="onMouseLeave",T="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(oe=Ec,$="onPointerLeave",T="onPointerEnter",E="pointer"),De=U==null?C:gn(U),k=ee==null?C:gn(ee),C=new oe($,E+"leave",U,a,H),C.target=De,C.relatedTarget=k,$=null,gs(H)===R&&(oe=new oe(T,E+"enter",ee,a,H),oe.target=k,oe.relatedTarget=De,$=oe),De=$,U&&ee)t:{for(oe=yp,T=U,E=ee,k=0,$=T;$;$=oe($))k++;$=0;for(var ue=E;ue;ue=oe(ue))$++;for(;0<k-$;)T=oe(T),k--;for(;0<$-k;)E=oe(E),$--;for(;k--;){if(T===E||E!==null&&T===E.alternate){oe=T;break t}T=oe(T),E=oe(E)}oe=null}else oe=null;U!==null&&bh(G,C,U,oe,!1),ee!==null&&De!==null&&bh(G,De,ee,oe,!0)}}e:{if(C=R?gn(R):window,U=C.nodeName&&C.nodeName.toLowerCase(),U==="select"||U==="input"&&C.type==="file")var je=Uc;else if(Cc(C))if(zc)je=kg;else{je=Og;var ie=Tg}else U=C.nodeName,!U||U.toLowerCase()!=="input"||C.type!=="checkbox"&&C.type!=="radio"?R&&rr(R.elementType)&&(je=Uc):je=Ag;if(je&&(je=je(e,R))){Dc(G,je,a,H);break e}ie&&ie(e,C,R),e==="focusout"&&R&&C.type==="number"&&R.memoizedProps.value!=null&&lr(C,"number",C.value)}switch(ie=R?gn(R):window,e){case"focusin":(Cc(ie)||ie.contentEditable==="true")&&(Ss=ie,_r=R,Sn=null);break;case"focusout":Sn=_r=Ss=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Gc(G,a,H);break;case"selectionchange":if(Cg)break;case"keydown":case"keyup":Gc(G,a,H)}var ge;if(vr)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else js?kc(e,a)&&(_e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Tc&&a.locale!=="ko"&&(js||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&js&&(ge=wc()):(va=H,fr="value"in va?va.value:va.textContent,js=!0)),ie=pl(R,_e),0<ie.length&&(_e=new Nc(_e,e,null,a,H),G.push({event:_e,listeners:ie}),ge?_e.data=ge:(ge=Rc(a),ge!==null&&(_e.data=ge)))),(ge=wg?jg(e,a):Sg(e,a))&&(_e=pl(R,"onBeforeInput"),0<_e.length&&(ie=new Nc("onBeforeInput","beforeinput",null,a,H),G.push({event:ie,listeners:_e}),ie.data=ge)),gp(G,e,R,a,H)}ph(G,t)})}function Zn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function pl(e,t){for(var a=t+"Capture",s=[];e!==null;){var u=e,c=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||c===null||(u=pn(e,a),u!=null&&s.unshift(Zn(e,u,c)),u=pn(e,t),u!=null&&s.push(Zn(e,u,c))),e.tag===3)return s;e=e.return}return[]}function yp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bh(e,t,a,s,u){for(var c=t._reactName,m=[];a!==null&&a!==s;){var b=a,j=b.alternate,R=b.stateNode;if(b=b.tag,j!==null&&j===s)break;b!==5&&b!==26&&b!==27||R===null||(j=R,u?(R=pn(a,c),R!=null&&m.unshift(Zn(a,R,j))):u||(R=pn(a,c),R!=null&&m.push(Zn(a,R,j)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var xp=/\r\n?/g,_p=/\u0000|\uFFFD/g;function yh(e){return(typeof e=="string"?e:""+e).replace(xp,`
`).replace(_p,"")}function xh(e,t){return t=yh(t),yh(e)===t}function Ce(e,t,a,s,u,c){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||xs(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&xs(e,""+s);break;case"className":xi(e,"class",s);break;case"tabIndex":xi(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":xi(e,a,s);break;case"style":yc(e,s,c);break;case"data":if(t!=="object"){xi(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=wi(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Ce(e,t,"name",u.name,u,null),Ce(e,t,"formEncType",u.formEncType,u,null),Ce(e,t,"formMethod",u.formMethod,u,null),Ce(e,t,"formTarget",u.formTarget,u,null)):(Ce(e,t,"encType",u.encType,u,null),Ce(e,t,"method",u.method,u,null),Ce(e,t,"target",u.target,u,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=wi(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=It);break;case"onScroll":s!=null&&ye("scroll",e);break;case"onScrollEnd":s!=null&&ye("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(a=s.__html,a!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=wi(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":ye("beforetoggle",e),ye("toggle",e),yi(e,"popover",s);break;case"xlinkActuate":Pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Pt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Pt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Pt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Pt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":yi(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Z0.get(a)||a,yi(e,a,s))}}function Xu(e,t,a,s,u,c){switch(a){case"style":yc(e,s,c);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(a=s.__html,a!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof s=="string"?xs(e,s):(typeof s=="number"||typeof s=="bigint")&&xs(e,""+s);break;case"onScroll":s!=null&&ye("scroll",e);break;case"onScrollEnd":s!=null&&ye("scrollend",e);break;case"onClick":s!=null&&(e.onclick=It);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),t=a.slice(2,u?a.length-7:void 0),c=e[ct]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,u),typeof s=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,u);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):yi(e,a,s)}}}function nt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",e),ye("load",e);var s=!1,u=!1,c;for(c in a)if(a.hasOwnProperty(c)){var m=a[c];if(m!=null)switch(c){case"src":s=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ce(e,t,c,m,a,null)}}u&&Ce(e,t,"srcSet",a.srcSet,a,null),s&&Ce(e,t,"src",a.src,a,null);return;case"input":ye("invalid",e);var b=c=m=u=null,j=null,R=null;for(s in a)if(a.hasOwnProperty(s)){var H=a[s];if(H!=null)switch(s){case"name":u=H;break;case"type":m=H;break;case"checked":j=H;break;case"defaultChecked":R=H;break;case"value":c=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(l(137,t));break;default:Ce(e,t,s,H,a,null)}}gc(e,c,b,j,R,m,u,!1);return;case"select":ye("invalid",e),s=m=c=null;for(u in a)if(a.hasOwnProperty(u)&&(b=a[u],b!=null))switch(u){case"value":c=b;break;case"defaultValue":m=b;break;case"multiple":s=b;default:Ce(e,t,u,b,a,null)}t=c,a=m,e.multiple=!!s,t!=null?ys(e,!!s,t,!1):a!=null&&ys(e,!!s,a,!0);return;case"textarea":ye("invalid",e),c=u=s=null;for(m in a)if(a.hasOwnProperty(m)&&(b=a[m],b!=null))switch(m){case"value":s=b;break;case"defaultValue":u=b;break;case"children":c=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(l(91));break;default:Ce(e,t,m,b,a,null)}vc(e,s,u,c);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(s=a[j],s!=null))switch(j){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ce(e,t,j,s,a,null)}return;case"dialog":ye("beforetoggle",e),ye("toggle",e),ye("cancel",e),ye("close",e);break;case"iframe":case"object":ye("load",e);break;case"video":case"audio":for(s=0;s<Jn.length;s++)ye(Jn[s],e);break;case"image":ye("error",e),ye("load",e);break;case"details":ye("toggle",e);break;case"embed":case"source":case"link":ye("error",e),ye("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(s=a[R],s!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ce(e,t,R,s,a,null)}return;default:if(rr(t)){for(H in a)a.hasOwnProperty(H)&&(s=a[H],s!==void 0&&Xu(e,t,H,s,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(s=a[b],s!=null&&Ce(e,t,b,s,a,null))}function wp(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,c=null,m=null,b=null,j=null,R=null,H=null;for(U in a){var G=a[U];if(a.hasOwnProperty(U)&&G!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":j=G;default:s.hasOwnProperty(U)||Ce(e,t,U,null,s,G)}}for(var C in s){var U=s[C];if(G=a[C],s.hasOwnProperty(C)&&(U!=null||G!=null))switch(C){case"type":c=U;break;case"name":u=U;break;case"checked":R=U;break;case"defaultChecked":H=U;break;case"value":m=U;break;case"defaultValue":b=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(l(137,t));break;default:U!==G&&Ce(e,t,C,U,s,G)}}ir(e,m,b,j,R,H,c,u);return;case"select":U=m=b=C=null;for(c in a)if(j=a[c],a.hasOwnProperty(c)&&j!=null)switch(c){case"value":break;case"multiple":U=j;default:s.hasOwnProperty(c)||Ce(e,t,c,null,s,j)}for(u in s)if(c=s[u],j=a[u],s.hasOwnProperty(u)&&(c!=null||j!=null))switch(u){case"value":C=c;break;case"defaultValue":b=c;break;case"multiple":m=c;default:c!==j&&Ce(e,t,u,c,s,j)}t=b,a=m,s=U,C!=null?ys(e,!!a,C,!1):!!s!=!!a&&(t!=null?ys(e,!!a,t,!0):ys(e,!!a,a?[]:"",!1));return;case"textarea":U=C=null;for(b in a)if(u=a[b],a.hasOwnProperty(b)&&u!=null&&!s.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ce(e,t,b,null,s,u)}for(m in s)if(u=s[m],c=a[m],s.hasOwnProperty(m)&&(u!=null||c!=null))switch(m){case"value":C=u;break;case"defaultValue":U=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==c&&Ce(e,t,m,u,s,c)}pc(e,C,U);return;case"option":for(var ee in a)if(C=a[ee],a.hasOwnProperty(ee)&&C!=null&&!s.hasOwnProperty(ee))switch(ee){case"selected":e.selected=!1;break;default:Ce(e,t,ee,null,s,C)}for(j in s)if(C=s[j],U=a[j],s.hasOwnProperty(j)&&C!==U&&(C!=null||U!=null))switch(j){case"selected":e.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:Ce(e,t,j,C,s,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in a)C=a[oe],a.hasOwnProperty(oe)&&C!=null&&!s.hasOwnProperty(oe)&&Ce(e,t,oe,null,s,C);for(R in s)if(C=s[R],U=a[R],s.hasOwnProperty(R)&&C!==U&&(C!=null||U!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(C!=null)throw Error(l(137,t));break;default:Ce(e,t,R,C,s,U)}return;default:if(rr(t)){for(var De in a)C=a[De],a.hasOwnProperty(De)&&C!==void 0&&!s.hasOwnProperty(De)&&Xu(e,t,De,void 0,s,C);for(H in s)C=s[H],U=a[H],!s.hasOwnProperty(H)||C===U||C===void 0&&U===void 0||Xu(e,t,H,C,s,U);return}}for(var T in a)C=a[T],a.hasOwnProperty(T)&&C!=null&&!s.hasOwnProperty(T)&&Ce(e,t,T,null,s,C);for(G in s)C=s[G],U=a[G],!s.hasOwnProperty(G)||C===U||C==null&&U==null||Ce(e,t,G,C,s,U)}function _h(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var u=a[s],c=u.transferSize,m=u.initiatorType,b=u.duration;if(c&&b&&_h(m)){for(m=0,b=u.responseEnd,s+=1;s<a.length;s++){var j=a[s],R=j.startTime;if(R>b)break;var H=j.transferSize,G=j.initiatorType;H&&_h(G)&&(j=j.responseEnd,m+=H*(j<b?1:(b-R)/(j-R)))}if(--s,t+=8*(c+m)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ju=null,Zu=null;function vl(e){return e.nodeType===9?e:e.ownerDocument}function wh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Pu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Iu=null;function Sp(){var e=window.event;return e&&e.type==="popstate"?e===Iu?!1:(Iu=e,!0):(Iu=null,!1)}var Sh=typeof setTimeout=="function"?setTimeout:void 0,Np=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,Ep=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(e){return Nh.resolve(null).then(e).catch(Tp)}:Sh;function Tp(e){setTimeout(function(){throw e})}function Ua(e){return e==="head"}function Eh(e,t){var a=t,s=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(u),Is(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")Pn(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Pn(a);for(var c=a.firstChild;c;){var m=c.nextSibling,b=c.nodeName;c[mn]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=m}}else a==="body"&&Pn(e.ownerDocument.body);a=u}while(a);Is(t)}function Th(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function Wu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Wu(a),sr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Op(e,t,a,s){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[mn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=qt(e.nextSibling),e===null)break}return null}function Ap(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=qt(e.nextSibling),e===null))return null;return e}function Oh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=qt(e.nextSibling),e===null))return null;return e}function Fu(e){return e.data==="$?"||e.data==="$~"}function eo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function kp(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var to=null;function Ah(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return qt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Rh(e,t,a){switch(t=vl(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Pn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);sr(e)}var Bt=new Map,Ch=new Set;function bl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ha=P.d;P.d={f:Rp,r:Cp,D:Dp,C:Up,L:zp,m:Mp,X:Bp,S:qp,M:Lp};function Rp(){var e=ha.f(),t=ol();return e||t}function Cp(e){var t=ps(e);t!==null&&t.tag===5&&t.type==="form"?Jd(t):ha.r(e)}var Js=typeof document>"u"?null:document;function Dh(e,t,a){var s=Js;if(s&&typeof t=="string"&&t){var u=kt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Ch.has(u)||(Ch.add(u),e={rel:e,crossOrigin:a,href:t},s.querySelector(u)===null&&(t=s.createElement("link"),nt(t,"link",e),We(t),s.head.appendChild(t)))}}function Dp(e){ha.D(e),Dh("dns-prefetch",e,null)}function Up(e,t){ha.C(e,t),Dh("preconnect",e,t)}function zp(e,t,a){ha.L(e,t,a);var s=Js;if(s&&e&&t){var u='link[rel="preload"][as="'+kt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+kt(a.imageSizes)+'"]')):u+='[href="'+kt(e)+'"]';var c=u;switch(t){case"style":c=Zs(e);break;case"script":c=Ps(e)}Bt.has(c)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Bt.set(c,e),s.querySelector(u)!==null||t==="style"&&s.querySelector(In(c))||t==="script"&&s.querySelector(Wn(c))||(t=s.createElement("link"),nt(t,"link",e),We(t),s.head.appendChild(t)))}}function Mp(e,t){ha.m(e,t);var a=Js;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+kt(s)+'"][href="'+kt(e)+'"]',c=u;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Ps(e)}if(!Bt.has(c)&&(e=w({rel:"modulepreload",href:e},t),Bt.set(c,e),a.querySelector(u)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wn(c)))return}s=a.createElement("link"),nt(s,"link",e),We(s),a.head.appendChild(s)}}}function qp(e,t,a){ha.S(e,t,a);var s=Js;if(s&&e){var u=vs(s).hoistableStyles,c=Zs(e);t=t||"default";var m=u.get(c);if(!m){var b={loading:0,preload:null};if(m=s.querySelector(In(c)))b.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Bt.get(c))&&ao(e,a);var j=m=s.createElement("link");We(j),nt(j,"link",e),j._p=new Promise(function(R,H){j.onload=R,j.onerror=H}),j.addEventListener("load",function(){b.loading|=1}),j.addEventListener("error",function(){b.loading|=2}),b.loading|=4,yl(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:b},u.set(c,m)}}}function Bp(e,t){ha.X(e,t);var a=Js;if(a&&e){var s=vs(a).hoistableScripts,u=Ps(e),c=s.get(u);c||(c=a.querySelector(Wn(u)),c||(e=w({src:e,async:!0},t),(t=Bt.get(u))&&so(e,t),c=a.createElement("script"),We(c),nt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(u,c))}}function Lp(e,t){ha.M(e,t);var a=Js;if(a&&e){var s=vs(a).hoistableScripts,u=Ps(e),c=s.get(u);c||(c=a.querySelector(Wn(u)),c||(e=w({src:e,async:!0,type:"module"},t),(t=Bt.get(u))&&so(e,t),c=a.createElement("script"),We(c),nt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(u,c))}}function Uh(e,t,a,s){var u=(u=ve.current)?bl(u):null;if(!u)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Zs(a.href),a=vs(u).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Zs(a.href);var c=vs(u).hoistableStyles,m=c.get(e);if(m||(u=u.ownerDocument||u,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,m),(c=u.querySelector(In(e)))&&!c._p&&(m.instance=c,m.state.loading=5),Bt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bt.set(e,a),c||Hp(u,e,a,m.state))),t&&s===null)throw Error(l(528,""));return m}if(t&&s!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ps(a),a=vs(u).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Zs(e){return'href="'+kt(e)+'"'}function In(e){return'link[rel="stylesheet"]['+e+"]"}function zh(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Hp(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),nt(t,"link",a),We(t),e.head.appendChild(t))}function Ps(e){return'[src="'+kt(e)+'"]'}function Wn(e){return"script[async]"+e}function Mh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+kt(a.href)+'"]');if(s)return t.instance=s,We(s),s;var u=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),We(s),nt(s,"style",u),yl(s,a.precedence,e),t.instance=s;case"stylesheet":u=Zs(a.href);var c=e.querySelector(In(u));if(c)return t.state.loading|=4,t.instance=c,We(c),c;s=zh(a),(u=Bt.get(u))&&ao(s,u),c=(e.ownerDocument||e).createElement("link"),We(c);var m=c;return m._p=new Promise(function(b,j){m.onload=b,m.onerror=j}),nt(c,"link",s),t.state.loading|=4,yl(c,a.precedence,e),t.instance=c;case"script":return c=Ps(a.src),(u=e.querySelector(Wn(c)))?(t.instance=u,We(u),u):(s=a,(u=Bt.get(c))&&(s=w({},a),so(s,u)),e=e.ownerDocument||e,u=e.createElement("script"),We(u),nt(u,"link",s),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,yl(s,a.precedence,e));return t.instance}function yl(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=s.length?s[s.length-1]:null,c=u,m=0;m<s.length;m++){var b=s[m];if(b.dataset.precedence===t)c=b;else if(c!==u)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function ao(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function so(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var xl=null;function qh(e,t,a){if(xl===null){var s=new Map,u=xl=new Map;u.set(a,s)}else u=xl,s=u.get(a),s||(s=new Map,u.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var c=a[u];if(!(c[mn]||c[et]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var m=c.getAttribute(t)||"";m=e+m;var b=s.get(m);b?b.push(c):s.set(m,[c])}}return s}function Bh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function $p(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Lh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Vp(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Zs(s.href),c=t.querySelector(In(u));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=_l.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,We(c);return}c=t.ownerDocument||t,s=zh(s),(u=Bt.get(u))&&ao(s,u),c=c.createElement("link"),We(c);var m=c;m._p=new Promise(function(b,j){m.onload=b,m.onerror=j}),nt(c,"link",s),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=_l.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var no=0;function Gp(e,t){return e.stylesheets&&e.count===0&&jl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&jl(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&no===0&&(no=62500*jp());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&jl(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>no?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(u)}}:null}function _l(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wl=null;function jl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wl=new Map,t.forEach(Kp,e),wl=null,_l.call(e))}function Kp(e,t){if(!(t.state.loading&4)){var a=wl.get(e);if(a)var s=a.get(null);else{a=new Map,wl.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<u.length;c++){var m=u[c];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),s=m)}s&&a.set(null,s)}u=t.instance,m=u.getAttribute("data-precedence"),c=a.get(m)||s,c===s&&a.set(null,u),a.set(m,u),this.count++,s=_l.bind(this),u.addEventListener("load",s),u.addEventListener("error",s),c?c.parentNode.insertBefore(u,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var Fn={$$typeof:z,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Yp(e,t,a,s,u,c,m,b,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.hiddenUpdates=Fl(null),this.identifierPrefix=s,this.onUncaughtError=u,this.onCaughtError=c,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Hh(e,t,a,s,u,c,m,b,j,R,H,G){return e=new Yp(e,t,a,m,j,R,H,G,b),t=1,c===!0&&(t|=24),c=_t(3,null,null,t),e.current=c,c.stateNode=e,t=qr(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:s,isDehydrated:a,cache:t},$r(c),e}function $h(e){return e?(e=Ts,e):Ts}function Vh(e,t,a,s,u,c){u=$h(u),s.context===null?s.context=u:s.pendingContext=u,s=ja(t),s.payload={element:a},c=c===void 0?null:c,c!==null&&(s.callback=c),a=Sa(e,s,t),a!==null&&(pt(a,e,t),Rn(a,e,t))}function Gh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function io(e,t){Gh(e,t),(e=e.alternate)&&Gh(e,t)}function Kh(e){if(e.tag===13||e.tag===31){var t=Za(e,67108864);t!==null&&pt(t,e,67108864),io(e,67108864)}}function Yh(e){if(e.tag===13||e.tag===31){var t=Et();t=er(t);var a=Za(e,t);a!==null&&pt(a,e,t),io(e,t)}}var Sl=!0;function Qp(e,t,a,s){var u=B.T;B.T=null;var c=P.p;try{P.p=2,lo(e,t,a,s)}finally{P.p=c,B.T=u}}function Xp(e,t,a,s){var u=B.T;B.T=null;var c=P.p;try{P.p=8,lo(e,t,a,s)}finally{P.p=c,B.T=u}}function lo(e,t,a,s){if(Sl){var u=ro(s);if(u===null)Qu(e,t,s,Nl,a),Xh(e,s);else if(Zp(u,e,t,a,s))s.stopPropagation();else if(Xh(e,s),t&4&&-1<Jp.indexOf(e)){for(;u!==null;){var c=ps(u);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var m=Ka(c.pendingLanes);if(m!==0){var b=c;for(b.pendingLanes|=2,b.entangledLanes|=2;m;){var j=1<<31-yt(m);b.entanglements[1]|=j,m&=~j}Zt(c),(Ee&6)===0&&(rl=vt()+500,Xn(0))}}break;case 31:case 13:b=Za(c,2),b!==null&&pt(b,c,2),ol(),io(c,2)}if(c=ro(s),c===null&&Qu(e,t,s,Nl,a),c===u)break;u=c}u!==null&&s.stopPropagation()}else Qu(e,t,s,null,a)}}function ro(e){return e=or(e),uo(e)}var Nl=null;function uo(e){if(Nl=null,e=gs(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=v(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nl=e,null}function Qh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(D0()){case Fo:return 2;case ec:return 8;case mi:case U0:return 32;case tc:return 268435456;default:return 32}default:return 32}}var oo=!1,za=null,Ma=null,qa=null,ei=new Map,ti=new Map,Ba=[],Jp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xh(e,t){switch(e){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(t.pointerId)}}function ai(e,t,a,s,u,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:c,targetContainers:[u]},t!==null&&(t=ps(t),t!==null&&Kh(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Zp(e,t,a,s,u){switch(t){case"focusin":return za=ai(za,e,t,a,s,u),!0;case"dragenter":return Ma=ai(Ma,e,t,a,s,u),!0;case"mouseover":return qa=ai(qa,e,t,a,s,u),!0;case"pointerover":var c=u.pointerId;return ei.set(c,ai(ei.get(c)||null,e,t,a,s,u)),!0;case"gotpointercapture":return c=u.pointerId,ti.set(c,ai(ti.get(c)||null,e,t,a,s,u)),!0}return!1}function Jh(e){var t=gs(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,rc(e.priority,function(){Yh(a)});return}}else if(t===31){if(t=v(a),t!==null){e.blockedOn=t,rc(e.priority,function(){Yh(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function El(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=ro(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);ur=s,a.target.dispatchEvent(s),ur=null}else return t=ps(a),t!==null&&Kh(t),e.blockedOn=a,!1;t.shift()}return!0}function Zh(e,t,a){El(e)&&a.delete(t)}function Pp(){oo=!1,za!==null&&El(za)&&(za=null),Ma!==null&&El(Ma)&&(Ma=null),qa!==null&&El(qa)&&(qa=null),ei.forEach(Zh),ti.forEach(Zh)}function Tl(e,t){e.blockedOn===t&&(e.blockedOn=null,oo||(oo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Pp)))}var Ol=null;function Ph(e){Ol!==e&&(Ol=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Ol===e&&(Ol=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],u=e[t+2];if(typeof s!="function"){if(uo(s||a)===null)continue;break}var c=ps(a);c!==null&&(e.splice(t,3),t-=3,ru(c,{pending:!0,data:u,method:a.method,action:s},s,u))}}))}function Is(e){function t(j){return Tl(j,e)}za!==null&&Tl(za,e),Ma!==null&&Tl(Ma,e),qa!==null&&Tl(qa,e),ei.forEach(t),ti.forEach(t);for(var a=0;a<Ba.length;a++){var s=Ba[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ba.length&&(a=Ba[0],a.blockedOn===null);)Jh(a),a.blockedOn===null&&Ba.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var u=a[s],c=a[s+1],m=u[ct]||null;if(typeof c=="function")m||Ph(a);else if(m){var b=null;if(c&&c.hasAttribute("formAction")){if(u=c,m=c[ct]||null)b=m.formAction;else if(uo(u)!==null)continue}else b=m.action;typeof b=="function"?a[s+1]=b:(a.splice(s,3),s-=3),Ph(a)}}}function Ih(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(m){return u=m})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function co(e){this._internalRoot=e}Al.prototype.render=co.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,s=Et();Vh(a,s,e,t,null,null)},Al.prototype.unmount=co.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vh(e.current,2,null,e,null,null),ol(),t[ms]=null}};function Al(e){this._internalRoot=e}Al.prototype.unstable_scheduleHydration=function(e){if(e){var t=lc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ba.length&&t!==0&&t<Ba[a].priority;a++);Ba.splice(a,0,e),a===0&&Jh(e)}};var Wh=n.version;if(Wh!=="19.2.0")throw Error(l(527,Wh,"19.2.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Ip={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{dn=kl.inject(Ip),bt=kl}catch{}}return ni.createRoot=function(e,t){if(!d(e))throw Error(l(299));var a=!1,s="",u=nf,c=lf,m=rf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Hh(e,1,!1,null,null,a,s,null,u,c,m,Ih),e[ms]=t.current,Yu(e),new co(t)},ni.hydrateRoot=function(e,t,a){if(!d(e))throw Error(l(299));var s=!1,u="",c=nf,m=lf,b=rf,j=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),t=Hh(e,1,!0,t,a??null,s,u,j,c,m,b,Ih),t.context=$h(null),a=t.current,s=Et(),s=er(s),u=ja(s),u.callback=null,Sa(a,u,s),a=s,t.current.lanes=a,hn(t,a),Zt(t),e[ms]=t.current,Yu(e),new Al(t)},ni.version="19.2.0",ni}var um;function ov(){if(um)return go.exports;um=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),go.exports=uv(),go.exports}var cv=ov(),Oo=function(o,n){return Oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])},Oo(o,n)};function Bm(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Oo(o,n);function i(){this.constructor=o}o.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var Hl=function(){return Hl=Object.assign||function(n){for(var i,l=1,d=arguments.length;l<d;l++){i=arguments[l];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(n[f]=i[f])}return n},Hl.apply(this,arguments)};function un(o,n){var i={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&n.indexOf(l)<0&&(i[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(o);d<l.length;d++)n.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(o,l[d])&&(i[l[d]]=o[l[d]]);return i}function Lm(o,n,i,l){var d=arguments.length,f=d<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,i):l,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,n,i,l);else for(var v=o.length-1;v>=0;v--)(h=o[v])&&(f=(d<3?h(f):d>3?h(n,i,f):h(n,i))||f);return d>3&&f&&Object.defineProperty(n,i,f),f}function Hm(o,n){return function(i,l){n(i,l,o)}}function $m(o,n,i,l,d,f){function h(Y){if(Y!==void 0&&typeof Y!="function")throw new TypeError("Function expected");return Y}for(var v=l.kind,p=v==="getter"?"get":v==="setter"?"set":"value",g=!n&&o?l.static?o:o.prototype:null,y=n||(g?Object.getOwnPropertyDescriptor(g,l.name):{}),w,O=!1,_=i.length-1;_>=0;_--){var A={};for(var L in l)A[L]=L==="access"?{}:l[L];for(var L in l.access)A.access[L]=l.access[L];A.addInitializer=function(Y){if(O)throw new TypeError("Cannot add initializers after decoration has completed");f.push(h(Y||null))};var D=(0,i[_])(v==="accessor"?{get:y.get,set:y.set}:y[p],A);if(v==="accessor"){if(D===void 0)continue;if(D===null||typeof D!="object")throw new TypeError("Object expected");(w=h(D.get))&&(y.get=w),(w=h(D.set))&&(y.set=w),(w=h(D.init))&&d.unshift(w)}else(w=h(D))&&(v==="field"?d.unshift(w):y[p]=w)}g&&Object.defineProperty(g,l.name,y),O=!0}function Vm(o,n,i){for(var l=arguments.length>2,d=0;d<n.length;d++)i=l?n[d].call(o,i):n[d].call(o);return l?i:void 0}function Gm(o){return typeof o=="symbol"?o:"".concat(o)}function Km(o,n,i){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:i?"".concat(i," ",n):n})}function Ym(o,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,n)}function le(o,n,i,l){function d(f){return f instanceof i?f:new i(function(h){h(f)})}return new(i||(i=Promise))(function(f,h){function v(y){try{g(l.next(y))}catch(w){h(w)}}function p(y){try{g(l.throw(y))}catch(w){h(w)}}function g(y){y.done?f(y.value):d(y.value).then(v,p)}g((l=l.apply(o,n||[])).next())})}function Qm(o,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,d,f,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=v(0),h.throw=v(1),h.return=v(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(g){return function(y){return p([g,y])}}function p(g){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(i=0)),i;)try{if(l=1,d&&(f=g[0]&2?d.return:g[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,g[1])).done)return f;switch(d=0,f&&(g=[g[0]&2,f.value]),g[0]){case 0:case 1:f=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,d=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!f||g[1]>f[0]&&g[1]<f[3])){i.label=g[1];break}if(g[0]===6&&i.label<f[1]){i.label=f[1],f=g;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(g);break}f[2]&&i.ops.pop(),i.trys.pop();continue}g=n.call(o,i)}catch(y){g=[6,y],d=0}finally{l=f=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Yl=Object.create?(function(o,n,i,l){l===void 0&&(l=i);var d=Object.getOwnPropertyDescriptor(n,i);(!d||("get"in d?!n.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(o,l,d)}):(function(o,n,i,l){l===void 0&&(l=i),o[l]=n[i]});function Xm(o,n){for(var i in o)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&Yl(n,o,i)}function $l(o){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&o[n],l=0;if(i)return i.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vo(o,n){var i=typeof Symbol=="function"&&o[Symbol.iterator];if(!i)return o;var l=i.call(o),d,f=[],h;try{for(;(n===void 0||n-- >0)&&!(d=l.next()).done;)f.push(d.value)}catch(v){h={error:v}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(h)throw h.error}}return f}function Jm(){for(var o=[],n=0;n<arguments.length;n++)o=o.concat(Vo(arguments[n]));return o}function Zm(){for(var o=0,n=0,i=arguments.length;n<i;n++)o+=arguments[n].length;for(var l=Array(o),d=0,n=0;n<i;n++)for(var f=arguments[n],h=0,v=f.length;h<v;h++,d++)l[d]=f[h];return l}function Pm(o,n,i){if(i||arguments.length===2)for(var l=0,d=n.length,f;l<d;l++)(f||!(l in n))&&(f||(f=Array.prototype.slice.call(n,0,l)),f[l]=n[l]);return o.concat(f||Array.prototype.slice.call(n))}function rn(o){return this instanceof rn?(this.v=o,this):new rn(o)}function Im(o,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=i.apply(o,n||[]),d,f=[];return d=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),v("next"),v("throw"),v("return",h),d[Symbol.asyncIterator]=function(){return this},d;function h(_){return function(A){return Promise.resolve(A).then(_,w)}}function v(_,A){l[_]&&(d[_]=function(L){return new Promise(function(D,Y){f.push([_,L,D,Y])>1||p(_,L)})},A&&(d[_]=A(d[_])))}function p(_,A){try{g(l[_](A))}catch(L){O(f[0][3],L)}}function g(_){_.value instanceof rn?Promise.resolve(_.value.v).then(y,w):O(f[0][2],_)}function y(_){p("next",_)}function w(_){p("throw",_)}function O(_,A){_(A),f.shift(),f.length&&p(f[0][0],f[0][1])}}function Wm(o){var n,i;return n={},l("next"),l("throw",function(d){throw d}),l("return"),n[Symbol.iterator]=function(){return this},n;function l(d,f){n[d]=o[d]?function(h){return(i=!i)?{value:rn(o[d](h)),done:!1}:f?f(h):h}:f}}function Fm(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],i;return n?n.call(o):(o=typeof $l=="function"?$l(o):o[Symbol.iterator](),i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i);function l(f){i[f]=o[f]&&function(h){return new Promise(function(v,p){h=o[f](h),d(v,p,h.done,h.value)})}}function d(f,h,v,p){Promise.resolve(p).then(function(g){f({value:g,done:v})},h)}}function e0(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o}var dv=Object.create?(function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}):function(o,n){o.default=n},Ao=function(o){return Ao=Object.getOwnPropertyNames||function(n){var i=[];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i[i.length]=l);return i},Ao(o)};function t0(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var i=Ao(o),l=0;l<i.length;l++)i[l]!=="default"&&Yl(n,o,i[l]);return dv(n,o),n}function a0(o){return o&&o.__esModule?o:{default:o}}function s0(o,n,i,l){if(i==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?o!==n||!l:!n.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?l:i==="a"?l.call(o):l?l.value:n.get(o)}function n0(o,n,i,l,d){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?o!==n||!d:!n.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?d.call(o,i):d?d.value=i:n.set(o,i),i}function i0(o,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?n===o:o.has(n)}function l0(o,n,i){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var l,d;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");l=n[Symbol.asyncDispose]}if(l===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");l=n[Symbol.dispose],i&&(d=l)}if(typeof l!="function")throw new TypeError("Object not disposable.");d&&(l=function(){try{d.call(this)}catch(f){return Promise.reject(f)}}),o.stack.push({value:n,dispose:l,async:i})}else i&&o.stack.push({async:!0});return n}var fv=typeof SuppressedError=="function"?SuppressedError:function(o,n,i){var l=new Error(i);return l.name="SuppressedError",l.error=o,l.suppressed=n,l};function r0(o){function n(f){o.error=o.hasError?new fv(f,o.error,"An error was suppressed during disposal."):f,o.hasError=!0}var i,l=0;function d(){for(;i=o.stack.pop();)try{if(!i.async&&l===1)return l=0,o.stack.push(i),Promise.resolve().then(d);if(i.dispose){var f=i.dispose.call(i.value);if(i.async)return l|=2,Promise.resolve(f).then(d,function(h){return n(h),d()})}else l|=1}catch(h){n(h)}if(l===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return d()}function u0(o,n){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,l,d,f,h){return l?n?".jsx":".js":d&&(!f||!h)?i:d+f+"."+h.toLowerCase()+"js"}):o}const hv={__extends:Bm,__assign:Hl,__rest:un,__decorate:Lm,__param:Hm,__esDecorate:$m,__runInitializers:Vm,__propKey:Gm,__setFunctionName:Km,__metadata:Ym,__awaiter:le,__generator:Qm,__createBinding:Yl,__exportStar:Xm,__values:$l,__read:Vo,__spread:Jm,__spreadArrays:Zm,__spreadArray:Pm,__await:rn,__asyncGenerator:Im,__asyncDelegator:Wm,__asyncValues:Fm,__makeTemplateObject:e0,__importStar:t0,__importDefault:a0,__classPrivateFieldGet:s0,__classPrivateFieldSet:n0,__classPrivateFieldIn:i0,__addDisposableResource:l0,__disposeResources:r0,__rewriteRelativeImportExtension:u0},mv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:l0,get __assign(){return Hl},__asyncDelegator:Wm,__asyncGenerator:Im,__asyncValues:Fm,__await:rn,__awaiter:le,__classPrivateFieldGet:s0,__classPrivateFieldIn:i0,__classPrivateFieldSet:n0,__createBinding:Yl,__decorate:Lm,__disposeResources:r0,__esDecorate:$m,__exportStar:Xm,__extends:Bm,__generator:Qm,__importDefault:a0,__importStar:t0,__makeTemplateObject:e0,__metadata:Ym,__param:Hm,__propKey:Gm,__read:Vo,__rest:un,__rewriteRelativeImportExtension:u0,__runInitializers:Vm,__setFunctionName:Km,__spread:Jm,__spreadArray:Pm,__spreadArrays:Zm,__values:$l,default:hv},Symbol.toStringTag,{value:"Module"})),gv=o=>o?(...n)=>o(...n):(...n)=>fetch(...n);class Go extends Error{constructor(n,i="FunctionsError",l){super(n),this.name=i,this.context=l}}class om extends Go{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class cm extends Go{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class dm extends Go{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var ko;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(ko||(ko={}));class pv{constructor(n,{headers:i={},customFetch:l,region:d=ko.Any}={}){this.url=n,this.headers=i,this.region=d,this.fetch=gv(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return le(this,arguments,void 0,function*(i,l={}){var d;try{const{headers:f,method:h,body:v,signal:p}=l;let g={},{region:y}=l;y||(y=this.region);const w=new URL(`${this.url}/${i}`);y&&y!=="any"&&(g["x-region"]=y,w.searchParams.set("forceFunctionRegion",y));let O;v&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",O=v):typeof v=="string"?(g["Content-Type"]="text/plain",O=v):typeof FormData<"u"&&v instanceof FormData?O=v:(g["Content-Type"]="application/json",O=JSON.stringify(v)):O=v;const _=yield this.fetch(w.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),f),body:O,signal:p}).catch(Y=>{throw Y.name==="AbortError"?Y:new om(Y)}),A=_.headers.get("x-relay-error");if(A&&A==="true")throw new cm(_);if(!_.ok)throw new dm(_);let L=((d=_.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),D;return L==="application/json"?D=yield _.json():L==="application/octet-stream"||L==="application/pdf"?D=yield _.blob():L==="text/event-stream"?D=_:L==="multipart/form-data"?D=yield _.formData():D=yield _.text(),{data:D,error:null,response:_}}catch(f){return f instanceof Error&&f.name==="AbortError"?{data:null,error:new om(f)}:{data:null,error:f,response:f instanceof dm||f instanceof cm?f.context:void 0}}})}}var lt={};const on=ev(mv);var Rl={},Cl={},Dl={},Ul={},zl={},Ml={},fm;function o0(){if(fm)return Ml;fm=1,Object.defineProperty(Ml,"__esModule",{value:!0});class o extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Ml.default=o,Ml}var hm;function c0(){if(hm)return zl;hm=1,Object.defineProperty(zl,"__esModule",{value:!0});const n=on.__importDefault(o0());class i{constructor(d){var f,h;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(h=d.isMaybeSingle)!==null&&h!==void 0?h:!1,d.fetch?this.fetch=d.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let v=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,y,w,O;let _=null,A=null,L=null,D=p.status,Y=p.statusText;if(p.ok){if(this.method!=="HEAD"){const F=await p.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?A=F:A=JSON.parse(F))}const z=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),Q=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");z&&Q&&Q.length>1&&(L=parseInt(Q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(A)&&(A.length>1?(_={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,L=null,D=406,Y="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{const z=await p.text();try{_=JSON.parse(z),Array.isArray(_)&&p.status===404&&(A=[],_=null,D=200,Y="OK")}catch{p.status===404&&z===""?(D=204,Y="No Content"):_={message:z}}if(_&&this.isMaybeSingle&&(!((O=_?.details)===null||O===void 0)&&O.includes("0 rows"))&&(_=null,D=200,Y="OK"),_&&this.shouldThrowOnError)throw new n.default(_)}return{error:_,data:A,count:L,status:D,statusText:Y}});return this.shouldThrowOnError||(v=v.catch(p=>{var g,y,w;return{error:{message:`${(g=p?.name)!==null&&g!==void 0?g:"FetchError"}: ${p?.message}`,details:`${(y=p?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(w=p?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),v.then(d,f)}returns(){return this}overrideTypes(){return this}}return zl.default=i,zl}var mm;function d0(){if(mm)return Ul;mm=1,Object.defineProperty(Ul,"__esModule",{value:!0});const n=on.__importDefault(c0());class i extends n.default{select(d){let f=!1;const h=(d??"*").split("").map(v=>/\s/.test(v)&&!f?"":(v==='"'&&(f=!f),v)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:f=!0,nullsFirst:h,foreignTable:v,referencedTable:p=v}={}){const g=p?`${p}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${d}.${f?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(d,{foreignTable:f,referencedTable:h=f}={}){const v=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(v,`${d}`),this}range(d,f,{foreignTable:h,referencedTable:v=h}={}){const p=typeof v>"u"?"offset":`${v}.offset`,g=typeof v>"u"?"limit":`${v}.limit`;return this.url.searchParams.set(p,`${d}`),this.url.searchParams.set(g,`${f-d+1}`),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:f=!1,settings:h=!1,buffers:v=!1,wal:p=!1,format:g="text"}={}){var y;const w=[d?"analyze":null,f?"verbose":null,h?"settings":null,v?"buffers":null,p?"wal":null].filter(Boolean).join("|"),O=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${O}"; options=${w};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${d}`),this}}return Ul.default=i,Ul}var gm;function Ko(){if(gm)return Dl;gm=1,Object.defineProperty(Dl,"__esModule",{value:!0});const n=on.__importDefault(d0()),i=new RegExp("[,()]");class l extends n.default{eq(f,h){return this.url.searchParams.append(f,`eq.${h}`),this}neq(f,h){return this.url.searchParams.append(f,`neq.${h}`),this}gt(f,h){return this.url.searchParams.append(f,`gt.${h}`),this}gte(f,h){return this.url.searchParams.append(f,`gte.${h}`),this}lt(f,h){return this.url.searchParams.append(f,`lt.${h}`),this}lte(f,h){return this.url.searchParams.append(f,`lte.${h}`),this}like(f,h){return this.url.searchParams.append(f,`like.${h}`),this}likeAllOf(f,h){return this.url.searchParams.append(f,`like(all).{${h.join(",")}}`),this}likeAnyOf(f,h){return this.url.searchParams.append(f,`like(any).{${h.join(",")}}`),this}ilike(f,h){return this.url.searchParams.append(f,`ilike.${h}`),this}ilikeAllOf(f,h){return this.url.searchParams.append(f,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(f,h){return this.url.searchParams.append(f,`ilike(any).{${h.join(",")}}`),this}is(f,h){return this.url.searchParams.append(f,`is.${h}`),this}in(f,h){const v=Array.from(new Set(h)).map(p=>typeof p=="string"&&i.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(f,`in.(${v})`),this}contains(f,h){return typeof h=="string"?this.url.searchParams.append(f,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(f,`cs.{${h.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(h)}`),this}containedBy(f,h){return typeof h=="string"?this.url.searchParams.append(f,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(f,`cd.{${h.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(h)}`),this}rangeGt(f,h){return this.url.searchParams.append(f,`sr.${h}`),this}rangeGte(f,h){return this.url.searchParams.append(f,`nxl.${h}`),this}rangeLt(f,h){return this.url.searchParams.append(f,`sl.${h}`),this}rangeLte(f,h){return this.url.searchParams.append(f,`nxr.${h}`),this}rangeAdjacent(f,h){return this.url.searchParams.append(f,`adj.${h}`),this}overlaps(f,h){return typeof h=="string"?this.url.searchParams.append(f,`ov.${h}`):this.url.searchParams.append(f,`ov.{${h.join(",")}}`),this}textSearch(f,h,{config:v,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const y=v===void 0?"":`(${v})`;return this.url.searchParams.append(f,`${g}fts${y}.${h}`),this}match(f){return Object.entries(f).forEach(([h,v])=>{this.url.searchParams.append(h,`eq.${v}`)}),this}not(f,h,v){return this.url.searchParams.append(f,`not.${h}.${v}`),this}or(f,{foreignTable:h,referencedTable:v=h}={}){const p=v?`${v}.or`:"or";return this.url.searchParams.append(p,`(${f})`),this}filter(f,h,v){return this.url.searchParams.append(f,`${h}.${v}`),this}}return Dl.default=l,Dl}var pm;function f0(){if(pm)return Cl;pm=1,Object.defineProperty(Cl,"__esModule",{value:!0});const n=on.__importDefault(Ko());class i{constructor(d,{headers:f={},schema:h,fetch:v}){this.url=d,this.headers=new Headers(f),this.schema=h,this.fetch=v}select(d,f){const{head:h=!1,count:v}=f??{},p=h?"HEAD":"GET";let g=!1;const y=(d??"*").split("").map(w=>/\s/.test(w)&&!g?"":(w==='"'&&(g=!g),w)).join("");return this.url.searchParams.set("select",y),v&&this.headers.append("Prefer",`count=${v}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:f,defaultToNull:h=!0}={}){var v;const p="POST";if(f&&this.headers.append("Prefer",`count=${f}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const g=d.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(g.length>0){const y=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}upsert(d,{onConflict:f,ignoreDuplicates:h=!1,count:v,defaultToNull:p=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),f!==void 0&&this.url.searchParams.set("on_conflict",f),v&&this.headers.append("Prefer",`count=${v}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const w=d.reduce((O,_)=>O.concat(Object.keys(_)),[]);if(w.length>0){const O=[...new Set(w)].map(_=>`"${_}"`);this.url.searchParams.set("columns",O.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(d,{count:f}={}){var h;const v="PATCH";return f&&this.headers.append("Prefer",`count=${f}`),new n.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:d}={}){var f;const h="DELETE";return d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Cl.default=i,Cl}var vm;function vv(){if(vm)return Rl;vm=1,Object.defineProperty(Rl,"__esModule",{value:!0});const o=on,n=o.__importDefault(f0()),i=o.__importDefault(Ko());class l{constructor(f,{headers:h={},schema:v,fetch:p}={}){this.url=f,this.headers=new Headers(h),this.schemaName=v,this.fetch=p}from(f){const h=new URL(`${this.url}/${f}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new l(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,h={},{head:v=!1,get:p=!1,count:g}={}){var y;let w;const O=new URL(`${this.url}/rpc/${f}`);let _;v||p?(w=v?"HEAD":"GET",Object.entries(h).filter(([L,D])=>D!==void 0).map(([L,D])=>[L,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([L,D])=>{O.searchParams.append(L,D)})):(w="POST",_=h);const A=new Headers(this.headers);return g&&A.set("Prefer",`count=${g}`),new i.default({method:w,url:O,headers:A,schema:this.schemaName,body:_,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Rl.default=l,Rl}var bm;function bv(){if(bm)return lt;bm=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const o=on,n=o.__importDefault(vv());lt.PostgrestClient=n.default;const i=o.__importDefault(f0());lt.PostgrestQueryBuilder=i.default;const l=o.__importDefault(Ko());lt.PostgrestFilterBuilder=l.default;const d=o.__importDefault(d0());lt.PostgrestTransformBuilder=d.default;const f=o.__importDefault(c0());lt.PostgrestBuilder=f.default;const h=o.__importDefault(o0());return lt.PostgrestError=h.default,lt.default={PostgrestClient:n.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:f.default,PostgrestError:h.default},lt}var h0=bv();const m0=qm(h0),yv=Fp({__proto__:null,default:m0},[h0]),{PostgrestClient:xv,PostgrestQueryBuilder:Yy,PostgrestFilterBuilder:Qy,PostgrestTransformBuilder:Xy,PostgrestBuilder:Jy,PostgrestError:Zy}=m0||yv;class _v{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const l=i.node,d=parseInt(l.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let i=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(i+=`

Suggested solution: ${n.workaround}`),new Error(i)}static createWebSocket(n,i){const l=this.getWebSocketConstructor();return new l(n,i)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const wv="2.79.0",jv=`realtime-js/${wv}`,Sv="1.0.0",Ro=1e4,Nv=1e3,Ev=100;var li;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(li||(li={}));var Ie;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Ie||(Ie={}));var Yt;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Yt||(Yt={}));var Co;(function(o){o.websocket="websocket"})(Co||(Co={}));var ds;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(ds||(ds={}));class Tv{constructor(){this.HEADER_LENGTH=1}decode(n,i){return n.constructor===ArrayBuffer?i(this._binaryDecode(n)):i(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const i=new DataView(n),l=new TextDecoder;return this._decodeBroadcast(n,i,l)}_decodeBroadcast(n,i,l){const d=i.getUint8(1),f=i.getUint8(2);let h=this.HEADER_LENGTH+2;const v=l.decode(n.slice(h,h+d));h=h+d;const p=l.decode(n.slice(h,h+f));h=h+f;const g=JSON.parse(l.decode(n.slice(h,n.byteLength)));return{ref:null,topic:v,event:p,payload:g}}}class g0{constructor(n,i){this.callback=n,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ze;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(ze||(ze={}));const ym=(o,n,i={})=>{var l;const d=(l=i.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((f,h)=>(f[h]=Ov(h,o,n,d),f),{}):{}},Ov=(o,n,i,l)=>{const d=n.find(v=>v.name===o),f=d?.type,h=i[o];return f&&!l.includes(f)?p0(f,h):Do(h)},p0=(o,n)=>{if(o.charAt(0)==="_"){const i=o.slice(1,o.length);return Cv(n,i)}switch(o){case ze.bool:return Av(n);case ze.float4:case ze.float8:case ze.int2:case ze.int4:case ze.int8:case ze.numeric:case ze.oid:return kv(n);case ze.json:case ze.jsonb:return Rv(n);case ze.timestamp:return Dv(n);case ze.abstime:case ze.date:case ze.daterange:case ze.int4range:case ze.int8range:case ze.money:case ze.reltime:case ze.text:case ze.time:case ze.timestamptz:case ze.timetz:case ze.tsrange:case ze.tstzrange:return Do(n);default:return Do(n)}},Do=o=>o,Av=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},kv=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Rv=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},Cv=(o,n)=>{if(typeof o!="string")return o;const i=o.length-1,l=o[i];if(o[0]==="{"&&l==="}"){let f;const h=o.slice(1,i);try{f=JSON.parse("["+h+"]")}catch{f=h?h.split(","):[]}return f.map(v=>p0(n,v))}return o},Dv=o=>typeof o=="string"?o.replace(" ","T"):o,v0=o=>{const n=new URL(o);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class yo{constructor(n,i,l={},d=Ro){this.channel=n,this.event=i,this.payload=l,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,i){var l;return this._hasReceived(n)&&i((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:i}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(i))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var xm;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(xm||(xm={}));class ri{constructor(n,i){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},d=>{const{onJoin:f,onLeave:h,onSync:v}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ri.syncState(this.state,d,f,h),this.pendingDiffs.forEach(p=>{this.state=ri.syncDiff(this.state,p,f,h)}),this.pendingDiffs=[],v()}),this.channel._on(l.diff,{},d=>{const{onJoin:f,onLeave:h,onSync:v}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=ri.syncDiff(this.state,d,f,h),v())}),this.onJoin((d,f,h)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:f,newPresences:h})}),this.onLeave((d,f,h)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:f,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,i,l,d){const f=this.cloneDeep(n),h=this.transformState(i),v={},p={};return this.map(f,(g,y)=>{h[g]||(p[g]=y)}),this.map(h,(g,y)=>{const w=f[g];if(w){const O=y.map(D=>D.presence_ref),_=w.map(D=>D.presence_ref),A=y.filter(D=>_.indexOf(D.presence_ref)<0),L=w.filter(D=>O.indexOf(D.presence_ref)<0);A.length>0&&(v[g]=A),L.length>0&&(p[g]=L)}else v[g]=y}),this.syncDiff(f,{joins:v,leaves:p},l,d)}static syncDiff(n,i,l,d){const{joins:f,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return l||(l=()=>{}),d||(d=()=>{}),this.map(f,(v,p)=>{var g;const y=(g=n[v])!==null&&g!==void 0?g:[];if(n[v]=this.cloneDeep(p),y.length>0){const w=n[v].map(_=>_.presence_ref),O=y.filter(_=>w.indexOf(_.presence_ref)<0);n[v].unshift(...O)}l(v,y,p)}),this.map(h,(v,p)=>{let g=n[v];if(!g)return;const y=p.map(w=>w.presence_ref);g=g.filter(w=>y.indexOf(w.presence_ref)<0),n[v]=g,d(v,g,p),g.length===0&&delete n[v]}),n}static map(n,i){return Object.getOwnPropertyNames(n).map(l=>i(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((i,l)=>{const d=n[l];return"metas"in d?i[l]=d.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):i[l]=d,i},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _m;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(_m||(_m={}));var ui;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(ui||(ui={}));var ma;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(ma||(ma={}));class Yo{constructor(n,i={config:{}},l){var d,f;if(this.topic=n,this.params=i,this.socket=l,this.bindings={},this.state=Ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new yo(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new g0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ie.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(h,v)=>{this._trigger(this._replyEventName(v),h)}),this.presence=new ri(this),this.broadcastEndpointURL=v0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((f=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,i=this.timeout){var l,d,f;if(this.socket.isConnected()||this.socket.connect(),this.state==Ie.closed){const{config:{broadcast:h,presence:v,private:p}}=this.params,g=(d=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(_=>_.filter))!==null&&d!==void 0?d:[],y=!!this.bindings[ui.PRESENCE]&&this.bindings[ui.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,w={},O={broadcast:h,presence:Object.assign(Object.assign({},v),{enabled:y}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(_=>n?.(ma.CHANNEL_ERROR,_)),this._onClose(()=>n?.(ma.CLOSED)),this.updateJoinPayload(Object.assign({config:O},w)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:_})=>{var A;if(this.socket.setAuth(),_===void 0){n?.(ma.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,D=(A=L?.length)!==null&&A!==void 0?A:0,Y=[];for(let q=0;q<D;q++){const z=L[q],{filter:{event:Q,schema:F,table:te,filter:S}}=z,x=_&&_[q];if(x&&x.event===Q&&x.schema===F&&x.table===te&&x.filter===S)Y.push(Object.assign(Object.assign({},z),{id:x.id}));else{this.unsubscribe(),this.state=Ie.errored,n?.(ma.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Y,n&&n(ma.SUBSCRIBED);return}}).receive("error",_=>{this.state=Ie.errored,n?.(ma.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{n?.(ma.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,i={}){return await this.send({type:"presence",event:"track",payload:n},i.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,i,l){return this.state===Ie.joined&&n===ui.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,i,l)}async httpSend(n,i,l={}){var d;const f=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:f,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})},v=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);if(v.status===202)return{success:!0};let p=v.statusText;try{const g=await v.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(n,i={}){var l,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:f,payload:h}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(l=i.timeout)!==null&&l!==void 0?l:this.timeout);return await((d=g.body)===null||d===void 0?void 0:d.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var h,v,p;const g=this._push(n.type,n,i.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(v=(h=this.params)===null||h===void 0?void 0:h.config)===null||v===void 0?void 0:v.broadcast)===null||p===void 0)&&p.ack)&&f("ok"),g.receive("ok",()=>f("ok")),g.receive("error",()=>f("error")),g.receive("timeout",()=>f("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ie.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(d=>{l=new yo(this,Yt.leave,{},n),l.receive("ok",()=>{i(),d("ok")}).receive("timeout",()=>{i(),d("timed out")}).receive("error",()=>{d("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ie.closed,this.bindings={}}async _fetchWithTimeout(n,i,l){const d=new AbortController,f=setTimeout(()=>d.abort(),l),h=await this.socket.fetch(n,Object.assign(Object.assign({},i),{signal:d.signal}));return clearTimeout(f),h}_push(n,i,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new yo(this,n,i,l);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Ev){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(n,i,l){return i}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,i,l){var d,f;const h=n.toLocaleLowerCase(),{close:v,error:p,leave:g,join:y}=Yt;if(l&&[v,p,g,y].indexOf(h)>=0&&l!==this._joinRef())return;let O=this._onMessage(h,i,l);if(i&&!O)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(_=>{var A,L,D;return((A=_.filter)===null||A===void 0?void 0:A.event)==="*"||((D=(L=_.filter)===null||L===void 0?void 0:L.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===h}).map(_=>_.callback(O,l)):(f=this.bindings[h])===null||f===void 0||f.filter(_=>{var A,L,D,Y,q,z;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in _){const Q=_.id,F=(A=_.filter)===null||A===void 0?void 0:A.event;return Q&&((L=i.ids)===null||L===void 0?void 0:L.includes(Q))&&(F==="*"||F?.toLocaleLowerCase()===((D=i.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const Q=(q=(Y=_?.filter)===null||Y===void 0?void 0:Y.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return Q==="*"||Q===((z=i?.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===h}).map(_=>{if(typeof O=="object"&&"ids"in O){const A=O.data,{schema:L,table:D,commit_timestamp:Y,type:q,errors:z}=A;O=Object.assign(Object.assign({},{schema:L,table:D,commit_timestamp:Y,eventType:q,new:{},old:{},errors:z}),this._getPayloadRecords(A))}_.callback(O,l)})}_isClosed(){return this.state===Ie.closed}_isJoined(){return this.state===Ie.joined}_isJoining(){return this.state===Ie.joining}_isLeaving(){return this.state===Ie.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,i,l){const d=n.toLocaleLowerCase(),f={type:d,filter:i,callback:l};return this.bindings[d]?this.bindings[d].push(f):this.bindings[d]=[f],this}_off(n,i){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(d=>{var f;return!(((f=d.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===l&&Yo.isEqual(d.filter,i))})),this}static isEqual(n,i){if(Object.keys(n).length!==Object.keys(i).length)return!1;for(const l in n)if(n[l]!==i[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Yt.close,{},n)}_onError(n){this._on(Yt.error,{},i=>n(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ie.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const i={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(i.new=ym(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(i.old=ym(n.columns,n.old_record)),i}}const xo=()=>{},ql={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Uv=[1e3,2e3,5e3,1e4],zv=1e4,Mv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qv{constructor(n,i){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ro,this.transport=null,this.heartbeatIntervalMs=ql.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xo,this.ref=0,this.reconnectTimer=null,this.logger=xo,this.conn=null,this.sendBuffer=[],this.serializer=new Tv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>d?(...f)=>d(...f):(...f)=>fetch(...f),!(!((l=i?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${n}/${Co.websocket}`,this.httpEndpoint=v0(n),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_v.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const i=n.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sv}))}disconnect(n,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},n?this.conn.close(n,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const i=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const n=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,i,l){this.logger(n,i,l)}connectionState(){switch(this.conn&&this.conn.readyState){case li.connecting:return ds.Connecting;case li.open:return ds.Open;case li.closing:return ds.Closing;default:return ds.Closed}}isConnected(){return this.connectionState()===ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,i={config:{}}){const l=`realtime:${n}`,d=this.getChannels().find(f=>f.topic===l);if(d)return d;{const f=new Yo(`realtime:${n}`,i,this);return this.channels.push(f),f}}push(n){const{topic:i,event:l,payload:d,ref:f}=n,h=()=>{this.encode(n,v=>{var p;(p=this.conn)===null||p===void 0||p.send(v)})};this.log("push",`${i} ${l} (${f})`,d),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Nv,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},ql.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let i=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${n}"`),i.unsubscribe())}_remove(n){this.channels=this.channels.filter(i=>i.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:d,payload:f,ref:h}=i,v=h?`(${h})`:"",p=f.status||"";this.log("receive",`${p} ${l} ${d} ${v}`.trim(),f),this.channels.filter(g=>g._isMember(l)).forEach(g=>g._trigger(d,f,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(n){var i;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var i;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Yt.error))}_appendParams(n,i){if(Object.keys(i).length===0)return n;const l=n.match(/\?/)?"&":"?",d=new URLSearchParams(i);return`${n}${l}${d}`}_workerObjectUrl(n){let i;if(n)i=n;else{const l=new Blob([Mv],{type:"application/javascript"});i=URL.createObjectURL(l)}return i}_setConnectionState(n,i=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(n=null){let i;n?i=n:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(l=>{const d={access_token:i,version:jv};i&&l.updateJoinPayload(d),l.joinedOnce&&l._isJoined()&&l._push(Yt.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${n}`,i)})}_triggerStateCallbacks(n,i){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(i)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new g0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ql.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var i,l,d,f,h,v,p,g,y;if(this.transport=(i=n?.transport)!==null&&i!==void 0?i:null,this.timeout=(l=n?.timeout)!==null&&l!==void 0?l:Ro,this.heartbeatIntervalMs=(d=n?.heartbeatIntervalMs)!==null&&d!==void 0?d:ql.HEARTBEAT_INTERVAL,this.worker=(f=n?.worker)!==null&&f!==void 0?f:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(v=n?.heartbeatCallback)!==null&&v!==void 0?v:xo,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(w=>Uv[w-1]||zv),this.encode=(g=n?.encode)!==null&&g!==void 0?g:((w,O)=>O(JSON.stringify(w))),this.decode=(y=n?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class Qo extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Le(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Bv extends Qo{constructor(n,i,l){super(n),this.name="StorageApiError",this.status=i,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Uo extends Qo{constructor(n,i){super(n),this.name="StorageUnknownError",this.originalError=i}}const Xo=o=>o?(...n)=>o(...n):(...n)=>fetch(...n),Lv=()=>Response,zo=o=>{if(Array.isArray(o))return o.map(i=>zo(i));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([i,l])=>{const d=i.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));n[d]=zo(l)}),n},Hv=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},_o=o=>{var n;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(n=o.error)===null||n===void 0?void 0:n.message)||JSON.stringify(o)},$v=(o,n,i)=>le(void 0,void 0,void 0,function*(){const l=yield Lv();o instanceof l&&!i?.noResolveJson?o.json().then(d=>{const f=o.status||500,h=d?.statusCode||f+"";n(new Bv(_o(d),f,h))}).catch(d=>{n(new Uo(_o(d),d))}):n(new Uo(_o(o),o))}),Vv=(o,n,i,l)=>{const d={method:o,headers:n?.headers||{}};return o==="GET"||!l?d:(Hv(l)?(d.headers=Object.assign({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(l)):d.body=l,n?.duplex&&(d.duplex=n.duplex),Object.assign(Object.assign({},d),i))};function fi(o,n,i,l,d,f){return le(this,void 0,void 0,function*(){return new Promise((h,v)=>{o(i,Vv(n,l,d,f)).then(p=>{if(!p.ok)throw p;return l?.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>$v(p,v,l))})})}function oi(o,n,i,l){return le(this,void 0,void 0,function*(){return fi(o,"GET",n,i,l)})}function Kt(o,n,i,l,d){return le(this,void 0,void 0,function*(){return fi(o,"POST",n,l,d,i)})}function Mo(o,n,i,l,d){return le(this,void 0,void 0,function*(){return fi(o,"PUT",n,l,d,i)})}function Gv(o,n,i,l){return le(this,void 0,void 0,function*(){return fi(o,"HEAD",n,Object.assign(Object.assign({},i),{noResolveJson:!0}),l)})}function Jo(o,n,i,l,d){return le(this,void 0,void 0,function*(){return fi(o,"DELETE",n,l,d,i)})}class Kv{constructor(n,i){this.downloadFn=n,this.shouldThrowOnError=i}then(n,i){return this.execute().then(n,i)}execute(){return le(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}}var b0;class Yv{constructor(n,i){this.downloadFn=n,this.shouldThrowOnError=i,this[b0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Kv(this.downloadFn,this.shouldThrowOnError)}then(n,i){return this.getPromise().then(n,i)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return le(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}}b0=Symbol.toStringTag;const Qv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xv{constructor(n,i={},l,d){this.shouldThrowOnError=!1,this.url=n,this.headers=i,this.bucketId=l,this.fetch=Xo(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,i,l,d){return le(this,void 0,void 0,function*(){try{let f;const h=Object.assign(Object.assign({},wm),d);let v=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&l instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),p&&f.append("metadata",this.encodeMetadata(p)),f.append("",l)):typeof FormData<"u"&&l instanceof FormData?(f=l,f.has("cacheControl")||f.append("cacheControl",h.cacheControl),p&&!f.has("metadata")&&f.append("metadata",this.encodeMetadata(p))):(f=l,v["cache-control"]=`max-age=${h.cacheControl}`,v["content-type"]=h.contentType,p&&(v["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&f instanceof ReadableStream||f&&typeof f=="object"&&"pipe"in f&&typeof f.pipe=="function")&&!h.duplex&&(h.duplex="half")),d?.headers&&(v=Object.assign(Object.assign({},v),d.headers));const g=this._removeEmptyFolders(i),y=this._getFinalPath(g),w=yield(n=="PUT"?Mo:Kt)(this.fetch,`${this.url}/object/${y}`,f,Object.assign({headers:v},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Le(f))return{data:null,error:f};throw f}})}upload(n,i,l){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,i,l)})}uploadToSignedUrl(n,i,l,d){return le(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(n),h=this._getFinalPath(f),v=new URL(this.url+`/object/upload/sign/${h}`);v.searchParams.set("token",i);try{let p;const g=Object.assign({upsert:wm.upsert},d),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&l instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",l)):typeof FormData<"u"&&l instanceof FormData?(p=l,p.append("cacheControl",g.cacheControl)):(p=l,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const w=yield Mo(this.fetch,v.toString(),p,{headers:y});return{data:{path:f,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Le(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,i){return le(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n);const d=Object.assign({},this.headers);i?.upsert&&(d["x-upsert"]="true");const f=yield Kt(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:d}),h=new URL(this.url+f.url),v=h.searchParams.get("token");if(!v)throw new Qo("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:v},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}})}update(n,i,l){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,i,l)})}move(n,i,l){return le(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:i,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Le(d))return{data:null,error:d};throw d}})}copy(n,i,l){return le(this,void 0,void 0,function*(){try{return{data:{path:(yield Kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:i,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Le(d))return{data:null,error:d};throw d}})}createSignedUrl(n,i,l){return le(this,void 0,void 0,function*(){try{let d=this._getFinalPath(n),f=yield Kt(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:i},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const h=l?.download?`&download=${l.download===!0?"":l.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${h}`)},{data:f,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Le(d))return{data:null,error:d};throw d}})}createSignedUrls(n,i,l){return le(this,void 0,void 0,function*(){try{const d=yield Kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:n},{headers:this.headers}),f=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:d.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${f}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Le(d))return{data:null,error:d};throw d}})}download(n,i){const d=typeof i?.transform<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString(i?.transform||{}),h=f?`?${f}`:"",v=this._getFinalPath(n),p=()=>oi(this.fetch,`${this.url}/${d}/${v}${h}`,{headers:this.headers,noResolveJson:!0});return new Yv(p,this.shouldThrowOnError)}info(n){return le(this,void 0,void 0,function*(){const i=this._getFinalPath(n);try{const l=yield oi(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:zo(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}})}exists(n){return le(this,void 0,void 0,function*(){const i=this._getFinalPath(n);try{return yield Gv(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Le(l)&&l instanceof Uo){const d=l.originalError;if([400,404].includes(d?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(n,i){const l=this._getFinalPath(n),d=[],f=i?.download?`download=${i.download===!0?"":i.download}`:"";f!==""&&d.push(f);const v=typeof i?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(i?.transform||{});p!==""&&d.push(p);let g=d.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${v}/public/${l}${g}`)}}}remove(n){return le(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}list(n,i,l){return le(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},Qv),i),{prefix:n||""});return{data:yield Kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},l),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Le(d))return{data:null,error:d};throw d}})}listV2(n,i){return le(this,void 0,void 0,function*(){try{const l=Object.assign({},n);return{data:yield Kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},i),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const i=[];return n.width&&i.push(`width=${n.width}`),n.height&&i.push(`height=${n.height}`),n.resize&&i.push(`resize=${n.resize}`),n.format&&i.push(`format=${n.format}`),n.quality&&i.push(`quality=${n.quality}`),i.join("&")}}const y0="2.79.0",x0={"X-Client-Info":`storage-js/${y0}`};class Jv{constructor(n,i={},l,d){this.shouldThrowOnError=!1;const f=new URL(n);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase.")),this.url=f.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x0),i),this.fetch=Xo(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return le(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(n);return{data:yield oi(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}getBucket(n){return le(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}createBucket(n){return le(this,arguments,void 0,function*(i,l={public:!1}){try{return{data:yield Kt(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Le(d))return{data:null,error:d};throw d}})}updateBucket(n,i){return le(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}})}emptyBucket(n){return le(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}deleteBucket(n){return le(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(n){const i={};return n&&("limit"in n&&(i.limit=String(n.limit)),"offset"in n&&(i.offset=String(n.offset)),n.search&&(i.search=n.search),n.sortColumn&&(i.sortColumn=n.sortColumn),n.sortOrder&&(i.sortOrder=n.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}class Zv{constructor(n,i={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x0),i),this.fetch=Xo(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return le(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}listBuckets(n){return le(this,void 0,void 0,function*(){try{const i=new URLSearchParams;n?.limit!==void 0&&i.set("limit",n.limit.toString()),n?.offset!==void 0&&i.set("offset",n.offset.toString()),n?.sortColumn&&i.set("sortColumn",n.sortColumn),n?.sortOrder&&i.set("sortOrder",n.sortOrder),n?.search&&i.set("search",n.search);const l=i.toString(),d=l?`${this.url}/bucket?${l}`:`${this.url}/bucket`;return{data:yield oi(this.fetch,d,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}deleteBucket(n){return le(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}}const Zo={"X-Client-Info":`storage-js/${y0}`,"Content-Type":"application/json"};class _0 extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Tt(o){return typeof o=="object"&&o!==null&&"__isStorageVectorsError"in o}class wo extends _0{constructor(n,i,l){super(n),this.name="StorageVectorsApiError",this.status=i,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pv extends _0{constructor(n,i){super(n),this.name="StorageVectorsUnknownError",this.originalError=i}}var jm;(function(o){o.InternalError="InternalError",o.S3VectorConflictException="S3VectorConflictException",o.S3VectorNotFoundException="S3VectorNotFoundException",o.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",o.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",o.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(jm||(jm={}));const Po=o=>o?(...n)=>o(...n):(...n)=>fetch(...n),Iv=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},Sm=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Wv=(o,n,i)=>le(void 0,void 0,void 0,function*(){if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!i?.noResolveJson){const d=o.status||500,f=o;if(typeof f.json=="function")f.json().then(h=>{const v=h?.statusCode||h?.code||d+"";n(new wo(Sm(h),d,v))}).catch(()=>{const h=d+"",v=f.statusText||`HTTP ${d} error`;n(new wo(v,d,h))});else{const h=d+"",v=f.statusText||`HTTP ${d} error`;n(new wo(v,d,h))}}else n(new Pv(Sm(o),o))}),Fv=(o,n,i,l)=>{const d={method:o,headers:n?.headers||{}};return l?(Iv(l)?(d.headers=Object.assign({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(l)):d.body=l,Object.assign(Object.assign({},d),i)):d};function eb(o,n,i,l,d,f){return le(this,void 0,void 0,function*(){return new Promise((h,v)=>{o(i,Fv(n,l,d,f)).then(p=>{if(!p.ok)throw p;if(l?.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>h(p)).catch(p=>Wv(p,v,l))})})}function Ot(o,n,i,l,d){return le(this,void 0,void 0,function*(){return eb(o,"POST",n,l,d,i)})}class tb{constructor(n,i={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zo),i),this.fetch=Po(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return le(this,void 0,void 0,function*(){try{return{data:(yield Ot(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}getIndex(n,i){return le(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:i},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Tt(l))return{data:null,error:l};throw l}})}listIndexes(n){return le(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}deleteIndex(n,i){return le(this,void 0,void 0,function*(){try{return{data:(yield Ot(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:i},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Tt(l))return{data:null,error:l};throw l}})}}class ab{constructor(n,i={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zo),i),this.fetch=Po(l)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return le(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ot(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}getVectors(n){return le(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}listVectors(n){return le(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield Ot(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}queryVectors(n){return le(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}deleteVectors(n){return le(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ot(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}}class sb{constructor(n,i={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zo),i),this.fetch=Po(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return le(this,void 0,void 0,function*(){try{return{data:(yield Ot(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}getBucket(n){return le(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}listBuckets(){return le(this,arguments,void 0,function*(n={}){try{return{data:yield Ot(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}deleteBucket(n){return le(this,void 0,void 0,function*(){try{return{data:(yield Ot(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tt(i))return{data:null,error:i};throw i}})}}class nb extends sb{constructor(n,i={}){super(n,i.headers||{},i.fetch)}from(n){return new ib(this.url,this.headers,n,this.fetch)}}class ib extends tb{constructor(n,i,l,d){super(n,i,d),this.vectorBucketName=l}createIndex(n){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return le(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return le(this,arguments,void 0,function*(i={}){return n.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return le(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return le(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new lb(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class lb extends ab{constructor(n,i,l,d,f){super(n,i,f),this.vectorBucketName=l,this.indexName=d}putVectors(n){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return le(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return le(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return le(this,arguments,void 0,function*(i={}){return n.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return le(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return le(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class rb extends Jv{constructor(n,i={},l,d){super(n,i,l,d)}from(n){return new Xv(this.url,this.headers,n,this.fetch)}get vectors(){return new nb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Zv(this.url+"/iceberg",this.headers,this.fetch)}}const ub="2.79.0";let ii="";typeof Deno<"u"?ii="deno":typeof document<"u"?ii="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ii="react-native":ii="node";const ob={"X-Client-Info":`supabase-js-${ii}/${ub}`},cb={headers:ob},db={schema:"public"},fb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hb={},mb=o=>o?(...n)=>o(...n):(...n)=>fetch(...n),gb=()=>Headers,pb=(o,n,i)=>{const l=mb(i),d=gb();return async(f,h)=>{var v;const p=(v=await n())!==null&&v!==void 0?v:o;let g=new d(h?.headers);return g.has("apikey")||g.set("apikey",o),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),l(f,Object.assign(Object.assign({},h),{headers:g}))}};function vb(o){return o.endsWith("/")?o:o+"/"}function bb(o,n){var i,l;const{db:d,auth:f,realtime:h,global:v}=o,{db:p,auth:g,realtime:y,global:w}=n,O={db:Object.assign(Object.assign({},p),d),auth:Object.assign(Object.assign({},g),f),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},w),v),{headers:Object.assign(Object.assign({},(i=w?.headers)!==null&&i!==void 0?i:{}),(l=v?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return o.accessToken?O.accessToken=o.accessToken:delete O.accessToken,O}function yb(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(vb(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const w0="2.79.0",sn=30*1e3,qo=3,jo=qo*sn,xb="http://localhost:9999",_b="supabase.auth.token",wb={"X-Client-Info":`gotrue-js/${w0}`},Bo="X-Supabase-Api-Version",j0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sb=600*1e3;class ci extends Error{constructor(n,i,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=l}}function re(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class Nb extends ci{constructor(n,i,l){super(n,i,l),this.name="AuthApiError",this.status=i,this.code=l}}function Eb(o){return re(o)&&o.name==="AuthApiError"}class fs extends ci{constructor(n,i){super(n),this.name="AuthUnknownError",this.originalError=i}}class Va extends ci{constructor(n,i,l,d){super(n,l,d),this.name=i,this.status=l}}class Vt extends Va{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tb(o){return re(o)&&o.name==="AuthSessionMissingError"}class Ws extends Va{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bl extends Va{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Ll extends Va{constructor(n,i=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ob(o){return re(o)&&o.name==="AuthImplicitGrantRedirectError"}class Nm extends Va{constructor(n,i=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lo extends Va{constructor(n,i){super(n,"AuthRetryableFetchError",i,void 0)}}function So(o){return re(o)&&o.name==="AuthRetryableFetchError"}class Em extends Va{constructor(n,i,l){super(n,"AuthWeakPasswordError",i,"weak_password"),this.reasons=l}}class Ho extends Va{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tm=` 	
\r=`.split(""),Ab=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<Tm.length;n+=1)o[Tm[n].charCodeAt(0)]=-2;for(let n=0;n<Vl.length;n+=1)o[Vl[n].charCodeAt(0)]=n;return o})();function Om(o,n,i){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;i(Vl[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;i(Vl[l]),n.queuedBits-=6}}function S0(o,n,i){const l=Ab[o];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)i(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Am(o){const n=[],i=h=>{n.push(String.fromCodePoint(h))},l={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},f=h=>{Cb(h,l,i)};for(let h=0;h<o.length;h+=1)S0(o.charCodeAt(h),d,f);return n.join("")}function kb(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Rb(o,n){for(let i=0;i<o.length;i+=1){let l=o.charCodeAt(i);if(l>55295&&l<=56319){const d=(l-55296)*1024&65535;l=(o.charCodeAt(i+1)-56320&65535|d)+65536,i+=1}kb(l,n)}}function Cb(o,n,i){if(n.utf8seq===0){if(o<=127){i(o);return}for(let l=1;l<6;l+=1)if((o>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&i(n.codepoint)}}function ln(o){const n=[],i={queue:0,queuedBits:0},l=d=>{n.push(d)};for(let d=0;d<o.length;d+=1)S0(o.charCodeAt(d),i,l);return new Uint8Array(n)}function Db(o){const n=[];return Rb(o,i=>n.push(i)),new Uint8Array(n)}function hs(o){const n=[],i={queue:0,queuedBits:0},l=d=>{n.push(d)};return o.forEach(d=>Om(d,i,l)),Om(null,i,l),n.join("")}function Ub(o){return Math.round(Date.now()/1e3)+o}function zb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const rt=()=>typeof window<"u"&&typeof document<"u",us={tested:!1,writable:!1},N0=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(us.tested)return us.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),us.tested=!0,us.writable=!0}catch{us.tested=!0,us.writable=!1}return us.writable};function Mb(o){const n={},i=new URL(o);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((d,f)=>{n[f]=d})}catch{}return i.searchParams.forEach((l,d)=>{n[d]=l}),n}const E0=o=>o?(...n)=>o(...n):(...n)=>fetch(...n),qb=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",nn=async(o,n,i)=>{await o.setItem(n,JSON.stringify(i))},os=async(o,n)=>{const i=await o.getItem(n);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Ha=async(o,n)=>{await o.removeItem(n)};class Ql{constructor(){this.promise=new Ql.promiseConstructor((n,i)=>{this.resolve=n,this.reject=i})}}Ql.promiseConstructor=Promise;function No(o){const n=o.split(".");if(n.length!==3)throw new Ho("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!jb.test(n[l]))throw new Ho("JWT not in base64url format");return{header:JSON.parse(Am(n[0])),payload:JSON.parse(Am(n[1])),signature:ln(n[2]),raw:{header:n[0],payload:n[1]}}}async function Bb(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function Lb(o,n){return new Promise((l,d)=>{(async()=>{for(let f=0;f<1/0;f++)try{const h=await o(f);if(!n(f,null,h)){l(h);return}}catch(h){if(!n(f,h)){d(h);return}}})()})}function Hb(o){return("0"+o.toString(16)).substr(-2)}function $b(){const n=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=i.length;let d="";for(let f=0;f<56;f++)d+=i.charAt(Math.floor(Math.random()*l));return d}return crypto.getRandomValues(n),Array.from(n,Hb).join("")}async function Vb(o){const i=new TextEncoder().encode(o),l=await crypto.subtle.digest("SHA-256",i),d=new Uint8Array(l);return Array.from(d).map(f=>String.fromCharCode(f)).join("")}async function Gb(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const i=await Vb(o);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fs(o,n,i=!1){const l=$b();let d=l;i&&(d+="/PASSWORD_RECOVERY"),await nn(o,`${n}-code-verifier`,d);const f=await Gb(l);return[f,l===f?"plain":"s256"]}const Kb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Yb(o){const n=o.headers.get(Bo);if(!n||!n.match(Kb))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Qb(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function Xb(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function en(o){if(!Jb.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Eo(){const o={};return new Proxy(o,{get:(n,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zb(o,n){return new Proxy(o,{get:(i,l,d)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const f=l.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)"||f==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,l,d)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(i,l,d)}})}function km(o){return JSON.parse(JSON.stringify(o))}const cs=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Pb=[502,503,504];async function Rm(o){var n;if(!qb(o))throw new Lo(cs(o),0);if(Pb.includes(o.status))throw new Lo(cs(o),o.status);let i;try{i=await o.json()}catch(f){throw new fs(cs(f),f)}let l;const d=Yb(o);if(d&&d.getTime()>=j0["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?l=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(l=i.error_code),l){if(l==="weak_password")throw new Em(cs(i),o.status,((n=i.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new Vt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((f,h)=>f&&typeof h=="string",!0))throw new Em(cs(i),o.status,i.weak_password.reasons);throw new Nb(cs(i),o.status||500,l)}const Ib=(o,n,i,l)=>{const d={method:o,headers:n?.headers||{}};return o==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),d.body=JSON.stringify(l),Object.assign(Object.assign({},d),i))};async function de(o,n,i,l){var d;const f=Object.assign({},l?.headers);f[Bo]||(f[Bo]=j0["2024-01-01"].name),l?.jwt&&(f.Authorization=`Bearer ${l.jwt}`);const h=(d=l?.query)!==null&&d!==void 0?d:{};l?.redirectTo&&(h.redirect_to=l.redirectTo);const v=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await Wb(o,n,i+v,{headers:f,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(p):{data:Object.assign({},p),error:null}}async function Wb(o,n,i,l,d,f){const h=Ib(n,l,d,f);let v;try{v=await o(i,Object.assign({},h))}catch(p){throw console.error(p),new Lo(cs(p),0)}if(v.ok||await Rm(v),l?.noResolveJson)return v;try{return await v.json()}catch(p){await Rm(p)}}function Gt(o){var n;let i=null;ty(o)&&(i=Object.assign({},o),o.expires_at||(i.expires_at=Ub(o.expires_in)));const l=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:i,user:l},error:null}}function Cm(o){const n=Gt(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0)&&(n.data.weak_password=o.weak_password),n}function $a(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function Fb(o){return{data:o,error:null}}function ey(o){const{action_link:n,email_otp:i,hashed_token:l,redirect_to:d,verification_type:f}=o,h=un(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),v={action_link:n,email_otp:i,hashed_token:l,redirect_to:d,verification_type:f},p=Object.assign({},h);return{data:{properties:v,user:p},error:null}}function Dm(o){return o}function ty(o){return o.access_token&&o.refresh_token&&o.expires_in}const To=["global","local","others"];class ay{constructor({url:n="",headers:i={},fetch:l}){this.url=n,this.headers=i,this.fetch=E0(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,i=To[0]){if(To.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${To.join(", ")}`);try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(re(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,i={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:$a})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:i}=n,l=un(n,["options"]),d=Object.assign(Object.assign({},l),i);return"newEmail"in l&&(d.new_email=l?.newEmail,delete d.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:ey,redirectTo:i?.redirectTo})}catch(i){if(re(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(n){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:$a})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}async listUsers(n){var i,l,d,f,h,v,p;try{const g={nextPage:null,lastPage:0,total:0},y=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:"",per_page:(f=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""},xform:Dm});if(y.error)throw y.error;const w=await y.json(),O=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,_=(p=(v=y.headers.get("link"))===null||v===void 0?void 0:v.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(A=>{const L=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(A.split(";")[1].split("=")[1]);g[`${D}Page`]=L}),g.total=parseInt(O)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(re(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){en(n);try{return await de(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:$a})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}async updateUserById(n,i){en(n);try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:i,headers:this.headers,xform:$a})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,i=!1){en(n);try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:i},xform:$a})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){en(n.userId);try{const{data:i,error:l}=await de(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:i,error:l}}catch(i){if(re(i))return{data:null,error:i};throw i}}async _deleteFactor(n){en(n.userId),en(n.id);try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}async _listOAuthClients(n){var i,l,d,f,h,v,p;try{const g={nextPage:null,lastPage:0,total:0},y=await de(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:"",per_page:(f=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""},xform:Dm});if(y.error)throw y.error;const w=await y.json(),O=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,_=(p=(v=y.headers.get("link"))===null||v===void 0?void 0:v.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(A=>{const L=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(A.split(";")[1].split("=")[1]);g[`${D}Page`]=L}),g.total=parseInt(O)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(re(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(n){try{return await de(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(re(i))return{data:null,error:i};throw i}}async _getOAuthClient(n){try{return await de(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(re(i))return{data:null,error:i};throw i}}async _updateOAuthClient(n,i){try{return await de(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:i,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(re(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await de(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(n){try{return await de(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(re(i))return{data:null,error:i};throw i}}}function Um(o={}){return{getItem:n=>o[n]||null,setItem:(n,i)=>{o[n]=i},removeItem:n=>{delete o[n]}}}const tn={debug:!!(globalThis&&N0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class T0 extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class sy extends T0{}async function ny(o,n,i){tn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),tn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async d=>{if(d){tn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,d.name);try{return await i()}finally{tn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,d.name)}}else{if(n===0)throw tn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new sy(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(tn.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function iy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function O0(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function ly(o){return parseInt(o,16)}function ry(o){const n=new TextEncoder().encode(o);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function uy(o){var n;const{chainId:i,domain:l,expirationTime:d,issuedAt:f=new Date,nonce:h,notBefore:v,requestId:p,resources:g,scheme:y,uri:w,version:O}=o;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(O!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${O}`);if(!((n=o.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const _=O0(o.address),A=y?`${y}://${l}`:l,L=o.statement?`${o.statement}
`:"",D=`${A} wants you to sign in with your Ethereum account:
${_}

${L}`;let Y=`URI: ${w}
Version: ${O}
Chain ID: ${i}${h?`
Nonce: ${h}`:""}
Issued At: ${f.toISOString()}`;if(d&&(Y+=`
Expiration Time: ${d.toISOString()}`),v&&(Y+=`
Not Before: ${v.toISOString()}`),p&&(Y+=`
Request ID: ${p}`),g){let q=`
Resources:`;for(const z of g){if(!z||typeof z!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${z}`);q+=`
- ${z}`}Y+=q}return`${D}
${Y}`}class Ze extends Error{constructor({message:n,code:i,cause:l,name:d}){var f;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(f=d??(l instanceof Error?l.name:void 0))!==null&&f!==void 0?f:"Unknown Error",this.code=i}}class Gl extends Ze{constructor(n,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:n}),this.name="WebAuthnUnknownError",this.originalError=i}}function oy({error:o,options:n}){var i,l,d;const{publicKey:f}=n;if(!f)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((i=f.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new Ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(n.mediation==="conditional"&&((l=f.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((d=f.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new Ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new Ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new Ze({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return f.pubKeyCredParams.filter(v=>v.type==="public-key").length===0?new Ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new Ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const h=window.location.hostname;if(A0(h)){if(f.rp.id!==h)return new Ze({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new Ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function cy({error:o,options:n}){const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new Ze({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const l=window.location.hostname;if(A0(l)){if(i.rpId!==l)return new Ze({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class dy{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const fy=new dy;function hy(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:n,user:i,excludeCredentials:l}=o,d=un(o,["challenge","user","excludeCredentials"]),f=ln(n).buffer,h=Object.assign(Object.assign({},i),{id:ln(i.id).buffer}),v=Object.assign(Object.assign({},d),{challenge:f,user:h});if(l&&l.length>0){v.excludeCredentials=new Array(l.length);for(let p=0;p<l.length;p++){const g=l[p];v.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:ln(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return v}function my(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:n,allowCredentials:i}=o,l=un(o,["challenge","allowCredentials"]),d=ln(n).buffer,f=Object.assign(Object.assign({},l),{challenge:d});if(i&&i.length>0){f.allowCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const v=i[h];f.allowCredentials[h]=Object.assign(Object.assign({},v),{id:ln(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return f}function gy(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const i=o;return{id:o.id,rawId:o.id,response:{attestationObject:hs(new Uint8Array(o.response.attestationObject)),clientDataJSON:hs(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function py(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const i=o,l=o.getClientExtensionResults(),d=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:hs(new Uint8Array(d.authenticatorData)),clientDataJSON:hs(new Uint8Array(d.clientDataJSON)),signature:hs(new Uint8Array(d.signature)),userHandle:d.userHandle?hs(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function A0(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function zm(){var o,n;return!!(rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function vy(o){try{const n=await navigator.credentials.create(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Gl("Browser returned unexpected credential type",n)}:{data:null,error:new Gl("Empty credential response",n)}}catch(n){return{data:null,error:oy({error:n,options:o})}}}async function by(o){try{const n=await navigator.credentials.get(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Gl("Browser returned unexpected credential type",n)}:{data:null,error:new Gl("Empty credential response",n)}}catch(n){return{data:null,error:cy({error:n,options:o})}}}const yy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},xy={userVerification:"preferred",hints:["security-key"]};function Kl(...o){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),i=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),l={};for(const d of o)if(d)for(const f in d){const h=d[f];if(h!==void 0)if(Array.isArray(h))l[f]=h;else if(i(h))l[f]=h;else if(n(h)){const v=l[f];n(v)?l[f]=Kl(v,h):l[f]=Kl(h)}else l[f]=h}return l}function _y(o,n){return Kl(yy,o,n||{})}function wy(o,n){return Kl(xy,o,n||{})}class jy{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:i,friendlyName:l,signal:d},f){try{const{data:h,error:v}=await this.client.mfa.challenge({factorId:n,webauthn:i});if(!h)return{data:null,error:v};const p=d??fy.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${l}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=_y(h.webauthn.credential_options.publicKey,f?.create),{data:y,error:w}=await vy({publicKey:g,signal:p});return y?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}case"request":{const g=wy(h.webauthn.credential_options.publicKey,f?.request),{data:y,error:w}=await by(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:p}));return y?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}}}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new fs("Unexpected error in challenge",h)}}}async _verify({challengeId:n,factorId:i,webauthn:l}){return this.client.mfa.verify({factorId:i,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}},f){if(!i)return{data:null,error:new ci("rpId is required for WebAuthn authentication")};try{if(!zm())return{data:null,error:new fs("Browser does not support WebAuthn",null)};const{data:h,error:v}=await this.challenge({factorId:n,webauthn:{rpId:i,rpOrigins:l},signal:d},{request:f});if(!h)return{data:null,error:v};const{webauthn:p}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:p.type,rpId:i,rpOrigins:l,credential_response:p.credential_response}})}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new fs("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d},f){if(!i)return{data:null,error:new ci("rpId is required for WebAuthn registration")};try{if(!zm())return{data:null,error:new fs("Browser does not support WebAuthn",null)};const{data:h,error:v}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(y=>{var w;return(w=y.data)===null||w===void 0?void 0:w.all.find(O=>O.factor_type==="webauthn"&&O.friendly_name===n&&O.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:v};const{data:p,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:i,rpOrigins:l},signal:d},{create:f});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:i,rpOrigins:l,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new fs("Unexpected error in register",h)}}}}iy();const Sy={url:xb,storageKey:_b,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Mm(o,n,i){return await i()}const an={};class di{get jwks(){var n,i;return(i=(n=an[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(n){an[this.storageKey]=Object.assign(Object.assign({},an[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,i;return(i=(n=an[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){an[this.storageKey]=Object.assign(Object.assign({},an[this.storageKey]),{cachedAt:n})}constructor(n){var i,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=di.nextInstanceID,di.nextInstanceID+=1,this.instanceID>0&&rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const d=Object.assign(Object.assign({},Sy),n);if(this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.persistSession=d.persistSession,this.storageKey=d.storageKey,this.autoRefreshToken=d.autoRefreshToken,this.admin=new ay({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=E0(d.fetch),this.lock=d.lock||Mm,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:rt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=ny:this.lock=Mm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:N0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Um(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Um(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${w0}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let i={},l="none";if(rt()&&(i=Mb(window.location.href),this._isImplicitGrantCallback(i)?l="implicit":await this._isPKCECallback(i)&&(l="pkce")),rt()&&this.detectSessionInUrl&&l!=="none"){const{data:d,error:f}=await this._getSessionFromURL(i,l);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),Ob(f)){const p=(n=f.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:h,redirectType:v}=d;return this._debug("#_initialize()","detected session in URL",h,"redirect type",v),await this._saveSession(h),setTimeout(async()=>{v==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return re(i)?this._returnResult({error:i}):this._returnResult({error:new fs("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var i,l,d;try{const f=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(i=n?.options)===null||i===void 0?void 0:i.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(d=n?.options)===null||d===void 0?void 0:d.captchaToken}},xform:Gt}),{data:h,error:v}=f;if(v||!h)return this._returnResult({data:{user:null,session:null},error:v});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(f){if(re(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signUp(n){var i,l,d;try{let f;if("email"in n){const{email:y,password:w,options:O}=n;let _=null,A=null;this.flowType==="pkce"&&([_,A]=await Fs(this.storage,this.storageKey)),f=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:O?.emailRedirectTo,body:{email:y,password:w,data:(i=O?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:O?.captchaToken},code_challenge:_,code_challenge_method:A},xform:Gt})}else if("phone"in n){const{phone:y,password:w,options:O}=n;f=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(l=O?.data)!==null&&l!==void 0?l:{},channel:(d=O?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:O?.captchaToken}},xform:Gt})}else throw new Bl("You must provide either an email or phone number and a password");const{data:h,error:v}=f;if(v||!h)return this._returnResult({data:{user:null,session:null},error:v});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(f){if(re(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithPassword(n){try{let i;if("email"in n){const{email:f,password:h,options:v}=n;i=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:h,gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Cm})}else if("phone"in n){const{phone:f,password:h,options:v}=n;i=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:h,gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Cm})}else throw new Bl("You must provide either an email or phone number and a password");const{data:l,error:d}=i;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l||!l.session||!l.user){const f=new Ws;return this._returnResult({data:{user:null,session:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:d})}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(n){var i,l,d,f;return await this._handleProviderSignIn(n.provider,{redirectTo:(i=n.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(f=n.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:i}=n;switch(i){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(n){var i,l,d,f,h,v,p,g,y,w,O;let _,A;if("message"in n)_=n.message,A=n.signature;else{const{chain:L,wallet:D,statement:Y,options:q}=n;let z;if(rt())if(typeof D=="object")z=D;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")z=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=D}const Q=new URL((i=q?.url)!==null&&i!==void 0?i:window.location.href),F=await z.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const te=O0(F[0]);let S=(l=q?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!S){const Z=await z.request({method:"eth_chainId"});S=ly(Z)}const x={domain:Q.host,address:te,statement:Y,uri:Q.href,version:"1",chainId:S,nonce:(d=q?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(h=(f=q?.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(v=q?.signInWithEthereum)===null||v===void 0?void 0:v.expirationTime,notBefore:(p=q?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=q?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(y=q?.signInWithEthereum)===null||y===void 0?void 0:y.resources};_=uy(x),A=await z.request({method:"personal_sign",params:[ry(_),te]})}try{const{data:L,error:D}=await de(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:A},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(O=n.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:Gt});if(D)throw D;if(!L||!L.session||!L.user){const Y=new Ws;return this._returnResult({data:{user:null,session:null},error:Y})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:D})}catch(L){if(re(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async signInWithSolana(n){var i,l,d,f,h,v,p,g,y,w,O,_;let A,L;if("message"in n)A=n.message,L=n.signature;else{const{chain:D,wallet:Y,statement:q,options:z}=n;let Q;if(rt())if(typeof Y=="object")Q=Y;else{const te=window;if("solana"in te&&typeof te.solana=="object"&&("signIn"in te.solana&&typeof te.solana.signIn=="function"||"signMessage"in te.solana&&typeof te.solana.signMessage=="function"))Q=te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Y!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=Y}const F=new URL((i=z?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in Q&&Q.signIn){const te=await Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z?.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),q?{statement:q}:null));let S;if(Array.isArray(te)&&te[0]&&typeof te[0]=="object")S=te[0];else if(te&&typeof te=="object"&&"signedMessage"in te&&"signature"in te)S=te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)A=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),L=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${F.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(d=(l=z?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((f=z?.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((h=z?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((v=z?.signInWithSolana)===null||v===void 0)&&v.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((p=z?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((g=z?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((w=(y=z?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...z.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const te=await Q.signMessage(new TextEncoder().encode(A),"utf8");if(!te||!(te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=te}}try{const{data:D,error:Y}=await de(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:hs(L)},!((O=n.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Gt});if(Y)throw Y;if(!D||!D.session||!D.user){const q=new Ws;return this._returnResult({data:{user:null,session:null},error:q})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:Y})}catch(D){if(re(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async _exchangeCodeForSession(n){const i=await os(this.storage,`${this.storageKey}-code-verifier`),[l,d]=(i??"").split("/");try{const{data:f,error:h}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:Gt});if(await Ha(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!f||!f.session||!f.user){const v=new Ws;return this._returnResult({data:{user:null,session:null,redirectType:null},error:v})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign(Object.assign({},f),{redirectType:d??null}),error:h})}catch(f){if(re(f))return this._returnResult({data:{user:null,session:null,redirectType:null},error:f});throw f}}async signInWithIdToken(n){try{const{options:i,provider:l,token:d,access_token:f,nonce:h}=n,v=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:d,access_token:f,nonce:h,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Gt}),{data:p,error:g}=v;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const y=new Ws;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(n){var i,l,d,f,h;try{if("email"in n){const{email:v,options:p}=n;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Fs(this.storage,this.storageKey));const{error:w}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:v,data:(i=p?.data)!==null&&i!==void 0?i:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:v,options:p}=n,{data:g,error:y}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:v,data:(d=p?.data)!==null&&d!==void 0?d:{},create_user:(f=p?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(h=p?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:y})}throw new Bl("You must provide either an email or phone number.")}catch(v){if(re(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async verifyOtp(n){var i,l;try{let d,f;"options"in n&&(d=(i=n.options)===null||i===void 0?void 0:i.redirectTo,f=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:h,error:v}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:f}}),redirectTo:d,xform:Gt});if(v)throw v;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,g=h.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(d){if(re(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(n){var i,l,d;try{let f=null,h=null;this.flowType==="pkce"&&([f,h]=await Fs(this.storage,this.storageKey));const v=await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(i=n.options)===null||i===void 0?void 0:i.redirectTo)!==null&&l!==void 0?l:void 0}),!((d=n?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:h}),headers:this.headers,xform:Fb});return this._returnResult(v)}catch(f){if(re(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:i},error:l}=n;if(l)throw l;if(!i)throw new Vt;const{error:d}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const i=`${this.url}/resend`;if("email"in n){const{email:l,type:d,options:f}=n,{error:h}=await de(this.fetch,"POST",i,{headers:this.headers,body:{email:l,type:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in n){const{phone:l,type:d,options:f}=n,{data:h,error:v}=await de(this.fetch,"POST",i,{headers:this.headers,body:{phone:l,type:d,gotrue_meta_security:{captcha_token:f?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:v})}throw new Bl("You must provide either an email or phone number and a type")}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(n,i){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await l,await i()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=i();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await n(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const i=await os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?n=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<jo:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const h=await os(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=Eo()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};n.user=Zb(n.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:f}=await this._callRefreshToken(n.refresh_token);return f?this._returnResult({data:{session:null},error:f}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:$a}):await this._useSession(async i=>{var l,d,f;const{data:h,error:v}=i;if(v)throw v;return!(!((l=h.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vt}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0,xform:$a})})}catch(i){if(re(i))return Tb(i)&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(n,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,i))}async _updateUser(n,i={}){try{return await this._useSession(async l=>{const{data:d,error:f}=l;if(f)throw f;if(!d.session)throw new Vt;const h=d.session;let v=null,p=null;this.flowType==="pkce"&&n.email!=null&&([v,p]=await Fs(this.storage,this.storageKey));const{data:g,error:y}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:v,code_challenge_method:p}),jwt:h.access_token,xform:$a});if(y)throw y;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(l){if(re(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Vt;const i=Date.now()/1e3;let l=i,d=!0,f=null;const{payload:h}=No(n.access_token);if(h.exp&&(l=h.exp,d=l<=i),d){const{data:v,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!v)return{data:{user:null,session:null},error:null};f=v}else{const{data:v,error:p}=await this._getUser(n.access_token);if(p)throw p;f={access_token:n.access_token,refresh_token:n.refresh_token,user:v.user,token_type:"bearer",expires_in:l-i,expires_at:l},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return this._returnResult({data:{user:f.user,session:f},error:null})}catch(i){if(re(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async i=>{var l;if(!n){const{data:h,error:v}=i;if(v)throw v;n=(l=h.session)!==null&&l!==void 0?l:void 0}if(!n?.refresh_token)throw new Vt;const{data:d,error:f}=await this._callRefreshToken(n.refresh_token);return f?this._returnResult({data:{user:null,session:null},error:f}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(n,i){try{if(!rt())throw new Ll("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Ll(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Nm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ll("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Nm("No code detected.");const{data:q,error:z}=await this._exchangeCodeForSession(n.code);if(z)throw z;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:d,access_token:f,refresh_token:h,expires_in:v,expires_at:p,token_type:g}=n;if(!f||!v||!h||!g)throw new Ll("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(v);let O=y+w;p&&(O=parseInt(p));const _=O-y;_*1e3<=sn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${w}s`);const A=O-w;y-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,O,y):y-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,O,y);const{data:L,error:D}=await this._getUser(f);if(D)throw D;const Y={provider_token:l,provider_refresh_token:d,access_token:f,expires_in:w,expires_at:O,refresh_token:h,token_type:g,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:Y,redirectType:n.type},error:null})}catch(l){if(re(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const i=await os(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&i)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async i=>{var l;const{data:d,error:f}=i;if(f)return this._returnResult({error:f});const h=(l=d.session)===null||l===void 0?void 0:l.access_token;if(h){const{error:v}=await this.admin.signOut(h,n);if(v&&!(Eb(v)&&(v.status===404||v.status===401||v.status===403)))return this._returnResult({error:v})}return n!=="others"&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const i=zb(),l={id:i,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async i=>{var l,d;try{const{data:{session:f},error:h}=i;if(h)throw h;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",n,"session",f)}catch(f){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",f),console.error(f)}})}async resetPasswordForEmail(n,i={}){let l=null,d=null;this.flowType==="pkce"&&([l,d]=await Fs(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:d,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(f){if(re(f))return this._returnResult({data:null,error:f});throw f}}async getUserIdentities(){var n;try{const{data:i,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=i.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var i;try{const{data:l,error:d}=await this._useSession(async f=>{var h,v,p,g,y;const{data:w,error:O}=f;if(O)throw O;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(v=n.options)===null||v===void 0?void 0:v.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",_,{headers:this.headers,jwt:(y=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(d)throw d;return rt()&&!(!((i=n.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:n.provider,url:l?.url},error:null})}catch(l){if(re(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async i=>{var l;try{const{error:d,data:{session:f}}=i;if(d)throw d;const{options:h,provider:v,token:p,access_token:g,nonce:y}=n,w=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=f?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:v,id_token:p,access_token:g,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Gt}),{data:O,error:_}=w;return _?this._returnResult({data:{user:null,session:null},error:_}):!O||!O.session||!O.user?this._returnResult({data:{user:null,session:null},error:new Ws}):(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("USER_UPDATED",O.session)),this._returnResult({data:O,error:_}))}catch(d){if(re(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(n){try{return await this._useSession(async i=>{var l,d;const{data:f,error:h}=i;if(h)throw h;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(n){const i=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(i,"begin");try{const l=Date.now();return await Lb(async d=>(d>0&&await Bb(200*Math.pow(2,d-1)),this._debug(i,"refreshing attempt",d),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Gt})),(d,f)=>{const h=200*Math.pow(2,d);return f&&So(f)&&Date.now()+h-l<sn})}catch(l){if(this._debug(i,"error",l),re(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(i,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,i){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",i,"url",l),rt()&&!i.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,i;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const d=await os(this.storage,this.storageKey);if(d&&this.userStorage){let h=await os(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:d.user},await nn(this.userStorage,this.storageKey+"-user",h)),d.user=(n=h?.user)!==null&&n!==void 0?n:Eo()}else if(d&&!d.user&&!d.user){const h=await os(this.storage,this.storageKey+"-user");h&&h?.user?(d.user=h.user,await Ha(this.storage,this.storageKey+"-user"),await nn(this.storage,this.storageKey,d)):d.user=Eo()}if(this._debug(l,"session from storage",d),!this._isValidSession(d)){this._debug(l,"session is not valid"),d!==null&&await this._removeSession();return}const f=((i=d.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<jo;if(this._debug(l,`session has${f?"":" not"} expired with margin of ${jo}s`),f){if(this.autoRefreshToken&&d.refresh_token){const{error:h}=await this._callRefreshToken(d.refresh_token);h&&(console.error(h),So(h)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:v}=await this._getUser(d.access_token);!v&&h?.user?(d.user=h.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(l,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(l,"error",d),console.error(d);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var i,l;if(!n)throw new Vt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Ql;const{data:f,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!f.session)throw new Vt;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const v={data:f.session,error:null};return this.refreshingDeferred.resolve(v),v}catch(f){if(this._debug(d,"error",f),re(f)){const h={data:null,error:f};return So(f)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(f),f}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,i,l=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",i,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:i});const f=[],h=Array.from(this.stateChangeEmitters.values()).map(async v=>{try{await v.callback(n,i)}catch(p){f.push(p)}});if(await Promise.all(h),f.length>0){for(let v=0;v<f.length;v+=1)console.error(f[v]);throw f[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const i=Object.assign({},n),l=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&i.user&&await nn(this.userStorage,this.storageKey+"-user",{user:i.user});const d=Object.assign({},i);delete d.user;const f=km(d);await nn(this.storage,this.storageKey,f)}else{const d=km(i);await nn(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await Ha(this.storage,this.storageKey),await Ha(this.storage,this.storageKey+"-code-verifier"),await Ha(this.storage,this.storageKey+"-user"),this.userStorage&&await Ha(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&rt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),sn);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async i=>{const{data:{session:l}}=i;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((l.expires_at*1e3-n)/sn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${sn}ms, refresh threshold is ${qo} ticks`),d<=qo&&await this._callRefreshToken(l.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof T0)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const i=`#_onVisibilityChanged(${n})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,i,l){const d=[`provider=${encodeURIComponent(i)}`];if(l?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&d.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[f,h]=await Fs(this.storage,this.storageKey),v=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(h)}`});d.push(v.toString())}if(l?.queryParams){const f=new URLSearchParams(l.queryParams);d.push(f.toString())}return l?.skipBrowserRedirect&&d.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async i=>{var l;const{data:d,error:f}=i;return f?this._returnResult({data:null,error:f}):await de(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token})})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(n){try{return await this._useSession(async i=>{var l,d;const{data:f,error:h}=i;if(h)return this._returnResult({data:null,error:h});const v=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:g}=await de(this.fetch,"POST",`${this.url}/factors`,{body:v,headers:this.headers,jwt:(l=f?.session)===null||l===void 0?void 0:l.access_token});return g?this._returnResult({data:null,error:g}):(n.factorType==="totp"&&p.type==="totp"&&(!((d=p?.totp)===null||d===void 0)&&d.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var l;const{data:d,error:f}=i;if(f)return this._returnResult({data:null,error:f});const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?gy(n.webauthn.credential_response):py(n.webauthn.credential_response)})}:{code:n.code}),{data:v,error:p}=await de(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+v.expires_in},v)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",v),this._returnResult({data:v,error:p}))})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var l;const{data:d,error:f}=i;if(f)return this._returnResult({data:null,error:f});const h=await de(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});if(h.error)return h;const{data:v}=h;if(v.type!=="webauthn")return{data:v,error:null};switch(v.webauthn.type){case"create":return{data:Object.assign(Object.assign({},v),{webauthn:Object.assign(Object.assign({},v.webauthn),{credential_options:Object.assign(Object.assign({},v.webauthn.credential_options),{publicKey:hy(v.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},v),{webauthn:Object.assign(Object.assign({},v.webauthn),{credential_options:Object.assign(Object.assign({},v.webauthn.credential_options),{publicKey:my(v.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(n){const{data:i,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:i.id,code:n.code})}async _listFactors(){var n;const{data:{user:i},error:l}=await this.getUser();if(l)return{data:null,error:l};const d={all:[],phone:[],totp:[],webauthn:[]};for(const f of(n=i?.factors)!==null&&n!==void 0?n:[])d.all.push(f),f.status==="verified"&&d[f.factor_type].push(f);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var n,i;const{data:{session:l},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=No(l.access_token);let h=null;f.aal&&(h=f.aal);let v=h;((i=(n=l.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(v="aal2");const g=f.amr||[];return{data:{currentLevel:h,nextLevel:v,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async i=>{const{data:{session:l},error:d}=i;return d?this._returnResult({data:null,error:d}):l?await de(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(n,i){try{return await this._useSession(async l=>{const{data:{session:d},error:f}=l;if(f)return this._returnResult({data:null,error:f});if(!d)return this._returnResult({data:null,error:new Vt});const h=await de(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:v=>({data:v,error:null})});return h.data&&h.data.redirect_url&&rt()&&!i?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,i){try{return await this._useSession(async l=>{const{data:{session:d},error:f}=l;if(f)return this._returnResult({data:null,error:f});if(!d)return this._returnResult({data:null,error:new Vt});const h=await de(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:v=>({data:v,error:null})});return h.data&&h.data.redirect_url&&rt()&&!i?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(n,i={keys:[]}){let l=i.keys.find(v=>v.kid===n);if(l)return l;const d=Date.now();if(l=this.jwks.keys.find(v=>v.kid===n),l&&this.jwks_cached_at+Sb>d)return l;const{data:f,error:h}=await de(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=d,l=f.keys.find(v=>v.kid===n),!l)?null:l}async getClaims(n,i={}){try{let l=n;if(!l){const{data:_,error:A}=await this.getSession();if(A||!_.session)return this._returnResult({data:null,error:A});l=_.session.access_token}const{header:d,payload:f,signature:h,raw:{header:v,payload:p}}=No(l);i?.allowExpired||Qb(f.exp);const g=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!g){const{error:_}=await this.getUser(l);if(_)throw _;return{data:{claims:f,header:d,signature:h},error:null}}const y=Xb(d.alg),w=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,h,Db(`${v}.${p}`)))throw new Ho("Invalid JWT signature");return{data:{claims:f,header:d,signature:h},error:null}}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}}di.nextInstanceID=0;const Ny=di;class Ey extends Ny{constructor(n){super(n)}}class Ty{constructor(n,i,l){var d,f,h;this.supabaseUrl=n,this.supabaseKey=i;const v=yb(n);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",v),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",v),this.storageUrl=new URL("storage/v1",v),this.functionsUrl=new URL("functions/v1",v);const p=`sb-${v.hostname.split(".")[0]}-auth-token`,g={db,realtime:hb,auth:Object.assign(Object.assign({},fb),{storageKey:p}),global:cb},y=bb(l??{},g);this.storageKey=(d=y.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(f=y.global.headers)!==null&&f!==void 0?f:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(w,O)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(O)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=pb(i,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new xv(new URL("rest/v1",v).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new rb(this.storageUrl.href,this.headers,this.fetch,l?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new pv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,i={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,i,l)}channel(n,i={config:{}}){return this.realtime.channel(n,i)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,i;if(this.accessToken)return await this.accessToken();const{data:l}=await this.auth.getSession();return(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:i,detectSessionInUrl:l,storage:d,userStorage:f,storageKey:h,flowType:v,lock:p,debug:g,throwOnError:y},w,O){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ey({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),w),storageKey:h,autoRefreshToken:n,persistSession:i,detectSessionInUrl:l,storage:d,userStorage:f,flowType:v,lock:p,debug:g,throwOnError:y,fetch:O,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new qv(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,l)=>{this._handleTokenChanged(i,"CLIENT",l?.access_token)})}_handleTokenChanged(n,i,l){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Oy=(o,n,i)=>new Ty(o,n,i);function Ay(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Ay()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ky="https://fxiuqlouxuoskdjwpmrb.supabase.co",Ry="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4aXVxbG91eHVvc2tkandwbXJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMjYzODgsImV4cCI6MjA3NzkwMjM4OH0.x4owleHE2PYqd8FEXeIltgVvqZg0B8DQuMz04W-U5ac",ne=Oy(ky,Ry);function Cy({onLogin:o}){const[n,i]=X.useState(""),[l,d]=X.useState(""),[f,h]=X.useState(!1),[v,p]=X.useState(""),g=async y=>{y.preventDefault(),p(""),h(!0);try{const{error:w}=await ne.auth.signInWithPassword({email:n,password:l});if(w)throw w;o()}catch(w){p(w.message||"Prisijungimo klaida")}finally{h(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 px-4",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-2xl font-bold text-white",children:"AI"})}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"AIPLENK"}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Prisijunkite prie sistemos"})]}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[v&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:v}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"El. patas"}),r.jsx("input",{id:"email",type:"email",value:n,onChange:y=>i(y.target.value),required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"jusu@pastas.lt"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Slaptaodis"}),r.jsx("input",{id:"password",type:"password",value:l,onChange:y=>d(y.target.value),required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:""})]}),r.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Jungiamasi...":"Prisijungti"})]})]})})})}function Dy({currentView:o,setCurrentView:n,stats:i,userEmail:l,userRole:d,onLogout:f}){const[h,v]=mo.useState(!1),[p,g]=mo.useState(!1);return mo.useEffect(()=>{(o==="purchases"||o==="product-tree")&&v(!0),(o==="uploaded-documents"||o==="upload-document")&&g(!0)},[o]),r.jsxs("nav",{className:"w-64 sidebar flex flex-col",children:[r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"AI"})}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xl font-semibold text-slate-800 block leading-none",children:"AIPLENK"}),r.jsx("span",{className:"text-xs text-slate-500",children:"v1.0.0"})]})]})}),r.jsxs("ul",{className:"flex-grow px-3 space-y-1",children:[r.jsx("li",{children:r.jsxs("a",{onClick:y=>{y.preventDefault(),n("dashboard")},href:"#",className:`nav-link flex items-center px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="dashboard"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-home w-5 mr-3 text-base"}),r.jsx("span",{children:"Darbalaukis"})]})}),r.jsx("li",{className:"pt-4 pb-2 px-4",children:r.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Atpainimas"})}),r.jsxs("li",{children:[r.jsxs("button",{onClick:()=>g(!p),className:`nav-link flex items-center w-full px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="uploaded-documents"||o==="upload-document"?"bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-cloud-upload-alt w-5 mr-3 text-base"}),r.jsx("span",{className:"flex-1 text-left",children:"kelti dokumentai"}),r.jsx("i",{className:`fas fa-chevron-down text-xs transition-transform ${p?"rotate-180":""}`})]}),p&&r.jsxs("ul",{className:"mt-1 ml-4 space-y-1",children:[r.jsx("li",{children:r.jsx("a",{onClick:y=>{y.preventDefault(),n("uploaded-documents")},href:"#",className:`nav-link flex items-center px-4 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg text-sm ${o==="uploaded-documents"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:r.jsx("span",{children:"Sraas"})})}),r.jsx("li",{children:r.jsx("a",{onClick:y=>{y.preventDefault(),n("upload-document")},href:"#",className:`nav-link flex items-center px-4 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg text-sm ${o==="upload-document"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:r.jsx("span",{children:"kelti nauj"})})})]})]}),r.jsx("li",{className:"pt-4 pb-2 px-4",children:r.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Dokumentai"})}),r.jsx("li",{children:r.jsxs("a",{onClick:y=>{y.preventDefault(),n("purchase-invoices")},href:"#",className:`nav-link flex items-center px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="purchase-invoices"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-file-invoice w-5 mr-3 text-base"}),r.jsx("span",{children:"Pirkimo Sskaitos"}),i.needsReview>0&&r.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:i.needsReview})]})}),r.jsx("li",{children:r.jsxs("a",{onClick:y=>{y.preventDefault(),n("sales-invoices")},href:"#",className:`nav-link flex items-center px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="sales-invoices"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-receipt w-5 mr-3 text-base"}),r.jsx("span",{children:"Pardavimo Sskaitos"})]})}),r.jsx("li",{className:"pt-4 pb-2 px-4",children:r.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Sistema"})}),r.jsx("li",{children:r.jsxs("a",{onClick:y=>{y.preventDefault(),n("companies")},href:"#",className:`nav-link flex items-center px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="companies"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-building w-5 mr-3 text-base"}),r.jsx("span",{children:"mons"})]})}),r.jsxs("li",{children:[r.jsxs("button",{onClick:()=>v(!h),className:`nav-link flex items-center w-full px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="purchases"||o==="product-tree"?"bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-shopping-cart w-5 mr-3 text-base"}),r.jsx("span",{className:"flex-1 text-left",children:"Pirkimai"}),r.jsx("i",{className:`fas fa-chevron-down text-xs transition-transform ${h?"rotate-180":""}`})]}),h&&r.jsxs("ul",{className:"mt-1 ml-4 space-y-1",children:[r.jsx("li",{children:r.jsx("a",{onClick:y=>{y.preventDefault(),n("purchases")},href:"#",className:`nav-link flex items-center px-4 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg text-sm ${o==="purchases"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:r.jsx("span",{children:"Preks"})})}),r.jsx("li",{children:r.jsx("a",{onClick:y=>{y.preventDefault(),n("product-tree")},href:"#",className:`nav-link flex items-center px-4 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg text-sm ${o==="product-tree"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:r.jsx("span",{children:"Preki medis"})})})]})]}),r.jsx("li",{children:r.jsxs("a",{onClick:y=>{y.preventDefault(),n("export")},href:"#",className:`nav-link flex items-center px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="export"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-file-export w-5 mr-3 text-base"}),r.jsx("span",{children:"Eksportai"})]})}),r.jsx("li",{children:r.jsxs("a",{onClick:y=>{y.preventDefault(),n("reports")},href:"#",className:`nav-link flex items-center px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="reports"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-chart-bar w-5 mr-3 text-base"}),r.jsx("span",{children:"Ataskaitos"})]})}),r.jsx("li",{children:r.jsxs("a",{onClick:y=>{y.preventDefault(),n("users")},href:"#",className:`nav-link flex items-center px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg ${o==="users"?"active bg-indigo-50 text-indigo-700 font-medium":""}`,children:[r.jsx("i",{className:"fas fa-users w-5 mr-3 text-base"}),r.jsx("span",{children:"Vartotojai"})]})})]}),r.jsx("div",{className:"p-4 border-t border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 rounded-lg",children:[r.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center text-white font-semibold text-sm",children:l.substring(0,2).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-slate-700 truncate",children:l}),r.jsx("div",{className:"text-xs text-slate-500",children:d==="admin"?"Administratorius":"Vartotojas"})]}),r.jsx("button",{onClick:f,className:"text-slate-400 hover:text-red-500 transition-colors",title:"Atsijungti",children:r.jsx("i",{className:"fas fa-sign-out-alt"})})]})})]})}function Uy({currentDate:o,stats:n,setShowUploadModal:i,setCurrentView:l}){return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 px-8 py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-1",children:"Darbalaukis"}),r.jsx("p",{className:"text-slate-500 time-display",children:o})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[r.jsx("i",{className:"fas fa-bell text-slate-600"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Praneimai"}),r.jsx("span",{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:"3"})]}),r.jsxs("button",{onClick:()=>i(!0),className:"px-5 py-2 bg-gradient-to-r from-indigo-600 to-indigo-500 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-600 transition-all shadow-sm flex items-center gap-2 quick-action",children:[r.jsx("i",{className:"fas fa-plus text-sm"}),r.jsx("span",{className:"font-medium",children:"kelti Sskait"})]})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("i",{className:"fas fa-exclamation-triangle text-red-500"}),r.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Reikia Dmesio"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"alert-card card p-4 border-l-4 border-red-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsxs("span",{className:"badge badge-urgent",children:[r.jsx("i",{className:"fas fa-circle text-xs"}),"Skubu"]}),r.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"5 sskaitos laukia periros"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Sskaitos su neatpaintomis arba nepatvirtintomis eilutmis"})]}),r.jsx("button",{onClick:()=>l("purchase-invoices"),className:"px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors font-medium text-sm",children:"Perirti "})]})}),r.jsx("div",{className:"alert-card card p-4 border-l-4 border-amber-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsxs("span",{className:"badge badge-warning",children:[r.jsx("i",{className:"fas fa-circle text-xs"}),"spjimas"]}),r.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"12 neatpaint preki eilui"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Reikalingas rankinis susiejimas su preki katalogu"})]}),r.jsx("button",{className:"px-4 py-2 bg-amber-50 text-amber-700 rounded-lg hover:bg-amber-100 transition-colors font-medium text-sm",children:"Valdyti "})]})}),r.jsx("div",{className:"alert-card card p-4 border-l-4 border-blue-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsxs("span",{className:"badge badge-info",children:[r.jsx("i",{className:"fas fa-circle text-xs"}),"Info"]}),r.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"3 tiekjai su pakartotinmis klaidomis"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:'UAB "Statyb Partneris", UAB "Neinomi rankiai", UAB "Tvirtas Vartas"'})]}),r.jsx("button",{className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors font-medium text-sm",children:"Analizuoti "})]})})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"iandien"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"stat-mini p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("i",{className:"fas fa-upload text-blue-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"kelta"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-800 mb-1",children:n.todayUploaded}),r.jsx("p",{className:"text-xs text-slate-500",children:"sskaitos iandien"})]}),r.jsxs("div",{className:"stat-mini p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-lg flex items-center justify-center",children:r.jsx("i",{className:"fas fa-check-circle text-emerald-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Validuota"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-800 mb-1",children:n.todayValidated}),r.jsx("p",{className:"text-xs text-slate-500",children:"sskaitos iandien"})]}),r.jsxs("div",{className:"stat-mini p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("i",{className:"fas fa-download text-purple-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Eksportuota"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-800 mb-1",children:n.todayExported}),r.jsx("p",{className:"text-xs text-slate-500",children:"raai iandien"})]}),r.jsxs("div",{className:"stat-mini p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg flex items-center justify-center",children:r.jsx("i",{className:"fas fa-pencil-alt text-amber-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Korekcijos"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-800 mb-1",children:n.todayCorrections}),r.jsx("p",{className:"text-xs text-slate-500",children:"pakeitimai iandien"})]})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Greiti Veiksmai"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>i(!0),className:"card p-6 text-left hover:shadow-lg transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx("i",{className:"fas fa-upload text-indigo-600 text-xl"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"kelti Sskait"}),r.jsx("p",{className:"text-sm text-slate-600",children:"kelkite nauj pirkimo ar pardavimo sskait"})]}),r.jsxs("button",{onClick:()=>l("export"),className:"card p-6 text-left hover:shadow-lg transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx("i",{className:"fas fa-file-export text-emerald-600 text-xl"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Eksportuoti Duomenis"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Eksportuokite validuotas sskaitas"})]}),r.jsxs("button",{onClick:()=>l("reports"),className:"card p-6 text-left hover:shadow-lg transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx("i",{className:"fas fa-chart-line text-purple-600 text-xl"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Perirti Ataskaitas"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Analizuokite duomenis ir tendencijas"})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Paskutin Veikla"}),r.jsx("div",{className:"card p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-4 pb-4 border-b border-slate-100 last:border-0 last:pb-0",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx("i",{className:"fas fa-check text-green-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Sskaita TV-843 validuota"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Prie 5 minutes  Mantas Petraitis"})]})]}),r.jsxs("div",{className:"flex gap-4 pb-4 border-b border-slate-100 last:border-0 last:pb-0",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx("i",{className:"fas fa-upload text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-800",children:"kelta 3 naujos sskaitos"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Prie 15 minui  Sistema"})]})]}),r.jsxs("div",{className:"flex gap-4 pb-4 border-b border-slate-100 last:border-0 last:pb-0",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx("i",{className:"fas fa-download text-purple-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Eksportuota 12 sskait  Rivils sistem"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Prie 1 valand  Mantas Petraitis"})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx("i",{className:"fas fa-link text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-800",children:"5 preks susietos rankiniu bdu"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Prie 2 valandas  Mantas Petraitis"})]})]})]})})]})]})})]})}function zy({currentUserRole:o}){const[n,i]=X.useState([]),[l,d]=X.useState(!0),[f,h]=X.useState(!1),[v,p]=X.useState(!1),[g,y]=X.useState(null),[w,O]=X.useState(""),[_,A]=X.useState(""),[L,D]=X.useState("user"),[Y,q]=X.useState("");X.useEffect(()=>{z()},[]);const z=async()=>{try{const{data:x,error:Z}=await ne.from("profiles").select("*").order("created_at",{ascending:!1});if(Z)throw Z;i(x||[])}catch(x){console.error("Error fetching users:",x)}finally{d(!1)}},Q=async x=>{if(x.preventDefault(),q(""),o!=="admin"){q("Tik administratoriai gali pridti vartotojus");return}try{const{data:{session:Z}}=await ne.auth.getSession(),{data:J,error:ae}=await ne.auth.signUp({email:w,password:_,options:{data:{role:L}}});if(ae)throw ae;if(J.user){const{error:V}=await ne.from("profiles").update({role:L}).eq("id",J.user.id);if(V)throw V}Z&&await ne.auth.setSession({access_token:Z.access_token,refresh_token:Z.refresh_token}),h(!1),O(""),A(""),D("user"),z()}catch(Z){q(Z.message||"Klaida pridedant vartotoj")}},F=x=>{y({id:x.id,email:x.email,role:x.role}),p(!0),q("")},te=async x=>{if(x.preventDefault(),q(""),!!g){if(o!=="admin"){q("Tik administratoriai gali koreguoti vartotojus");return}try{const{error:Z}=await ne.from("profiles").update({email:g.email,role:g.role}).eq("id",g.id);if(Z)throw Z;p(!1),y(null),z()}catch(Z){q(Z.message||"Klaida atnaujinant vartotoj")}}},S=async(x,Z)=>{if(o!=="admin"){alert("Tik administratoriai gali itrinti vartotojus");return}if(Z==="admin"){alert("Negalima itrinti administratoriaus");return}if(confirm("Ar tikrai norite itrinti  vartotoj?"))try{const{error:J}=await ne.from("profiles").delete().eq("id",x);if(J)throw J;z()}catch(J){alert("Klaida: "+J.message)}};return l?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"text-slate-600",children:"Kraunama..."})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Vartotojai"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Sistemos vartotoj valdymas"})]}),o==="admin"&&r.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition flex items-center gap-2",children:[r.jsx("i",{className:"fas fa-plus"}),"Pridti Vartotoj"]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-700",children:"El. patas"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-700",children:"Rol"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-700",children:"Sukurta"}),o==="admin"&&r.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-slate-700",children:"Veiksmai"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:n.map(x=>r.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[r.jsx("td",{className:"px-6 py-4 text-slate-900",children:x.email}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-semibold ${x.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:x.role==="admin"?"Administratorius":"Vartotojas"})}),r.jsx("td",{className:"px-6 py-4 text-slate-600",children:new Date(x.created_at).toLocaleDateString("lt-LT")}),o==="admin"&&r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:()=>F(x),className:"text-blue-600 hover:text-blue-700 transition",title:"Koreguoti",children:r.jsx("i",{className:"fas fa-edit"})}),x.role!=="admin"&&r.jsx("button",{onClick:()=>S(x.id,x.role),className:"text-red-600 hover:text-red-700 transition",title:"Itrinti",children:r.jsx("i",{className:"fas fa-trash"})})]})})]},x.id))})]})}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Pridti Nauj Vartotoj"}),Y&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm mb-4",children:Y}),r.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"El. patas"}),r.jsx("input",{type:"email",value:w,onChange:x=>O(x.target.value),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Slaptaodis"}),r.jsx("input",{type:"password",value:_,onChange:x=>A(x.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Rol"}),r.jsxs("select",{value:L,onChange:x=>D(x.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"user",children:"Vartotojas"}),r.jsx("option",{value:"admin",children:"Administratorius"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{h(!1),q("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",children:"Ataukti"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Pridti"})]})]})]})}),v&&g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Koreguoti Vartotoj"}),Y&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm mb-4",children:Y}),r.jsxs("form",{onSubmit:te,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"El. patas"}),r.jsx("input",{type:"email",value:g.email,onChange:x=>y({...g,email:x.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Rol"}),r.jsxs("select",{value:g.role,onChange:x=>y({...g,role:x.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"user",children:"Vartotojas"}),r.jsx("option",{value:"admin",children:"Administratorius"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{p(!1),y(null),q("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",children:"Ataukti"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Isaugoti"})]})]})]})})]})]})}function My({userRole:o}){const[n,i]=X.useState([]),[l,d]=X.useState([]),[f,h]=X.useState([]),[v,p]=X.useState(!0),[g,y]=X.useState(""),[w,O]=X.useState(null),[_,A]=X.useState(!1),[L,D]=X.useState(!1),Y=M=>{if(!M)return"";const I=new Date(M),pe=I.getFullYear(),B=String(I.getMonth()+1).padStart(2,"0"),P=String(I.getDate()).padStart(2,"0");return`${pe}-${B}-${P}`},[q,z]=X.useState({invoice_number:"",supplier:"",invoice_date:new Date().toISOString().split("T")[0],total_amount:0,currency:"EUR",notes:""}),[Q,F]=X.useState({product_name:"",description:"",quantity:1,unit_price:0,unit:"vnt",category_id:""});X.useEffect(()=>{te(),x()},[]),X.useEffect(()=>{w&&S(w)},[w]);const te=async()=>{try{p(!0);const{data:M,error:I}=await ne.from("invoices").select("*").order("invoice_date",{ascending:!1});if(I)throw I;i(M||[])}catch(M){y(M.message)}finally{p(!1)}},S=async M=>{try{const{data:I,error:pe}=await ne.from("purchases").select("*").eq("invoice_id",M).order("created_at",{ascending:!0});if(pe)throw pe;d(I||[])}catch(I){y(I.message)}},x=async()=>{try{const{data:M,error:I}=await ne.from("product_categories").select("id, name").order("name");if(I)throw I;h(M||[])}catch(M){console.error("Error fetching categories:",M)}},Z=async M=>{if(M.preventDefault(),o!=="admin"){y("Tik administratoriai gali pridti sskaitas");return}try{const{data:{user:I}}=await ne.auth.getUser(),{error:pe}=await ne.from("invoices").insert([{...q,created_by:I?.id}]);if(pe)throw pe;A(!1),z({invoice_number:"",supplier:"",invoice_date:new Date().toISOString().split("T")[0],total_amount:0,currency:"EUR",notes:""}),te()}catch(I){y(I.message)}},J=async M=>{if(M.preventDefault(),o!=="admin"||!w){y("Pasirinkite sskait");return}try{const I=Q.quantity*Q.unit_price,{error:pe}=await ne.from("purchases").insert([{...Q,invoice_id:w,total_price:I,category_id:Q.category_id||null}]);if(pe)throw pe;D(!1),F({product_name:"",description:"",quantity:1,unit_price:0,unit:"vnt",category_id:""}),S(w)}catch(I){y(I.message)}},ae=async M=>{if(confirm("Ar tikrai norite itrinti i sskait?"))try{const{error:I}=await ne.from("invoices").delete().eq("id",M);if(I)throw I;w===M&&(O(null),d([])),te()}catch(I){y(I.message)}},V=async M=>{if(confirm("Ar tikrai norite itrinti i prek?"))try{const{error:I}=await ne.from("purchases").delete().eq("id",M);if(I)throw I;w&&S(w)}catch(I){y(I.message)}};return v?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-slate-500",children:"Kraunama..."})}):r.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[r.jsx("div",{className:"bg-white border-b border-slate-200 px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Preks"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Pirkim sskait ir preki valdymas"})]}),o==="admin"&&r.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx("i",{className:"fas fa-plus mr-2"}),"Pridti Sskait"]})]})}),g&&r.jsx("div",{className:"mx-8 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:g}),r.jsxs("div",{className:"flex-1 overflow-hidden flex gap-4 p-8",children:[r.jsxs("div",{className:"w-1/3 bg-white rounded-lg shadow-sm border border-slate-200 flex flex-col",children:[r.jsx("div",{className:"p-4 border-b border-slate-200",children:r.jsx("h2",{className:"font-semibold text-slate-800",children:"Sskaitos"})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:n.length===0?r.jsx("div",{className:"p-4 text-center text-slate-500",children:"Nra sskait"}):r.jsx("div",{className:"divide-y divide-slate-200",children:n.map(M=>r.jsx("div",{className:`p-4 cursor-pointer hover:bg-slate-50 transition-colors ${w===M.id?"bg-blue-50 border-l-4 border-blue-600":""}`,onClick:()=>O(M.id),children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-slate-800",children:M.invoice_number}),r.jsx("div",{className:"text-sm text-slate-600",children:M.supplier}),r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:Y(M.invoice_date)})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-semibold text-slate-800",children:[M.total_amount.toFixed(2)," ",M.currency]}),o==="admin"&&r.jsx("button",{onClick:I=>{I.stopPropagation(),ae(M.id)},className:"text-red-500 hover:text-red-700 text-sm mt-1",children:r.jsx("i",{className:"fas fa-trash"})})]})]})},M.id))})})]}),r.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow-sm border border-slate-200 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[r.jsx("h2",{className:"font-semibold text-slate-800",children:w?"Preks sskaitoje":"Pasirinkite sskait"}),w&&o==="admin"&&r.jsxs("button",{onClick:()=>D(!0),className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx("i",{className:"fas fa-plus mr-2"}),"Pridti Prek"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:w?l.length===0?r.jsx("div",{className:"p-4 text-center text-slate-500",children:"Sskaitoje nra preki"}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Prek"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Kiekis"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Vnt. kaina"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Suma"}),o==="admin"&&r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Veiksmai"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:l.map(M=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsxs("td",{className:"py-3 px-4",children:[r.jsx("div",{className:"font-medium text-slate-800",children:M.product_name}),M.description&&r.jsx("div",{className:"text-sm text-slate-500",children:M.description})]}),r.jsxs("td",{className:"py-3 px-4 text-slate-600",children:[M.quantity," ",M.unit]}),r.jsx("td",{className:"py-3 px-4 text-right text-slate-600",children:M.unit_price.toFixed(2)}),r.jsx("td",{className:"py-3 px-4 text-right font-semibold text-slate-800",children:M.total_price.toFixed(2)}),o==="admin"&&r.jsx("td",{className:"py-3 px-4 text-center",children:r.jsx("button",{onClick:()=>V(M.id),className:"text-red-500 hover:text-red-700",children:r.jsx("i",{className:"fas fa-trash"})})})]},M.id))})]}):r.jsx("div",{className:"flex items-center justify-center h-full text-slate-400",children:"Pasirinkite sskait i kairs srao"})})]})]}),_&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800",children:"Nauja Sskaita"}),r.jsxs("form",{onSubmit:Z,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sskaitos numeris"}),r.jsx("input",{type:"text",value:q.invoice_number,onChange:M=>z({...q,invoice_number:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tiekjas"}),r.jsx("input",{type:"text",value:q.supplier,onChange:M=>z({...q,supplier:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Data"}),r.jsx("input",{type:"date",value:q.invoice_date,onChange:M=>z({...q,invoice_date:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Suma"}),r.jsx("input",{type:"number",step:"0.01",value:q.total_amount,onChange:M=>z({...q,total_amount:parseFloat(M.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Pastabos"}),r.jsx("textarea",{value:q.notes,onChange:M=>z({...q,notes:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>A(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Ataukti"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Pridti"})]})]})]})}),L&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800",children:"Nauja Prek"}),r.jsxs("form",{onSubmit:J,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Preks pavadinimas"}),r.jsx("input",{type:"text",value:Q.product_name,onChange:M=>F({...Q,product_name:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apraymas"}),r.jsx("input",{type:"text",value:Q.description,onChange:M=>F({...Q,description:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Kategorija"}),r.jsxs("select",{value:Q.category_id,onChange:M=>F({...Q,category_id:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Pasirinkite kategorij"}),f.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Kiekis"}),r.jsx("input",{type:"number",step:"0.001",value:Q.quantity,onChange:M=>F({...Q,quantity:parseFloat(M.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Vienetas"}),r.jsxs("select",{value:Q.unit,onChange:M=>F({...Q,unit:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"vnt",children:"vnt"}),r.jsx("option",{value:"kg",children:"kg"}),r.jsx("option",{value:"l",children:"l"}),r.jsx("option",{value:"m",children:"m"}),r.jsx("option",{value:"m",children:"m"}),r.jsx("option",{value:"m",children:"m"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Vieneto kaina"}),r.jsx("input",{type:"number",step:"0.01",value:Q.unit_price,onChange:M=>F({...Q,unit_price:parseFloat(M.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsx("div",{className:"bg-slate-50 p-3 rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Suma:"}),r.jsxs("span",{className:"text-lg font-bold text-slate-800",children:[(Q.quantity*Q.unit_price).toFixed(2)," EUR"]})]})})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>D(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Ataukti"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Pridti"})]})]})]})})]})}function qy({userRole:o}){const[n,i]=X.useState([]),[l,d]=X.useState(!0),[f,h]=X.useState(""),[v,p]=X.useState(!1),[g,y]=X.useState(null),[w,O]=X.useState(new Set),[_,A]=X.useState({name:"",parent_id:"",description:""});X.useEffect(()=>{L()},[]);const L=async()=>{try{d(!0);const{data:S,error:x}=await ne.from("product_categories").select("*").order("name");if(x)throw x;const Z=D(S||[]);i(Z)}catch(S){h(S.message)}finally{d(!1)}},D=S=>{const x=new Map,Z=[];return S.forEach(J=>{x.set(J.id,{...J,children:[]})}),S.forEach(J=>{const ae=x.get(J.id);if(J.parent_id===null)Z.push(ae);else{const V=x.get(J.parent_id);V&&V.children.push(ae)}}),Z},Y=S=>{const x=[],Z=J=>{J.forEach(ae=>{x.push(ae),ae.children&&ae.children.length>0&&Z(ae.children)})};return Z(S),x},q=async S=>{if(S.preventDefault(),o!=="admin"){h("Tik administratoriai gali pridti kategorijas");return}try{const{error:x}=await ne.from("product_categories").insert([{name:_.name,parent_id:_.parent_id||null,description:_.description||null}]);if(x)throw x;p(!1),A({name:"",parent_id:"",description:""}),L()}catch(x){h(x.message)}},z=async S=>{if(S.preventDefault(),!(!g||o!=="admin"))try{const{error:x}=await ne.from("product_categories").update({name:g.name,parent_id:g.parent_id||null,description:g.description||null}).eq("id",g.id);if(x)throw x;y(null),L()}catch(x){h(x.message)}},Q=async S=>{if(confirm("Ar tikrai norite itrinti i kategorij? Bus itrintos ir visos pokategorijos."))try{const{error:x}=await ne.from("product_categories").delete().eq("id",S);if(x)throw x;L()}catch(x){h(x.message)}},F=S=>{const x=new Set(w);x.has(S)?x.delete(S):x.add(S),O(x)},te=(S,x=0)=>{const Z=S.children&&S.children.length>0,J=w.has(S.id);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 py-3 px-4 hover:bg-slate-50 rounded-lg group",style:{paddingLeft:`${x*2+1}rem`},children:[Z&&r.jsx("button",{onClick:()=>F(S.id),className:"w-5 h-5 flex items-center justify-center text-slate-400 hover:text-slate-600",children:r.jsx("i",{className:`fas fa-chevron-${J?"down":"right"} text-xs`})}),!Z&&r.jsx("div",{className:"w-5"}),r.jsx("i",{className:"fas fa-folder text-blue-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-slate-800",children:S.name}),S.description&&r.jsx("div",{className:"text-sm text-slate-500",children:S.description})]}),o==="admin"&&r.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-2",children:[r.jsx("button",{onClick:()=>y(S),className:"text-blue-600 hover:text-blue-700 p-1",title:"Redaguoti",children:r.jsx("i",{className:"fas fa-edit"})}),r.jsx("button",{onClick:()=>Q(S.id),className:"text-red-500 hover:text-red-700 p-1",title:"Itrinti",children:r.jsx("i",{className:"fas fa-trash"})})]})]}),Z&&J&&r.jsx("div",{children:S.children.map(ae=>te(ae,x+1))})]},S.id)};return l?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-slate-500",children:"Kraunama..."})}):r.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[r.jsx("div",{className:"bg-white border-b border-slate-200 px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Preki Medis"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Preki kategorij hierarchijos valdymas"})]}),o==="admin"&&r.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx("i",{className:"fas fa-plus mr-2"}),"Pridti Kategorij"]})]})}),f&&r.jsx("div",{className:"mx-8 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:f}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:n.length===0?r.jsxs("div",{className:"text-center py-12 text-slate-400",children:[r.jsx("i",{className:"fas fa-folder-open text-4xl mb-4"}),r.jsx("p",{children:"Nra sukurt kategorij"})]}):r.jsx("div",{className:"space-y-1",children:n.map(S=>te(S))})})}),v&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800",children:"Nauja Kategorija"}),r.jsxs("form",{onSubmit:q,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Pavadinimas"}),r.jsx("input",{type:"text",value:_.name,onChange:S=>A({..._,name:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tvin kategorija"}),r.jsxs("select",{value:_.parent_id,onChange:S=>A({..._,parent_id:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Pagrindin kategorija"}),Y(n).map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apraymas"}),r.jsx("textarea",{value:_.description,onChange:S=>A({..._,description:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Ataukti"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Pridti"})]})]})]})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800",children:"Redaguoti Kategorij"}),r.jsxs("form",{onSubmit:z,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Pavadinimas"}),r.jsx("input",{type:"text",value:g.name,onChange:S=>y({...g,name:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tvin kategorija"}),r.jsxs("select",{value:g.parent_id||"",onChange:S=>y({...g,parent_id:S.target.value||null}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Pagrindin kategorija"}),Y(n).filter(S=>S.id!==g.id).map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apraymas"}),r.jsx("textarea",{value:g.description||"",onChange:S=>y({...g,description:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>y(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Ataukti"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Isaugoti"})]})]})]})})]})}function By({userRole:o}){const[n,i]=X.useState([]),[l,d]=X.useState(!0),[f,h]=X.useState(""),[v,p]=X.useState(!1),[g,y]=X.useState(null),[w,O]=X.useState(new Set),[_,A]=X.useState({name:"",company_code:"",vat_code:"",address:"",city:"",postal_code:"",country:"Lietuva",phone:"",email:"",website:"",type:"both",notes:""});X.useEffect(()=>{L()},[]);const L=async()=>{try{d(!0);const{data:x,error:Z}=await ne.from("companies").select("*").order("name");if(Z)throw Z;i(x||[])}catch(x){h(x.message)}finally{d(!1)}},D=x=>{x?(y(x),A({name:x.name,company_code:x.company_code||"",vat_code:x.vat_code||"",address:x.address||"",city:x.city||"",postal_code:x.postal_code||"",country:x.country,phone:x.phone||"",email:x.email||"",website:x.website||"",type:x.type,notes:x.notes||""})):(y(null),A({name:"",company_code:"",vat_code:"",address:"",city:"",postal_code:"",country:"Lietuva",phone:"",email:"",website:"",type:"both",notes:""})),p(!0)},Y=async x=>{if(x.preventDefault(),o!=="admin"){h("Tik administratoriai gali valdyti mones");return}try{const Z={..._,company_code:_.company_code||null,vat_code:_.vat_code||null,address:_.address||null,city:_.city||null,postal_code:_.postal_code||null,phone:_.phone||null,email:_.email||null,website:_.website||null,notes:_.notes||null};if(g){const{error:J}=await ne.from("companies").update(Z).eq("id",g.id);if(J)throw J}else{const{error:J}=await ne.from("companies").insert([Z]);if(J)throw J}p(!1),y(null),L()}catch(Z){h(Z.message)}},q=async x=>{if(confirm("Ar tikrai norite itrinti i mon?"))try{const{error:Z}=await ne.from("companies").delete().eq("id",x);if(Z)throw Z;L(),O(J=>{const ae=new Set(J);return ae.delete(x),ae})}catch(Z){h(Z.message)}},z=async x=>{if(o==="admin")try{const{error:Z}=await ne.from("companies").insert([{name:`${x.name} (kopija)`,company_code:x.company_code,vat_code:x.vat_code,address:x.address,city:x.city,postal_code:x.postal_code,country:x.country,phone:x.phone,email:x.email,website:x.website,type:x.type,notes:x.notes}]);if(Z)throw Z;L()}catch(Z){h(Z.message)}},Q=async()=>{if(w.size!==0&&confirm(`Ar tikrai norite itrinti ${w.size} mon(-es)?`))try{const{error:x}=await ne.from("companies").delete().in("id",Array.from(w));if(x)throw x;O(new Set),L()}catch(x){h(x.message)}},F=x=>{O(Z=>{const J=new Set(Z);return J.has(x)?J.delete(x):J.add(x),J})},te=x=>{switch(x){case"buyer":return"Pirkjas";case"supplier":return"Tiekjas";case"both":return"Pirkjas ir tiekjas";default:return x}},S=x=>{switch(x){case"buyer":return"bg-blue-100 text-blue-700";case"supplier":return"bg-green-100 text-green-700";case"both":return"bg-purple-100 text-purple-700";default:return"bg-slate-100 text-slate-700"}};return l?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-slate-500",children:"Kraunama..."})}):r.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[r.jsxs("div",{className:"bg-white border-b border-slate-200 px-8 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"mons"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"moni duomen valdymas"})]}),o==="admin"&&r.jsxs("button",{onClick:()=>D(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx("i",{className:"fas fa-plus mr-2"}),"Pridti mon"]})]}),w.size>0&&o==="admin"&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Pasirinkta: ",w.size]}),r.jsxs("button",{onClick:Q,className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx("i",{className:"fas fa-trash mr-2"}),"Itrinti pasirinktus"]})]})]}),f&&r.jsx("div",{className:"mx-8 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:f}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 mb-4",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[o==="admin"&&r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700 w-10",children:r.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",disabled:!0})}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"PAVADINIMAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"TIPAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"ADRESAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"MIESTAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"PATO KODAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"MONS KODAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"PVM KODAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"ALIS"}),o==="admin"&&r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"VEIKSMAI"})]})}),r.jsx("tbody",{children:n.length===0&&r.jsx("tr",{children:r.jsxs("td",{colSpan:o==="admin"?10:9,className:"text-center py-12 text-slate-400",children:[r.jsx("i",{className:"fas fa-building text-4xl mb-4 block"}),r.jsx("p",{children:"Nra sukurt moni"})]})})})]})})}),n.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(x=>r.jsx("div",{className:`bg-white rounded-lg shadow-sm border-2 transition-all ${w.has(x.id)?"border-blue-500 shadow-md":"border-slate-200 hover:shadow-md"}`,children:r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o==="admin"&&r.jsx("input",{type:"checkbox",checked:w.has(x.id),onChange:()=>F(x.id),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-800 text-lg mb-1",children:x.name}),r.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded ${S(x.type)}`,children:te(x.type)})]})]}),r.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[x.company_code&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-slate-500",children:"mons kodas:"}),r.jsx("span",{children:x.company_code})]}),x.vat_code&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-slate-500",children:"PVM kodas:"}),r.jsx("span",{children:x.vat_code})]}),x.address&&r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("i",{className:"fas fa-map-marker-alt text-slate-400 mt-0.5"}),r.jsxs("span",{children:[x.address,x.city&&`, ${x.city}`]})]}),x.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("i",{className:"fas fa-phone text-slate-400"}),r.jsx("span",{children:x.phone})]}),x.email&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("i",{className:"fas fa-envelope text-slate-400"}),r.jsx("span",{className:"truncate",children:x.email})]}),x.website&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("i",{className:"fas fa-globe text-slate-400"}),r.jsx("a",{href:x.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate",children:x.website})]})]}),o==="admin"&&r.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-slate-200",children:[r.jsxs("button",{onClick:()=>D(x),className:"flex-1 px-3 py-2 text-sm bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:[r.jsx("i",{className:"fas fa-edit mr-1"}),"Redaguoti"]}),r.jsxs("button",{onClick:()=>z(x),className:"flex-1 px-3 py-2 text-sm bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:[r.jsx("i",{className:"fas fa-copy mr-1"}),"Dubliuoti"]}),r.jsx("button",{onClick:()=>q(x.id),className:"px-3 py-2 text-sm bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:r.jsx("i",{className:"fas fa-trash"})})]})]})},x.id))})]}),v&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4",children:r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:g?"Redaguoti mon":"Nauja mon"})}),r.jsxs("form",{onSubmit:Y,className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Pavadinimas ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:_.name,onChange:x=>A({..._,name:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tipas"}),r.jsxs("select",{value:_.type,onChange:x=>A({..._,type:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"buyer",children:"Pirkjas"}),r.jsx("option",{value:"supplier",children:"Tiekjas"}),r.jsx("option",{value:"both",children:"Pirkjas ir tiekjas"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"mons kodas"}),r.jsx("input",{type:"text",value:_.company_code,onChange:x=>A({..._,company_code:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"PVM kodas"}),r.jsx("input",{type:"text",value:_.vat_code,onChange:x=>A({..._,vat_code:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Adresas"}),r.jsx("input",{type:"text",value:_.address,onChange:x=>A({..._,address:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Miestas"}),r.jsx("input",{type:"text",value:_.city,onChange:x=>A({..._,city:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Pato kodas"}),r.jsx("input",{type:"text",value:_.postal_code,onChange:x=>A({..._,postal_code:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"alis"}),r.jsx("input",{type:"text",value:_.country,onChange:x=>A({..._,country:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Telefonas"}),r.jsx("input",{type:"text",value:_.phone,onChange:x=>A({..._,phone:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"El. patas"}),r.jsx("input",{type:"email",value:_.email,onChange:x=>A({..._,email:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Svetain"}),r.jsx("input",{type:"url",value:_.website,onChange:x=>A({..._,website:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Pastabos"}),r.jsx("textarea",{value:_.notes,onChange:x=>A({..._,notes:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>{p(!1),y(null)},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Ataukti"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:g?"Isaugoti":"Pridti"})]})]})]})})]})}function Ly({userRole:o}){const[n,i]=X.useState([]),[l,d]=X.useState([]),[f,h]=X.useState(!0),[v,p]=X.useState(""),[g,y]=X.useState(!1),[w,O]=X.useState(null),_=S=>{if(!S)return"";const x=new Date(S),Z=x.getFullYear(),J=String(x.getMonth()+1).padStart(2,"0"),ae=String(x.getDate()).padStart(2,"0");return`${Z}-${J}-${ae}`},[A,L]=X.useState({supplier:"",invoice_number:"",dateFrom:"",dateTo:""}),[D,Y]=X.useState({invoice_number:"",supplier_id:"",company_vat_code:"",invoice_date:new Date().toISOString().split("T")[0],order_number:"",sum_netto:0,vat_amount:0,sum_with_vat:0,notes:""});X.useEffect(()=>{z(),q()},[]);const q=async()=>{try{const{data:S,error:x}=await ne.from("companies").select("id, name, code").eq("type","supplier").order("name");if(x)throw x;d(S||[])}catch(S){console.error("Error fetching companies:",S)}},z=async()=>{try{h(!0);let S=ne.from("purchase_invoices").select(`
          *,
          companies:supplier_id (
            id,
            name,
            code
          )
        `).order("invoice_date",{ascending:!1});A.supplier&&(S=S.eq("supplier_id",A.supplier)),A.invoice_number&&(S=S.ilike("invoice_number",`%${A.invoice_number}%`)),A.dateFrom&&(S=S.gte("invoice_date",A.dateFrom)),A.dateTo&&(S=S.lte("invoice_date",A.dateTo));const{data:x,error:Z}=await S;if(Z)throw Z;i(x||[])}catch(S){p(S.message)}finally{h(!1)}};X.useEffect(()=>{z()},[A]);const Q=S=>{S?(O(S),Y({invoice_number:S.invoice_number,supplier_id:S.supplier_id||"",company_vat_code:S.company_vat_code||"",invoice_date:_(S.invoice_date),order_number:S.order_number||"",sum_netto:S.sum_netto||0,vat_amount:S.vat_amount||0,sum_with_vat:S.sum_with_vat||0,notes:S.notes||""})):(O(null),Y({invoice_number:"",supplier_id:"",company_vat_code:"",invoice_date:new Date().toISOString().split("T")[0],order_number:"",sum_netto:0,vat_amount:0,sum_with_vat:0,notes:""})),y(!0)},F=async S=>{if(S.preventDefault(),o!=="admin"){p("Tik administratoriai gali valdyti sskaitas");return}try{const x={invoice_number:D.invoice_number,supplier_id:D.supplier_id||null,company_vat_code:D.company_vat_code||null,invoice_date:D.invoice_date,order_number:D.order_number||null,sum_netto:D.sum_netto,vat_amount:D.vat_amount,sum_with_vat:D.sum_with_vat,total_amount:D.sum_with_vat,notes:D.notes||null};if(w){const{error:Z}=await ne.from("purchase_invoices").update(x).eq("id",w.id);if(Z)throw Z}else{const{error:Z}=await ne.from("purchase_invoices").insert([x]);if(Z)throw Z}y(!1),O(null),z()}catch(x){p(x.message)}},te=async S=>{if(confirm("Ar tikrai norite itrinti i sskait?"))try{const{error:x}=await ne.from("purchase_invoices").delete().eq("id",S);if(x)throw x;z()}catch(x){p(x.message)}};return f?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-slate-500",children:"Kraunama..."})}):r.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[r.jsxs("div",{className:"bg-white border-b border-slate-200 px-8 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Gaut Sskait Registras"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Pirkimo sskait valdymas"})]}),o==="admin"&&r.jsxs("button",{onClick:()=>Q(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx("i",{className:"fas fa-plus mr-2"}),"Pridti Sskait"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tiekjas:"}),r.jsxs("select",{value:A.supplier,onChange:S=>L({...A,supplier:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Visi tiekjai"}),l.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ssk. Nr.:"}),r.jsx("input",{type:"text",placeholder:"Iekoti...",value:A.invoice_number,onChange:S=>L({...A,invoice_number:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Data nuo:"}),r.jsx("input",{type:"date",value:A.dateFrom,onChange:S=>L({...A,dateFrom:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Data iki:"}),r.jsx("input",{type:"date",value:A.dateTo,onChange:S=>L({...A,dateTo:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),v&&r.jsx("div",{className:"mx-8 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:v}),r.jsx("div",{className:"flex-1 overflow-auto p-8",children:r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"ID"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"MONS KODAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"PVM KODAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"TIEKJAS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"SSKAITOS DATA"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"SSKAITOS NUMERIS"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"USAKYMO NUMERIS"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"SUMA NETTO"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"PVM"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"SUMA SU PVM"}),o==="admin"&&r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"VEIKSMAI"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:n.map((S,x)=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"py-3 px-4 text-slate-600",children:x+1}),r.jsx("td",{className:"py-3 px-4 text-slate-800",children:S.companies?.code||"-"}),r.jsx("td",{className:"py-3 px-4 text-slate-800",children:S.company_vat_code||"-"}),r.jsx("td",{className:"py-3 px-4 text-slate-800",children:S.companies?.name||"Nenurodyta"}),r.jsx("td",{className:"py-3 px-4 text-slate-600",children:_(S.invoice_date)}),r.jsx("td",{className:"py-3 px-4 text-slate-800 font-medium",children:S.invoice_number}),r.jsx("td",{className:"py-3 px-4 text-slate-600",children:S.order_number||"-"}),r.jsx("td",{className:"py-3 px-4 text-right text-slate-800",children:S.sum_netto?.toFixed(2)||"0.00"}),r.jsx("td",{className:"py-3 px-4 text-right text-slate-800",children:S.vat_amount?.toFixed(2)||"0.00"}),r.jsx("td",{className:"py-3 px-4 text-right font-semibold text-slate-800",children:S.sum_with_vat?.toFixed(2)||"0.00"}),o==="admin"&&r.jsx("td",{className:"py-3 px-4",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>Q(S),className:"text-blue-600 hover:text-blue-700 px-2 py-1",title:"Koreguoti",children:r.jsx("i",{className:"fas fa-edit"})}),r.jsx("button",{onClick:()=>te(S.id),className:"text-red-600 hover:text-red-700 px-2 py-1",title:"Trinti",children:r.jsx("i",{className:"fas fa-trash"})})]})})]},S.id))})]}),n.length===0&&r.jsxs("div",{className:"text-center py-12 text-slate-400",children:[r.jsx("i",{className:"fas fa-file-invoice text-4xl mb-4"}),r.jsx("p",{children:"Nerasta sskait"})]})]})})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4",children:r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:w?"Koreguoti Sskait":"Nauja Sskaita"})}),r.jsxs("form",{onSubmit:F,className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Sskaitos numeris ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:D.invoice_number,onChange:S=>Y({...D,invoice_number:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tiekjas"}),r.jsxs("select",{value:D.supplier_id,onChange:S=>Y({...D,supplier_id:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Pasirinkite tiekj"}),l.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"PVM kodas"}),r.jsx("input",{type:"text",value:D.company_vat_code,onChange:S=>Y({...D,company_vat_code:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Sskaitos data ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"date",value:D.invoice_date,onChange:S=>Y({...D,invoice_date:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Usakymo numeris"}),r.jsx("input",{type:"text",value:D.order_number,onChange:S=>Y({...D,order_number:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Suma netto"}),r.jsx("input",{type:"number",step:"0.01",value:D.sum_netto,onChange:S=>{const x=parseFloat(S.target.value)||0;Y({...D,sum_netto:x,sum_with_vat:x+D.vat_amount})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"PVM"}),r.jsx("input",{type:"number",step:"0.01",value:D.vat_amount,onChange:S=>{const x=parseFloat(S.target.value)||0;Y({...D,vat_amount:x,sum_with_vat:D.sum_netto+x})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Suma su PVM"}),r.jsx("input",{type:"number",step:"0.01",value:D.sum_with_vat,onChange:S=>Y({...D,sum_with_vat:parseFloat(S.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-semibold"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Pastabos"}),r.jsx("textarea",{value:D.notes,onChange:S=>Y({...D,notes:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>{y(!1),O(null)},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Ataukti"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:w?"Isaugoti":"Pridti"})]})]})]})})]})}function Hy({documentId:o,onClose:n,onApproved:i}){const[l,d]=X.useState(null),[f,h]=X.useState([]),[v,p]=X.useState(!0),[g,y]=X.useState(!1),[w,O]=X.useState(null);X.useEffect(()=>{_()},[o]);const _=async()=>{try{p(!0);const{data:q,error:z}=await ne.from("uploaded_documents").select(`
          *,
          companies:company_id (
            name,
            code
          )
        `).eq("id",o).single();if(z)throw z;d(q);const{data:Q,error:F}=await ne.from("document_items").select(`
          *,
          product_categories:category_id (
            name
          )
        `).eq("document_id",o).order("line_number");if(F)throw F;h(Q||[])}catch(q){O({type:"error",text:q.message})}finally{p(!1)}},A=async()=>{if(l)try{y(!0),O(null);const{data:{user:q}}=await ne.auth.getUser();if(!q)throw new Error("Neautentifikuotas vartotojas");const{data:z,error:Q}=await ne.from("purchase_invoices").insert({invoice_number:l.invoice_number,supplier_id:l.company_id,invoice_date:l.invoice_date,due_date:l.due_date,total_amount:l.total_amount,vat_amount:l.vat_amount,status:"uploaded",notes:l.notes}).select().single();if(Q)throw Q;const F=f.map(x=>({invoice_id:z.id,description:x.description,quantity:x.quantity,unit:x.unit,unit_price:x.unit_price,vat_rate:x.vat_rate,vat_amount:x.amount_no_vat*x.vat_rate/100,total_amount:x.amount_with_vat,status:x.category_id?"recognized":"unrecognized",confidence_score:x.match_confidence})),{error:te}=await ne.from("purchase_invoice_lines").insert(F);if(te)throw te;const{error:S}=await ne.from("uploaded_documents").update({status:"approved",approved_by:q.id,approved_at:new Date().toISOString()}).eq("id",o);if(S)throw S;O({type:"success",text:"Dokumentas skmingai patvirtintas!"}),setTimeout(()=>{i(),n()},1500)}catch(q){O({type:"error",text:q.message})}finally{y(!1)}},L=async()=>{if(l)try{y(!0),O(null);const{data:{user:q}}=await ne.auth.getUser();if(!q)throw new Error("Neautentifikuotas vartotojas");const{error:z}=await ne.from("uploaded_documents").update({status:"rejected",approved_by:q.id,approved_at:new Date().toISOString()}).eq("id",o);if(z)throw z;O({type:"success",text:"Dokumentas atmestas"}),setTimeout(()=>{i(),n()},1500)}catch(q){O({type:"error",text:q.message})}finally{y(!1)}};if(v)return r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-gray-900/50 backdrop-blur-sm flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Kraunama..."})]})});if(!l)return null;const D=f.filter(q=>q.category_id).length,Y=f.length;return r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-gray-900/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:n,children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-8 py-6 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dokumento perira"}),r.jsxs("p",{className:"text-gray-600",children:[l.invoice_number," - ",l.companies?.name||l.supplier_name]})]}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("i",{className:"fas fa-times text-xl"})})]}),w&&r.jsx("div",{className:`mx-8 mt-4 p-4 rounded-lg ${w.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:w.text}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dokumento informacija"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tiekjas"}),r.jsx("p",{className:"font-medium text-gray-900",children:l.companies?.name||l.supplier_name}),r.jsx("p",{className:"text-sm text-gray-500",children:l.supplier_code})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Sskaitos Nr."}),r.jsx("p",{className:"font-medium text-gray-900",children:l.invoice_number})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Data"}),r.jsx("p",{className:"font-medium text-gray-900",children:new Date(l.invoice_date).toLocaleDateString("lt-LT")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Suma"}),r.jsxs("p",{className:"font-medium text-gray-900",children:[l.total_amount.toFixed(2)," ",l.currency]})]})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Atpainta preki"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[D," / ",Y]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Tikslumas"}),r.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[Y>0?Math.round(D/Y*100):0,"%"]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Preks / Paslaugos (",f.length,")"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Apraymas"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kiekis"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kaina"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PVM"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Suma"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategorija"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(q=>r.jsxs("tr",{className:q.category_id?"":"bg-yellow-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:q.description}),r.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:[q.quantity," ",q.unit]}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:q.unit_price.toFixed(2)}),r.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[q.vat_rate,"%"]}),r.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:[q.amount_with_vat.toFixed(2)," EUR"]}),r.jsx("td",{className:"px-4 py-3 text-sm",children:q.category_id?r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx("i",{className:"fas fa-check mr-1"}),q.product_categories?.name||"Priskirta"]}):r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[r.jsx("i",{className:"fas fa-exclamation-triangle mr-1"}),"Nenurodyta"]})})]},q.id))})]})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sumos"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Suma be PVM:"}),r.jsxs("span",{className:"font-semibold",children:[l.amount_no_vat.toFixed(2)," EUR"]})]}),r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"PVM suma:"}),r.jsxs("span",{className:"font-semibold",children:[l.vat_amount.toFixed(2)," EUR"]})]}),r.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 pt-2 border-t",children:[r.jsx("span",{children:"Suma su PVM:"}),r.jsxs("span",{children:[l.total_amount.toFixed(2)," EUR"]})]})]})]}),l.notes&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Pastabos"}),r.jsx("p",{className:"text-gray-600",children:l.notes})]})]}),l.status==="pending"&&r.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-8 py-6 flex gap-4",children:[r.jsx("button",{onClick:L,disabled:g,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 disabled:bg-gray-100 disabled:cursor-not-allowed font-medium transition-colors",children:"Atmesti"}),r.jsx("button",{onClick:A,disabled:g,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium transition-colors",children:g?"Tvirtinama...":"Tvirtinti dokument"})]})]})})}function $y({documentId:o,onClose:n,onSaved:i}){const[l,d]=X.useState([]),[f,h]=X.useState([]),[v,p]=X.useState(!0),[g,y]=X.useState(!1),[w,O]=X.useState(null),[_,A]=X.useState({company_id:"",invoice_number:"",invoice_date:"",due_date:"",notes:""}),[L,D]=X.useState([{description:"",quantity:1,unit:"vnt",unit_price:0,vat_rate:21,amount_no_vat:0,amount_with_vat:0,category_id:null}]);X.useEffect(()=>{Y()},[o]);const Y=async()=>{try{p(!0);const[J,ae,V,M]=await Promise.all([ne.from("companies").select("*").eq("type","supplier").order("name"),ne.from("product_categories").select("*").order("name"),ne.from("uploaded_documents").select("*").eq("id",o).single(),ne.from("document_items").select("*").eq("document_id",o).order("line_number")]);J.data&&d(J.data),ae.data&&h(ae.data),V.data&&A({company_id:V.data.company_id||"",invoice_number:V.data.invoice_number||"",invoice_date:V.data.invoice_date||"",due_date:V.data.due_date||"",notes:V.data.notes||""}),M.data&&M.data.length>0&&D(M.data.map(I=>({id:I.id,description:I.description,quantity:I.quantity,unit:I.unit,unit_price:I.unit_price,vat_rate:I.vat_rate,amount_no_vat:I.amount_no_vat,amount_with_vat:I.amount_with_vat,category_id:I.category_id})))}catch(J){console.error("Error fetching data:",J)}finally{p(!1)}},q=J=>{const ae=J.quantity*J.unit_price,V=ae*J.vat_rate/100;return{amount_no_vat:Math.round(ae*100)/100,amount_with_vat:Math.round((ae+V)*100)/100}},z=(J,ae,V)=>{D(M=>M.map((I,pe)=>{if(pe===J){const B={...I,[ae]:V},P=q(B);return{...B,...P}}return I}))},Q=()=>{D(J=>[...J,{description:"",quantity:1,unit:"vnt",unit_price:0,vat_rate:21,amount_no_vat:0,amount_with_vat:0,category_id:null}])},F=J=>{L.length>1&&D(ae=>ae.filter((V,M)=>M!==J))},te=L.reduce((J,ae)=>J+ae.amount_no_vat,0),S=L.reduce((J,ae)=>J+ae.amount_with_vat,0),x=S-te,Z=async J=>{J.preventDefault(),y(!0),O(null);try{const ae=l.find(pe=>pe.id===_.company_id),{error:V}=await ne.from("uploaded_documents").update({company_id:_.company_id||null,supplier_name:ae?.name||"",supplier_code:ae?.code||"",invoice_number:_.invoice_number,invoice_date:_.invoice_date||null,due_date:_.due_date||null,amount_no_vat:Math.round(te*100)/100,vat_amount:Math.round(x*100)/100,total_amount:Math.round(S*100)/100,notes:_.notes||null}).eq("id",o);if(V)throw V;await ne.from("document_items").delete().eq("document_id",o);const M=L.map((pe,B)=>({document_id:o,line_number:B+1,description:pe.description,quantity:pe.quantity,unit:pe.unit,unit_price:pe.unit_price,vat_rate:pe.vat_rate,amount_no_vat:pe.amount_no_vat,amount_with_vat:pe.amount_with_vat,category_id:pe.category_id||null,match_type:pe.category_id?"manual":"none",match_confidence:pe.category_id?100:0})),{error:I}=await ne.from("document_items").insert(M);if(I)throw I;O({type:"success",text:"Dokumentas skmingai isaugotas!"}),setTimeout(()=>{i()},1e3)}catch(ae){O({type:"error",text:ae.message})}finally{y(!1)}};return v?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Kraunama..."})]})}):r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full my-8",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center rounded-t-lg",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Koreguoti dokument"}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("i",{className:"fas fa-times text-2xl"})})]}),r.jsxs("div",{className:"p-6 max-h-[calc(100vh-200px)] overflow-y-auto",children:[w&&r.jsx("div",{className:`mb-6 p-4 rounded-lg ${w.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:w.text}),r.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tiekjo informacija"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tiekjas ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{required:!0,value:_.company_id,onChange:J=>A({..._,company_id:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Pasirinkite tiekj"}),l.map(J=>r.jsxs("option",{value:J.id,children:[J.name," (",J.code,")"]},J.id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Sskaitos numeris ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",required:!0,value:_.invoice_number,onChange:J=>A({..._,invoice_number:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Sskaitos data ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"date",required:!0,value:_.invoice_date,onChange:J=>A({..._,invoice_date:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apmokjimo terminas"}),r.jsx("input",{type:"date",value:_.due_date,onChange:J=>A({..._,due_date:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Preks / Paslaugos"}),r.jsx("button",{type:"button",onClick:Q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"+ Pridti prek"})]}),r.jsx("div",{className:"space-y-4",children:L.map((J,ae)=>r.jsxs("div",{className:"border border-gray-200 bg-white p-4 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:["Prek ",ae+1]}),L.length>1&&r.jsx("button",{type:"button",onClick:()=>F(ae),className:"text-red-600 hover:text-red-800",children:"Itrinti"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Apraymas ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",required:!0,value:J.description,onChange:V=>z(ae,"description",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kiekis"}),r.jsx("input",{type:"number",step:"0.001",value:J.quantity,onChange:V=>z(ae,"quantity",parseFloat(V.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mato vienetas"}),r.jsx("input",{type:"text",value:J.unit,onChange:V=>z(ae,"unit",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vieneto kaina"}),r.jsx("input",{type:"number",step:"0.01",value:J.unit_price,onChange:V=>z(ae,"unit_price",parseFloat(V.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PVM %"}),r.jsxs("select",{value:J.vat_rate,onChange:V=>z(ae,"vat_rate",parseFloat(V.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"21",children:"21%"}),r.jsx("option",{value:"9",children:"9%"}),r.jsx("option",{value:"5",children:"5%"}),r.jsx("option",{value:"0",children:"0%"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preki kategorija"}),r.jsxs("select",{value:J.category_id||"",onChange:V=>z(ae,"category_id",V.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Nenurodyta"}),f.map(V=>r.jsx("option",{value:V.id,children:V.name},V.id))]})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Suma be PVM:"}),r.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[J.amount_no_vat.toFixed(2)," EUR"]})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Suma su PVM:"}),r.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[J.amount_with_vat.toFixed(2)," EUR"]})]})]})]},ae))})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sumos"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Suma be PVM:"}),r.jsxs("span",{className:"font-semibold",children:[te.toFixed(2)," EUR"]})]}),r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"PVM suma:"}),r.jsxs("span",{className:"font-semibold",children:[x.toFixed(2)," EUR"]})]}),r.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 pt-2 border-t",children:[r.jsx("span",{children:"Suma su PVM:"}),r.jsxs("span",{children:[S.toFixed(2)," EUR"]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pastabos"}),r.jsx("textarea",{value:_.notes,onChange:J=>A({..._,notes:J.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium transition-colors",children:"Ataukti"}),r.jsx("button",{type:"submit",disabled:g,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium transition-colors",children:g?"Isaugoma...":"Isaugoti"})]})]})]})]})})}function Vy(){const[o,n]=X.useState([]),[i,l]=X.useState(!0),[d,f]=X.useState("all"),[h,v]=X.useState(""),[p,g]=X.useState(null),[y,w]=X.useState(!1),[O,_]=X.useState(null),[A,L]=X.useState([]),[D,Y]=X.useState(!1);X.useEffect(()=>{q()},[d]);const q=async()=>{try{l(!0);let V=ne.from("uploaded_documents").select(`
          *,
          companies:company_id (
            name
          )
        `).order("created_at",{ascending:!1});d!=="all"&&(V=V.eq("status",d));const{data:M,error:I}=await V;if(I)throw I;n(M||[])}catch(V){console.error("Error fetching documents:",V)}finally{l(!1)}},z=async V=>{try{Y(!0);const{data:M,error:I}=await ne.from("purchase_invoice_items").select("*").eq("uploaded_document_id",V).order("created_at",{ascending:!0});if(I)throw I;L(M||[])}catch(M){console.error("Error fetching items:",M)}finally{Y(!1)}},Q=async V=>{O===V?(_(null),L([])):(_(V),await z(V))},F=async(V,M)=>{if(confirm(`Ar tikrai norite itrinti dokument "${M}"?

Bus itrinti visi su iuo dokumentu susij duomenys (preks, priedai).`))try{const{error:I}=await ne.from("uploaded_documents").delete().eq("id",V);if(I)throw I;await q(),O===V&&(_(null),L([]))}catch(I){console.error("Error deleting document:",I),alert("Klaida itrinant dokument. Bandykite dar kart.")}},te=async V=>{try{const M=o.find(N=>N.id===V);if(!M){alert("Dokumentas nerastas");return}const I=A.length>0?A:await S(V);if(I.length===0){alert("Nra preki iame dokumente. Pridkite prekes prie tvirtinant.");return}const{data:{user:pe}}=await ne.auth.getUser();if(!pe){alert("Vartotojas neprisijungs");return}const{data:B,error:P}=await ne.from("purchase_invoices").insert({invoice_number:M.invoice_number,supplier_id:M.company_id,invoice_date:M.invoice_date,total_amount:M.total_amount,vat_amount:M.vat_amount||0,status:"validated",file_url:M.file_url,notes:M.notes,company_vat_code:M.supplier_code,sum_netto:M.total_amount-(M.vat_amount||0),sum_with_vat:M.total_amount}).select().single();if(P)throw P;const ce=I.map(N=>({invoice_id:B.id,product_id:null,description:N.item_name,quantity:N.quantity,unit_price:N.unit_price,vat_rate:N.vat_rate,vat_amount:N.vat_amount,total_amount:N.total_amount})),{error:Ne}=await ne.from("purchase_invoice_lines").insert(ce);if(Ne)throw Ne;const{error:Te}=await ne.from("uploaded_documents").update({status:"approved"}).eq("id",V);if(Te)throw Te;alert("Dokumentas skmingai patvirtintas ir perkeltas  pirkimo sskaitas!"),await q(),O===V&&(_(null),L([]))}catch(M){console.error("Error approving document:",M),alert("Klaida tvirtinant dokument. Patikrinkite ar sskaitos numeris jau egzistuoja.")}},S=async V=>{const{data:M,error:I}=await ne.from("purchase_invoice_items").select("*").eq("uploaded_document_id",V);return I?(console.error("Error fetching items:",I),[]):M||[]},x=V=>V.length===0?!1:V.every(M=>M.item_code&&M.item_code.trim()!==""),Z=V=>{switch(V){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},J=V=>{switch(V){case"pending":return"Laukia";case"approved":return"Patvirtinta";case"rejected":return"Atmesta";default:return V}},ae=o.filter(V=>{const M=h.toLowerCase();return V.invoice_number.toLowerCase().includes(M)||V.supplier_name?.toLowerCase().includes(M)||V.companies?.name?.toLowerCase().includes(M)});return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"kelti dokumentai"}),r.jsx("p",{className:"text-gray-600",children:"Perirkite ir tvirtinkite keltus dokumentus"})]}),r.jsxs("div",{className:"mb-6 flex gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Iekoti pagal tiekj, ssk. numer...",value:h,onChange:V=>v(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Visi"}),r.jsx("button",{onClick:()=>f("pending"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="pending"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Laukiantys"}),r.jsx("button",{onClick:()=>f("approved"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="approved"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Patvirtinti"})]})]}),i?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Kraunama..."})]}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statusas"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tiekjas"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ssk. Nr."}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Suma"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Veiksmai"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ae.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:h?"Dokument nerasta":"Nra kelt dokument"})}):ae.map(V=>r.jsxs(X.Fragment,{children:[r.jsxs("tr",{onClick:()=>Q(V.id),className:`hover:bg-gray-50 cursor-pointer ${O===V.id?"bg-blue-50":""}`,children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Z(V.status)}`,children:J(V.status)})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.companies?.name||V.supplier_name||"-"}),V.supplier_code&&r.jsx("div",{className:"text-sm text-gray-500",children:V.supplier_code})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:V.invoice_number||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V.invoice_date?new Date(V.invoice_date).toLocaleDateString("lt-LT"):"-"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[V.total_amount.toFixed(2)," ",V.currency]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[r.jsx("button",{onClick:M=>{M.stopPropagation(),g(V.id),w(V.status==="pending")},className:"text-blue-600 hover:text-blue-900 mr-3",children:V.status==="pending"?"Koreguoti":"Perirti"}),r.jsx("button",{onClick:M=>{M.stopPropagation(),F(V.id,V.invoice_number)},className:"text-red-600 hover:text-red-900 mr-3",title:"Itrinti dokument",children:r.jsx("i",{className:"fas fa-trash"})}),r.jsx("i",{className:`fas fa-chevron-${O===V.id?"up":"down"} text-gray-400`})]})]}),O===V.id&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Preki sraas"}),r.jsxs("div",{className:"flex gap-2",children:[V.status==="pending"&&A.length>0&&r.jsxs("button",{onClick:()=>te(V.id),disabled:!x(A),className:`px-4 py-2 rounded-lg transition-colors ${x(A)?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:x(A)?"Tvirtinti dokument":"Visos preks turi bti validuotos (turti kod)",children:[r.jsx("i",{className:"fas fa-check mr-2"}),"Tvirtinti"]}),r.jsxs("button",{onClick:()=>{g(V.id),w(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx("i",{className:"fas fa-edit mr-2"}),"Koreguoti"]})]})]}),D?r.jsx("div",{className:"text-center py-4",children:r.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):r.jsx(r.Fragment,{children:A.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{className:"mb-4",children:"Nra nuskaityt preki iame dokumente."}),r.jsx("button",{onClick:()=>{g(V.id),w(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Pridti prekes rankiniu bdu"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white rounded-lg",children:[r.jsx("thead",{className:"bg-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Prek"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Kodas"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Kiekis"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Vnt."}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Kaina"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"PVM %"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"PVM"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Suma"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statusas"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:A.map(M=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-2 text-sm",children:M.item_name}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:M.item_code||"-"}),r.jsx("td",{className:"px-4 py-2 text-sm",children:M.quantity}),r.jsx("td",{className:"px-4 py-2 text-sm",children:M.unit}),r.jsx("td",{className:"px-4 py-2 text-sm",children:M.unit_price.toFixed(2)}),r.jsxs("td",{className:"px-4 py-2 text-sm",children:[M.vat_rate,"%"]}),r.jsx("td",{className:"px-4 py-2 text-sm",children:M.vat_amount.toFixed(2)}),r.jsx("td",{className:"px-4 py-2 text-sm font-medium",children:M.total_amount.toFixed(2)}),r.jsx("td",{className:"px-4 py-2 text-sm",children:M.item_code&&M.item_code.trim()!==""?r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx("i",{className:"fas fa-check mr-1"}),"OK"]}):r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[r.jsx("i",{className:"fas fa-exclamation-triangle mr-1"}),"Reikia koreguoti"]})})]},M.id))})]})})})]})})})]},V.id))})]})}),p&&y&&r.jsx($y,{documentId:p,onClose:()=>{g(null),w(!1),q()},onSaved:()=>{g(null),w(!1),q()}}),p&&!y&&r.jsx(Hy,{documentId:p,onClose:()=>{g(null),w(!1)},onApproved:()=>{g(null),w(!1),q()}})]})}function Gy({onUploadSuccess:o}){const[n,i]=X.useState(!1),[l,d]=X.useState(0),[f,h]=X.useState(null),v=async p=>{const g=p.target.files;if(!(!g||g.length===0))try{i(!0),h(null),d(0);const{data:{user:y}}=await ne.auth.getUser();if(!y)throw new Error("Neautentifikuotas vartotojas");let w=0;for(let O=0;O<g.length;O++){const _=g[O];if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(_.type)){console.warn(`Praleistas failas ${_.name} - netinkamas tipas`);continue}if(_.size>10*1024*1024){console.warn(`Praleistas failas ${_.name} - per didelis`);continue}const L=_.name.split(".").pop(),Y=`documents/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${L}`}`,{error:q}=await ne.storage.from("invoices").upload(Y,_);if(q){console.error(`Klaida keliant ${_.name}:`,q);continue}const{data:{publicUrl:z}}=ne.storage.from("invoices").getPublicUrl(Y),Q=_.type.includes("pdf")?"pdf":"image",{error:F}=await ne.from("uploaded_documents").insert({file_url:z,file_name:_.name,file_type:Q,company_id:null,supplier_name:"",supplier_code:"",invoice_number:"",invoice_date:null,due_date:null,amount_no_vat:0,vat_amount:0,total_amount:0,notes:null,user_id:y.id,status:"pending"});if(F){console.error(`Klaida isaugant ${_.name}:`,F);continue}w++,d(w)}w>0?h({type:"success",text:`Skmingai kelta ${w} ${w===1?"dokumentas":"dokumentai"}.`}):h({type:"error",text:"Nepavyko kelti nei vieno dokumento."}),p.target.value=""}catch(y){h({type:"error",text:y.message})}finally{i(!1)}};return r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"kelti nauj dokument"}),r.jsx("p",{className:"text-gray-600",children:"kelkite vien ar kelis dokumentus. Galite pasirinkti kelis failus vienu metu."})]}),f&&r.jsx("div",{className:`mb-6 p-4 rounded-lg ${f.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:f.type==="success"?"text-green-800":"text-red-800",children:[f.type==="success"&&r.jsx("i",{className:"fas fa-check-circle mr-2"}),f.text]}),f.type==="success"&&o&&r.jsxs("button",{onClick:o,className:"ml-4 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[r.jsx("span",{children:"Eiti  sra"}),r.jsx("i",{className:"fas fa-arrow-right"})]})]})}),r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow",children:[r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[r.jsx("i",{className:"fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"kelkite dokumento fail(-us)"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"PDF, JPG arba PNG (maks. 10MB kiekvienam)"}),r.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:v,className:"hidden",id:"file-upload",multiple:!0,disabled:n}),r.jsx("label",{htmlFor:"file-upload",className:`inline-block px-6 py-3 rounded-lg transition-colors ${n?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 cursor-pointer"} text-white font-medium`,children:n?"keliama...":"Pasirinkti fail(-us)"}),n&&l>0&&r.jsxs("div",{className:"mt-4 text-gray-600",children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"kelta: ",l]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsxs("h4",{className:"font-semibold text-blue-900 mb-2",children:[r.jsx("i",{className:"fas fa-info-circle mr-2"}),"Kaip naudotis:"]}),r.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Pasirinkite vien ar kelis failus i karto"}),r.jsx("li",{children:"Failai bus automatikai kelti  sistem"}),r.jsx("li",{children:"Galite kelti papildom dokument arba eiti  sra"}),r.jsx("li",{children:"Srae paspauskite ant eiluts, kad upildytumte duomenis"})]})]})]})]})})}function Ky(){const[o,n]=X.useState(!1),[i,l]=X.useState(!0),[d,f]=X.useState(""),[h,v]=X.useState(""),[p,g]=X.useState("dashboard"),[y,w]=X.useState(!1),[O,_]=X.useState(""),[A]=X.useState({needsReview:5,todayUploaded:8,todayValidated:12,todayExported:15,todayCorrections:23});X.useEffect(()=>{L();const{data:z}=ne.auth.onAuthStateChange((Q,F)=>{F?.user?(n(!0),f(F.user.email||""),D(F.user.id)):(n(!1),f(""),v(""))});return()=>{z?.subscription.unsubscribe()}},[]);const L=async()=>{const{data:{session:z}}=await ne.auth.getSession();z?.user&&(n(!0),f(z.user.email||""),await D(z.user.id)),l(!1)},D=async z=>{const{data:Q,error:F}=await ne.from("profiles").select("role").eq("id",z).maybeSingle();Q&&!F&&v(Q.role)},Y=()=>{L()},q=async()=>{await ne.auth.signOut(),n(!1),f(""),v(""),g("dashboard")};return X.useEffect(()=>{const z=()=>{_(new Date().toLocaleDateString("lt-LT",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))};z();const Q=setInterval(z,6e4);return()=>clearInterval(Q)},[]),i?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"text-slate-600",children:"Kraunama..."})}):o?r.jsxs("div",{className:"flex h-screen overflow-hidden",children:[r.jsx(Dy,{currentView:p,setCurrentView:g,stats:A,userEmail:d,userRole:h,onLogout:q}),r.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[p==="dashboard"&&r.jsx(Uy,{currentDate:O,stats:A,setShowUploadModal:w,setCurrentView:g}),p==="users"&&r.jsx(zy,{currentUserRole:h}),p==="purchases"&&r.jsx(My,{userRole:h}),p==="product-tree"&&r.jsx(qy,{userRole:h}),p==="companies"&&r.jsx(By,{userRole:h}),p==="purchase-invoices"&&r.jsx(Ly,{userRole:h}),p==="uploaded-documents"&&r.jsx(Vy,{}),p==="upload-document"&&r.jsx(Gy,{onUploadSuccess:()=>g("uploaded-documents")}),p!=="dashboard"&&p!=="users"&&p!=="purchases"&&p!=="product-tree"&&p!=="companies"&&p!=="purchase-invoices"&&p!=="uploaded-documents"&&p!=="upload-document"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 px-8 py-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("h2",{className:"text-3xl font-bold text-slate-900",children:[p==="sales-invoices"&&"Pardavimo Sskaitos",p==="export"&&"Eksportai",p==="reports"&&"Ataskaitos"]})})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsx("div",{className:"max-w-7xl mx-auto p-8",children:r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:r.jsx("p",{className:"text-slate-600",children:"Funkcionalumas bus pridtas vliau..."})})})})]})]}),y&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-slate-900/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>w(!1),children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg p-8 animate-fade-in",onClick:z=>z.stopPropagation(),children:[r.jsx("h3",{className:"text-2xl font-semibold text-slate-800 mb-4",children:"kelti Sskait"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Funkcionalumas bus pridtas vliau..."}),r.jsx("button",{onClick:()=>w(!1),className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium",children:"Udaryti"})]})})]}):r.jsx(Cy,{onLogin:Y})}cv.createRoot(document.getElementById("root")).render(r.jsx(X.StrictMode,{children:r.jsx(Ky,{})}));
